:PROPERTIES:
:ID:       ed146d63-0e55-4008-98e8-2a2f1f7329b5
:END:
#+title: Novel Game
#+filetags: Project

* 概要
ノベルゲームを作成する。

[[id:da7ec7fb-e585-4699-85dc-172c5060499a][Phaser]]がとてもよい。
ブラウザでプレイできるようにする。
* Tasks
** TODO 完成の状態へ
作品として成立してるくらいのレベルに。
DEADLINE:<2021-11-30 Tue>
** TODO dialogのコンストラクタのリファクタ
~this.text.x~ などを使うと、長いconstructorを分離できそう。
ああでも、クラス変数が未定義エラーになってしまうので、constructorの中でしか定義できない可能性がある。
** TODO 自動テスト
現状は壊れていてもわからない。
一応コンパイルができてるかのチェックはできるが。

定点クリックとJavaScriptエラーがないかのチェックくらいか。
** TODO デバッグ用のシーン選択を作る
いちいち全部辿ってチェックするのは面倒だからな。
** TODO ロゴ表示
** TODO 場面反転シーン作成
:LOGBOOK:
CLOCK: [2021-11-07 Sun 10:31]--[2021-11-07 Sun 10:47] =>  0:16
:END:
今切り替わるだけだから、場面反転したことを伝えるシーンが欲しい。
** TODO 再生あるいは時間を待つ
効果音が終わってから遷移させたい。
** TODO シーン遷移をアニメーションさせる
じわっと表示したり消すオプションに対応したい。
** TODO プロンプトをアニメーション表示する
次がクリックできますよ、ということを示すために。
固定位置だとできるんだが、微妙だな。
一番ベストなのは、文末で▽を表示してゆっくりと点滅させることだ。
** TODO 操作不能時間を作る
全部アニメーションするまではクリックしてメッセージ送りできないとか。
* Memo
** WEB上で作成まで
今jsonで書いてるところをWEB上でできるようにすれば、WEBビルダーが作れる。
* Reference
** [[https://qiita.com/non_cal/items/622108030aa2e516260c][TypeScriptを使ってノベルゲームを作ろう - Qiita]]
最低限のノベルゲームが作成できる。非常に参考になる。
* Archives
** DONE bundleするとパスが変わって読み込めない問題
CLOSED: [2021-10-31 Sun 17:32]
開発時と本番環境での、ファイルパスのズレが生じる。

カレントディレクトリはsrcディレクトリになってるようなので、そこからの相対指定でできた。
** DONE キーボードイベントでdialog boxを消す
CLOSED: [2021-11-02 Tue 22:38]
** DONE テキスト入れ
CLOSED: [2021-11-03 Wed 20:47]
まず最小限を完成させる。
** DONE 文字をアニメーション表示する
CLOSED: [2021-11-05 Fri 10:01]
一気にパッと出すのではなく、アニメーションで1文字ずつ出したい。
** DONE 空文字のときundefinedまみれになる
CLOSED: [2021-11-07 Sun 10:30]
今まではtimeline dataに空文字を入れると何も表示してなかった。
アニメーション化の影響で起こるようになった。

returnを入れて解決。
* Reference
