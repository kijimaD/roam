<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2025-11-11T23:12:06Z -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KDOC 274: 『RFCの読み方』</title>
<meta name="author" content="kijimaD" />
<meta name="generator" content="Org Mode" />
<link rel='shortcut icon' type='image/x-icon' href='https://kijimad.github.io/roam/favicon.ico' /><link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css' media='print' onload='this.media="all"' /><link rel='stylesheet' href='https://kijimad.github.io/roam/css/site.css' /><link rel='stylesheet' href='https://kijimad.github.io/roam/css/code.css' /><link rel='preconnect' href='https://fonts.googleapis.com'><link rel='preconnect' href='https://fonts.gstatic.com' crossorigin><link href='https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+JP&display=swap' rel='stylesheet'>
</head>
<body>
<div id="preamble" class="status">
<div><div class="header"><div class="container"><div class="row"><div class="col-sm-12 col-md-12"><nav class="navbar navbar-light"/></div></div></div></div></div>
</div>
<div id="content" class="content">
<h1 class="title">KDOC 274: 『RFCの読み方』</h1>
<div id="outline-container-orgfa493e9" class="outline-2">
<h2 id="orgfa493e9"><a href="#orgfa493e9">この文書のステータス</a></h2>
<div class="outline-text-2" id="text-orgfa493e9">
<ul class="org-ul">
<li>作成
<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> 2024-11-11 貴島</li>
</ul></li>
<li>レビュー
<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> 2024-11-16 貴島</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf1bd206" class="outline-2">
<h2 id="orgf1bd206"><a href="#orgf1bd206">概要</a></h2>
<div class="outline-text-2" id="text-orgf1bd206">
<p>
<a href="https://amzn.to/3UCjZaj">『RFCの読み方: インターネット技術の公式仕様書』</a>はRFCの読み方を解説する本である。
</p>
</div>
</div>
<div id="outline-container-orgfc0afdc" class="outline-2">
<h2 id="orgfc0afdc"><a href="#orgfc0afdc">メモ</a></h2>
<div class="outline-text-2" id="text-orgfc0afdc">
<ul class="org-ul">
<li>RFCはけっして削除されることはない(p19)</li>
<li>基礎を学ぶのに最適なRFC1178。コンピュータの命名方法
<ul class="org-ul">
<li>つけてはいけない名前の例</li>
<li>おすすめのつけかた。テーマのある名前をつけること。あまり使われない、数の多いものだとなおよい。色、神話上の人物の名前、元素名、など</li>
</ul></li>
<li>セキュリティに関する考察はRFCでは必須のものとされている。なのでエッセイのRFCであっても章は存在する(p70)</li>
<li>ユーザーエージェント(メーラー)からメールを送るときには、直接宛先のメールサーバではなく、SMTPサーバに送るのが一般的である。送信待ちとなるのを防いだり、再送機能を利用するためにSMTPに任せる(p89)</li>
<li>1回読んでわかりにくかったときは、箇条書きにして文を細かく分けて考えるとよい(p89)</li>
<li>待機と接続の確立(p91)
<ul class="org-ul">
<li>「待機(listing)」ポートを開きそこへの接続を待つこと。TCP/IPの通信ではコンピュータは1~65535までの番号が付いたポートを持っている</li>
<li>POP3は110番ポートを開きそこでの接続されるのを待つ</li>
<li>クライアントは自分自身のポートのうち未使用のポートを開き、そのポートとサーバ側の110番をつなげようとする。こうしてクライアントのポートからサーバの110番ポートのデータが流れるようになった状態が「接続の確立」である</li>
<li>この時点ではまだ声が聞こえるにすぎず、会話にはなっていない</li>
</ul></li>
<li>キーワードは3~4文字で、引数は40文字以下でなければならない(p94)
<ul class="org-ul">
<li>ここから言えるのは、「 <b><b>こちらから</b></b> 送る引数は40文字以下でなければならない」である。けっして「 <b><b>相手から</b></b> 送られる引数は40文字以下である」ではない</li>
</ul></li>
<li>「大文字で送らなくてはならない」とあっても、相手が必ず守っているという前提は避けなければならない(p95)</li>
<li>「POP3の認証のメカニズムは1種類だけでなく、すべてのPOP3サーバに要求される唯一の認証メカニズムは存在しない。少なくとも1種類の認証メカニズムをPOP3サーバはサポートしなくてはならない」認証プロトコルは将来的に変わりうるもので、自由度をもたせて変更に対応していこうということ(p105)</li>
<li>一般にサーバ側に「どちらでもよい」という定義があれば、クライアント側は「どちらにも対応しなければならない」ということになる(p107)</li>
<li>1バイトが何ビットなのかはCPUのアーキテクチャに依存する(p109)</li>
<li>さまざまなCPU間でもやりとりを前提とする通信プロトコルでは、特定CPUに依存することなくビット数を正確に表すために、オクテットの表記を利用することが多い(p108)</li>
<li>「ここでは、各メッセージの順番は定義されていない」クライアントでは順番を前提にしてはならない(p119)
<ul class="org-ul">
<li>規定がないことも読み取る。暗黙の前提と考えてはいけない</li>
</ul></li>
<li>コマンド例
<ul class="org-ul">
<li>STAT: メッセージがあるかどうか</li>
<li>LIST: サーバにあるメッセージ番号の一覧</li>
<li>RETR: メッセージ内容を取得する</li>
<li>DELE: 削除マークをつける。POP3 セッションが <code>UPDATE</code> 状態になるまで、実際の削除はしない</li>
<li>NOOP: POP3サーバは何もせず、単に成功のメッセージを返す</li>
<li>RSET: DELEコマンドに対して取り消しを行う</li>
<li>QUIT: 処理状態から更新状態に遷移する</li>
</ul></li>
<li>NOOPの使いどころ。レスポンスを返さずに10分経過したときにPOP3サーバはオートログアウトが認められている。接続を保持したい場合は何かしらのコマンドを発行する必要がある。そのとき、STATやLISTコマンドでもいいのだが、負荷をかけてしまう。そういう場合に負荷をかけないようにNOOPを用いる、などができる(p124)</li>
<li>最低限実装しないといけないコマンドと、オプションコマンドがある(p133)</li>
<li>存在しないメールアカウントの場合にも成功の合図を返してもよい。有効なユーザ名かどうかを判別されるのを防ぐため。UNIXのログインも同様のポリシーで、存在しないアカウント名でもパスワードを尋ねられる(p143)</li>
<li>過去に読んだことのあるメールかどうかはUIDLコマンドでユニークIDを取得し、取得済みのメッセージと比較を行えばよい</li>
<li>RFCのヘッダを見て広く利用されているものを見る。洗練されている可能性が高い。用意されているコマンドはどれも必要なもので、意味不明なものはあまりないと予測できる、という(p165)</li>
<li>目次を見てメインとなる部分を予測しそこから読み始める。そこだけでわからなかった内容を目次の項目から見つけ出し、拾い読みしていけばよい。最後に全体を始めから読み直してみるとよい、とよい(p165)</li>
<li>RFCは抽象的な記述が多い。大切な記述を見逃す可能性がある。したがって例示やセッション例などの具体例を参考にし、「これはどういう意味か」と考えながら読んでいくとよい。「自分だったらどうするか」というふうに想像力を働かせながら読み勧めるのがコツである、という(p165)</li>
<li>ジョークRFCの世界(p166)
<ul class="org-ul">
<li>1149</li>
<li>748</li>
<li>1926</li>
<li>2100</li>
<li>2550</li>
<li>3514</li>
</ul></li>
<li>RFC2234: 標準化されたBNFであるABNFを規定する(p172)</li>
<li>BNFと、一般的な文章の文法を説明する場合と異なるのは「規則」と「規則の内容」をどちらを先に記述するか、である(p174)
<ul class="org-ul">
<li>一般的な文章: 五・七・五の音からなる文を俳句と呼ぶ</li>
<li>BNF: 俳句を五・七・五の音からなる文と定義する</li>
<li>BNF: 俳句 = 五・七・五の音からなる文</li>
</ul></li>
<li>自由書式では、通常すでに世の中にあるものを説明するように記述できる。しかしBNFの場合は何もない状態から規則を1つ1つ作り上げ、それに名前をつけていくことになる(p175)</li>
<li>BNFを理解するうえでもっとも重要なのは、「名前を付けていく作業の繰り返し」という考え方である(p175)</li>
</ul>

<div class="org-src-container">
<pre class="src src-bnf">reader = "Kijima"
</pre>
</div>

<ul class="org-ul">
<li>リテラルとはプログラムのソースコードで定義される定数のことである。たとえば「name」というリテラルの文字列があった場合、これは「name」という文字列であって、決して「名前」を意味するわけではない。つまり「n」「a」「m」「e」という文字が連続して並んでいるだけである(p180)</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>任意順序形式演算子。renameもしくは省略したrenでもよいパターンを表せる</label><pre class="src src-bnf">"ren" [ "ame"]
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>Officeの製品名を定義する</label><pre class="src src-bnf">version = "95" / "97" / "2000" / "XP"
office = "Microsoft Office" version
</pre>
</div>

<ul class="org-ul">
<li>RFC 2234 でBNFのコア規則をBNFで表現している。汎用的に利用できることを前提にしている
<ul class="org-ul">
<li><a href="https://datatracker.ietf.org/doc/html/rfc2234">RFC 2234 - Augmented BNF for Syntax Specifications: ABNF</a></li>
</ul></li>
<li>p205あたりの、BNFの演算子をBNFで説明するところがよくわからなかった。概念が定着してから再度読み直す必要があるだろう</li>
<li><code>&lt;&gt;</code> の散文的表現の意味がわからない</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>イギリス帝国のグレゴリオ暦導入のため、1752年9月は3~13日が抜けている(p220)</label><pre class="src src-shell">cal 1752
</pre>
</div>

<div class="org-src-container">
<pre class="src src-nil">                            1752
      January               February               March
Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa
          1  2  3  4                     1   1  2  3  4  5  6  7
 5  6  7  8  9 10 11   2  3  4  5  6  7  8   8  9 10 11 12 13 14
12 13 14 15 16 17 18   9 10 11 12 13 14 15  15 16 17 18 19 20 21
19 20 21 22 23 24 25  16 17 18 19 20 21 22  22 23 24 25 26 27 28
26 27 28 29 30 31     23 24 25 26 27 28 29  29 30 31


       April                  May                   June
Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa
          1  2  3  4                  1  2      1  2  3  4  5  6
 5  6  7  8  9 10 11   3  4  5  6  7  8  9   7  8  9 10 11 12 13
12 13 14 15 16 17 18  10 11 12 13 14 15 16  14 15 16 17 18 19 20
19 20 21 22 23 24 25  17 18 19 20 21 22 23  21 22 23 24 25 26 27
26 27 28 29 30        24 25 26 27 28 29 30  28 29 30
                      31

        July                 August              September
Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa
          1  2  3  4                     1         1  2 14 15 16
 5  6  7  8  9 10 11   2  3  4  5  6  7  8  17 18 19 20 21 22 23
12 13 14 15 16 17 18   9 10 11 12 13 14 15  24 25 26 27 28 29 30
19 20 21 22 23 24 25  16 17 18 19 20 21 22
26 27 28 29 30 31     23 24 25 26 27 28 29
                      30 31

      October               November              December
Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa  Su Mo Tu We Th Fr Sa
 1  2  3  4  5  6  7            1  2  3  4                  1  2
 8  9 10 11 12 13 14   5  6  7  8  9 10 11   3  4  5  6  7  8  9
15 16 17 18 19 20 21  12 13 14 15 16 17 18  10 11 12 13 14 15 16
22 23 24 25 26 27 28  19 20 21 22 23 24 25  17 18 19 20 21 22 23
29 30 31              26 27 28 29 30        24 25 26 27 28 29 30
                                            31
</pre>
</div>

<ul class="org-ul">
<li>グレゴリオ暦を導入する前の日付はグレゴリオ暦で表現できないことがある</li>
<li>時刻と時間を明確に区別する。時刻はある瞬間を指し示す(p228)</li>
<li>RFCの要求レベル(必須、推奨、任意&#x2026;)を表すキーワードは<a href="https://datatracker.ietf.org/doc/html/rfc2119">RFC 2119</a>で定義されている</li>
<li>最初に文書で0年〜9999年と仮定すると明記されている。紀元前や10000年は考慮から外している</li>
<li>うるう秒が挿入される際は、59→60→00秒となる。うるう秒はうるう年の2倍以上の頻度で挿入されるので考慮する必要がある(p261)</li>
</ul>
</div>
</div>
<div id="outline-container-org19941ef" class="outline-2">
<h2 id="org19941ef"><a href="#org19941ef">関連</a></h2>
<div class="outline-text-2" id="text-org19941ef">
<p>
なし。
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<footer class="footer py-3"><div class="container"><div class="row "><div class="col-md-4"></div><div class="col-sm col-md"><nav class="navbar"><a class="nav-link text-secondary small px-0" href="./index.html">Insomnia</a><a class="nav-link text-secondary small px-0" href="./sitemap.html">Sitemap</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD/roam">Repository</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD">@kijimaD</a></nav></div><div class="col-md-4"></div></div></div></footer>
</div>
</body>
</html>
