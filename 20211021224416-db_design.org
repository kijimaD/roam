:PROPERTIES:
:ID:       1fc79e15-1830-47eb-a31d-f33cd98ce2f8
:END:
#+title: DB Design
* 概要
データベース(DB)の設計に関してまとめる。
DBはシステムの核となるもので、DBが先にあって周辺プログラムが存在する。
データで失敗するとプログラムで挽回することは難しいため、非常に重要である。

論理設計のあとで各製品レベル([[id:7dab097c-60ba-43b9-949f-c58bf3151aa8][MySQL]],  [[id:752d725e-b834-4784-8110-c58f89bd4fa2][PostgreSQL]])での実装設計がある。
* Memo
* Tasks
** TODO [[https://www.amazon.co.jp/%E6%A5%BD%E3%80%85ERD%E3%83%AC%E3%83%83%E3%82%B9%E3%83%B3-CodeZine-BOOKS-%E3%82%B9%E3%82%BF%E3%83%BC%E3%83%AD%E3%82%B8%E3%83%83%E3%82%AF-%E7%BE%BD%E7%94%9F/dp/4798110663][楽々ERDレッスン (CodeZine BOOKS) | (株)スターロジック 羽生 章洋 |本 | 通販 | Amazon]]
:LOGBOOK:
CLOCK: [2022-07-23 Sat 20:50]--[2022-07-23 Sat 21:15] =>  0:25
CLOCK: [2022-07-23 Sat 19:42]--[2022-07-23 Sat 20:07] =>  0:25
CLOCK: [2022-07-23 Sat 19:08]--[2022-07-23 Sat 19:33] =>  0:25
CLOCK: [2022-07-23 Sat 18:39]--[2022-07-23 Sat 19:04] =>  0:25
CLOCK: [2022-07-23 Sat 16:32]--[2022-07-23 Sat 16:57] =>  0:25
:END:
*** 所属はイベント
社員が組織に所属していることから直感的に、組織 -< 社員 としたくなるが、これは誤り。組織がなくなっても社員が消えることはない。
所属はイベントとして扱い、組織 -< 所属 >- 社員 とするのが正しい。組織と社員は互いに独立したエンティティ。

*** DB設計の手順
- 大まかにブロック分けを行う(業務単位か部門単位)
- それぞれのブロックごとにイベント系を洗い出す
  - タイムスタンプを打てるのがイベント系
  - 入力系業務と出力系業務に着目する
- イベント系に対する正規化を行って、リソース系を洗い出す
  - 論理的なデータ構造を押さえることに注力する
- リソース系に対する分類の洗い出しを行って、リソース系の正規化を行う
- ブロック間でリソースの統合を行い、さらに正規化を行う
- 導出系の整理をして、最終的な正規化を行う

*** 実績系・計画系・分析系の違い
- 基幹系
  - 実績データを取り扱う
- 計画系
  - 版が存在する
- 分析系
  - 版が存在する

*** データライフサイクル
- データにはライフサイクルがある。CRUD。
- データ構造とトランザクションの間に、CRUDを通じてマトリックスが書ける。各処理で、どのライフサイクルの処理を行うのか
- トランザクションを正規化しなければ、無駄なプロセスが発生する
- トランザクションの多くはUIを必要とする。UIと利用する立場によってマトリックスが書ける。そうしてユーザの役割を正規化する
- RDBMSのテーブル設計だけが設計ではない
- データはプロセスよりも永続性が高い。プロセスのありかたは変わっていくが、何をいくついくらで売ったというデータの構造は基本的に変わらないはずであるから
- インデックスは並び替え。並び替えるのにコストがかかるが探すのが早くなる。検索と更新のトレードオフ

** TODO [[https://zenn.dev/rebi/articles/28c7f1fee5730a][RDBのデータモデリング・テーブル設計の際に参考にしている考え方と資料]]
データベース設計のリンク集。
* Reference
* Archives
** DONE [[https://www.amazon.co.jp/dp/B00EE1XPAI/ref=dp-kindle-redirect?_encoding=UTF8&btkr=1][Amazon.co.jp: 達人に学ぶDB設計 徹底指南書 eBook : ミック: Kindle Store]]
CLOSED: [2021-10-23 Sat 14:07] DEADLINE: <2021-10-31 Sun>
:LOGBOOK:
CLOCK: [2021-10-21 Thu 22:58]--[2021-10-21 Thu 23:23] =>  0:25
:END:
** DONE [[https://engineers.weddingpark.co.jp/mysql-database-design/][【DB設計入門|ER図|MySQL】コンビニレシートから学ぶ！データモデリング手法 | Wedding Park CREATORS Blog]]
CLOSED: [2022-07-23 Sat 16:31]
:LOGBOOK:
CLOCK: [2022-07-23 Sat 16:03]--[2022-07-23 Sat 16:28] =>  0:25
:END:
