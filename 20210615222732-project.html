<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2025-02-17 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>project</title>
<meta name="author" content="root" />
<meta name="generator" content="Org Mode" />
<link rel='shortcut icon' type='image/x-icon' href='https://kijimad.github.io/roam/favicon.ico' /><link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css' media='print' onload='this.media="all"' /><link rel='stylesheet' href='https://kijimad.github.io/roam/css/site.css' /><link rel='stylesheet' href='https://kijimad.github.io/roam/css/code.css' /><link rel='preconnect' href='https://fonts.googleapis.com'><link rel='preconnect' href='https://fonts.gstatic.com' crossorigin><link href='https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+JP&display=swap' rel='stylesheet'>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="preamble" class="status">
<div><div class="header"><div class="container"><div class="row"><div class="col-sm-12 col-md-12"><nav class="navbar navbar-light"/></div></div></div></div></div>
</div>
<div id="content" class="content">
<h1 class="title">project</h1>

<div id="outline-container-orgefa96b7" class="outline-2">
<h2 id="orgefa96b7"><a href="#orgefa96b7">Project</a></h2>
<div class="outline-text-2" id="text-orgefa96b7">
<p>
よいプロジェクトの条件として思い浮かぶこと。
</p>

<ul class="org-ul">
<li>ワクワクすること</li>
<li>1ヶ月以内で終わること</li>
<li>何か形として残ること</li>
<li>テストしやすいこと</li>
<li>新しく学ぶことが絞られていること</li>
<li>成功か失敗かわかりやすいこと</li>
<li>他人からのフィードバックが得られること</li>
<li>難しいと思えること</li>
</ul>

<p>
<a href="http://blog.livedoor.jp/lionfan/archives/52909819.html">らいおんの隠れ家 : ポール・グレアム「良い後回し、悪い後回し」</a>の、解くべき問題に取り組んでいるかのチェックリスト。
</p>

<blockquote>
<ol class="org-ol">
<li>あなたの分野でいちばん重要な難問は何ですか。</li>
<li>それに取り組んでいますか。</li>
<li>なぜ取り組んでいないのですか。</li>
</ol>
</blockquote>

<p>
<a href="http://www-comm.cs.shinshu-u.ac.jp/david/papers/stories/japanese/hamming.pdf">あなたとあなたの研究</a>の、自分に才能をもちながら成功しない大勢の人の特徴。
</p>

<ul class="org-ul">
<li>重要な問題に取り組まないこと</li>
<li>問題に熱中しないこと</li>
<li>難しい問題を状況を変え、簡単にできるがまだ重要な問題に代えないこと</li>
<li>なぜしないか言い訳を捜し続けること</li>
</ul>
</div>
</div>

<div id="outline-container-orgd0a9d00" class="outline-2">
<h2 id="orgd0a9d00"><a href="#orgd0a9d00">Memo</a></h2>
<div class="outline-text-2" id="text-orgd0a9d00">
</div>
<div id="outline-container-org80752b9" class="outline-3">
<h3 id="org80752b9"><a href="#org80752b9">道具を作る表現力</a></h3>
<div class="outline-text-3" id="text-org80752b9">
<p>
Well-grounded rubyistで、 最期の章はテストの原形をつくった。すごい。メタなものが扱えることは、作れるものの幅を大きく広げる。多くの人に、いろんな目的で利用される道具は抽象的だ。そういうものが作れるようになったら楽しいだろうな。
</p>
</div>
</div>
<div id="outline-container-org605422d" class="outline-3">
<h3 id="org605422d"><a href="#org605422d">ゲーム作りの問題点</a></h3>
<div class="outline-text-3" id="text-org605422d">
<p>
ゲームの問題点。遊ぶ人が自分だけであること。ゼロからやるのは楽しいが、自分の望むものが大きすぎて途中で飽きる。小さいツール類だと完全に自分用でも達成できる。どこかに提出する前提でやるのがいいか。最初にそういう会を見つけておいて、そのレギュレーションに合う形でやると。
</p>
</div>
</div>
</div>
<div id="outline-container-org1e68477" class="outline-2">
<h2 id="org1e68477"><a href="#org1e68477">Tasks</a></h2>
<div class="outline-text-2" id="text-org1e68477">
</div>
<div id="outline-container-org4a0a9a2" class="outline-3">
<h3 id="org4a0a9a2"><a href="#org4a0a9a2">要件を満たしているかのチェッカーを作る</a></h3>
<div class="outline-text-3" id="text-org4a0a9a2">
<p>
実行とファイル存在がある。
</p>

<ul class="org-ul">
<li>Emacs, Docker, Go&#x2026;とか必要なソフトウェアが実行できるか</li>
<li>リポジトリとかフォントとか秘密鍵が配置されているか</li>
<li>日本語入力ができるか(mozcとfcitxが入っているか)</li>
</ul>
</div>
</div>

<div id="outline-container-orge68b025" class="outline-3">
<h3 id="orge68b025"><a href="#orge68b025">go buildしたときにテストライブラリは含まれるのか</a></h3>
<div class="outline-text-3" id="text-orge68b025">
<p>
testfyなどはテスト時にしか使われないが、それは依存ライブラリとしてバイナリに含まれることはないのか。それとも、go.modに書かれていれば含まれるのか。
</p>
</div>
</div>
<div id="outline-container-orga1cba2a" class="outline-3">
<h3 id="orga1cba2a"><a href="#orga1cba2a"><span class="done DONE">DONE</span> goimportsを読む</a></h3>
<div class="outline-text-3" id="text-orga1cba2a">
<p>
<a href="https://github.com/kd-collective/tools/blob/1261a24ceb1867ea7439eda244e53e7ace4ad777/internal/imports/fix.go">tools/internal/imports/fix.go</a>あたりを読む。
</p>


<div class="org-src-container">
<pre class="src src-shell">go-callvis -nostd -group pkg,type -focus golang.org/x/tools/internal/imports ./cmd/goimports
</pre>
</div>
</div>

<div id="outline-container-org54b38ad" class="outline-4">
<h4 id="org54b38ad"><a href="#org54b38ad">デバッグ手順</a></h4>
<div class="outline-text-4" id="text-org54b38ad">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">go/tools/cmd/goimports &#12395;&#12390;--</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">goimports&#12395;&#12399;&#12501;&#12449;&#12452;&#12523;&#12398;&#25351;&#23450;&#12364;&#24517;&#35201;&#12391;&#12354;&#12427;</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">dlv debug -- /home/orange/ProjectOrg/go/tools/internal/imports</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">dlv debug -- /home/orange/Project/test</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">visitFile&#12395;&#12502;&#12524;&#12540;&#12463;&#12509;&#12452;&#12531;&#12488;&#12434;&#12363;&#12369;&#12427;&#12290;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12539;&#12501;&#12449;&#12452;&#12523;&#12372;&#12392;&#12395;&#23455;&#34892;&#12373;&#12428;&#12427;&#12398;&#12391;&#12289;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12364;&#26469;&#12383;&#12425;&#12473;&#12461;&#12483;&#12503;&#12377;&#12427;</span>
(dlv) <span class="org-keyword">break</span> goimports.go:186
</pre>
</div>

<pre class="example">
- break /home/orange/ProjectOrg/go/tools/internal/imports/fix.go:579
- break /home/orange/ProjectOrg/go/tools/internal/imports/fix.go:1701
- break /home/orange/ProjectOrg/go/tools/internal/imports/fix.go:1021
</pre>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>依存関係可視化。あまりよくわからない</label><pre class="src src-shell">go-callvis -nostd -group type -focus golang.org/x/tools/internal/imports ./cmd/goimports
</pre>
</div>
</div>
</div>

<div id="outline-container-org157111e" class="outline-4">
<h4 id="org157111e"><a href="#org157111e">流れ</a></h4>
<div class="outline-text-4" id="text-org157111e">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-comment-delimiter"># </span><span class="org-comment">&#21508;&#12501;&#12449;&#12452;&#12523;&#12395;&#36969;&#29992;</span>
- gofmtMain
  - walkDir(path)
    - visitFile -- &#21508;&#12501;&#12449;&#12452;&#12523;&#12372;&#12392;&#12395;&#23455;&#34892;&#12377;&#12427;&#20966;&#29702;&#12290;&#38306;&#25968;&#12434;&#28193;&#12377;
      - processFile -- &#20966;&#29702;&#26412;&#20307;&#12290;&#12477;&#12540;&#12473;&#12467;&#12540;&#12489;&#12398;&#12501;&#12449;&#12452;&#12523;&#12434;&#38283;&#12367;
        - Process -- parserMode&#12391;&#25369;&#21205;&#12434;&#22793;&#12360;&#12388;&#12388;&#12289;parse, fixImports, formatFile&#12434;&#23455;&#34892;&#12377;&#12427;

<span class="org-comment-delimiter"># </span><span class="org-comment">&#26412;&#20966;&#29702;</span>
- Process
  - parse
    - parser.ParseFile -- ast.File&#12434;&#29983;&#25104;&#12377;&#12427;&#12290;&#27083;&#25991;&#24773;&#22577;&#12434;&#24471;&#12425;&#12428;&#12427;
      - readSource -- &#24341;&#25968;&#12398;src&#12364;&#38750;nil&#12398;&#22580;&#21512;&#12399;&#21336;&#12395;[]byte&#12395;&#22793;&#25563;&#12434;&#12377;&#12427;&#12384;&#12369;
      - (parser) init -- &#12524;&#12471;&#12540;&#12496;&#12540;&#12398;parser&#12434;&#21021;&#26399;&#21270;&#12377;&#12427;
      - (parser) parseFile
    - fset.File().SetLinesForContent
  - fixImports(=fixImportsDefault())
    - getFixes -- &#29872;&#22659;&#22793;&#25968;&#12434;&#21462;&#24471;&#12394;&#12393;
      - NewProcessEnvSource (&#24341;&#25968;&#12398;ProcessEnv&#12434;&#12521;&#12483;&#12503;&#12377;&#12427;)
      - getFixesWithSource -- &#38263;&#12367;&#12390;&#37325;&#35201;&#12381;&#12358;&#12290;pass{}&#12434;&#21021;&#26399;&#21270;&#12375;&#12289;&#12371;&#12398;&#26178;&#28857;&#12391;&#21028;&#26126;&#12375;&#12390;&#12356;&#12427;&#12418;&#12398;&#12384;&#12369;&#20837;&#12428;&#12427;
        - (p *pass) load(ctx context.Context) ([]*ImportFix, bool) -- pass&#12398;&#20013;&#36523;&#12434;&#36820;&#12377;&#12290;missingReference&#12364;&#12354;&#12428;&#12400;&#30064;&#24120;&#12392;&#12375;&#12390;&#32066;&#20102;
          - collectReferences(f *ast.File) References -- &#12477;&#12540;&#12473;&#12467;&#12540;&#12489;&#12363;&#12425;&#20381;&#23384;&#12434;&#25506;&#32034;&#12377;&#12427;(import&#12434;&#20351;&#12431;&#12378;&#12395;)
            -   ast.Walk(v Visitor, node Node) -- Visitor&#12399;&#38306;&#25968;&#12290;&#38306;&#25968;&#28193;&#12375;&#12390;&#25506;&#32034;&#12377;&#12427;&#12371;&#12398;&#12497;&#12479;&#12540;&#12531;
          - collectImports(f *ast.File) []*ImportInfo -- import&#25991;&#12363;&#12425;&#21462;&#12387;&#12390;&#12367;&#12427;
          - (p *pass) importIdentifier
            - ImportPathToAssumedName -- pkg/v2&#12394;&#12393;&#12398;&#22580;&#21512;&#12395;&#36969;&#20999;&#12395;&#12497;&#12483;&#12465;&#12540;&#12472;&#21517;&#12434;&#24471;&#12427;
          - (p *pass) fix -- p.candidates&#12434;&#20351;&#12387;&#12390;missing imports&#12434;&#35036;&#23436;&#12377;&#12427;&#12290;&#12424;&#12367;&#12431;&#12363;&#12425;&#12394;&#12356;&#12394;
        - (&#20840;&#37096;&#35299;&#27770;&#12391;&#12365;&#12390;&#12383;&#12425;&#32066;&#20102;)
        - parseOtherFiles -- &#12497;&#12483;&#12465;&#12540;&#12472;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12434;&#25506;&#32034;
        - (p *pass) load -- 2&#22238;&#30446;
        - (p *pass) assumeSiblingImportsValid() -- &#21029;&#12501;&#12449;&#12452;&#12523;&#12398;&#12452;&#12531;&#12509;&#12540;&#12488;&#12434;&#35519;&#12409;&#12427;(&#24460;&#12391;&#20351;&#12358;)
        - addStdlibCandidates -- &#27161;&#28310;&#12521;&#12452;&#12502;&#12521;&#12522;&#12434;&#20505;&#35036;&#12395;&#36861;&#21152;&#12377;&#12427;&#12290;stdlib.PackageSymbols&#12399;&#21029;&#12501;&#12449;&#12452;&#12523;&#12391;&#22793;&#25968;&#12395;&#12394;&#12387;&#12390;&#12356;&#12427;&#12290;&#12497;&#12473;&#12398;&#26411;&#23614;&#12434;&#12481;&#12455;&#12483;&#12463;&#12375;&#12390;&#12289;&#19968;&#33268;&#12375;&#12390;&#12356;&#12428;&#12400;&#20505;&#35036;&#12395;&#36861;&#21152;&#12377;&#12427;
          - symbolNameSet -- &#27161;&#28310;&#12497;&#12483;&#12465;&#12540;&#12472;&#12398;&#12471;&#12531;&#12508;&#12523;&#12434;&#35672;&#21029;&#23376;&#12384;&#12369;&#12395;&#12377;&#12427;
          - addCandidate -- (imp *ImportInfo, pkg *PackageInfo) imp: &#12477;&#12540;&#12473;&#12467;&#12540;&#12489;&#12363;&#12425;&#25506;&#12375;&#12383;&#19968;&#35239;, pkg: &#27161;&#28310;&#12521;&#12452;&#12502;&#12521;&#12522;&#12398;&#35672;&#21029;&#23376;&#19968;&#35239;&#12290;refs&#12395;&#12354;&#12427; &amp;&amp; &#27161;&#28310;&#12521;&#12452;&#12502;&#12521;&#12522;&#12395;&#12354;&#12427;&#12418;&#12398;&#12434;candidates&#12395;&#36861;&#21152;&#12377;&#12427;
        - (p *pass) fix
          - (p *pass) findMissingImport
        - addExternalCandidates -- $<span class="org-variable-name">GOPATH</span> &#12363;&#12425;&#20505;&#35036;&#12434;&#25506;&#12377;
    - apply
</pre>
</div>
</div>
</div>

<div id="outline-container-org969beb3" class="outline-4">
<h4 id="org969beb3"><a href="#org969beb3">概念</a></h4>
<div class="outline-text-4" id="text-org969beb3">
<p>
FileSet。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>FileSet定義</label><pre class="src src-git-permalink">https://github.com/kd-collective/go/blob/19e923182e590ae6568c2c714f20f32512aeb3e3/src/go/token/position.go#L426-L431
</pre>
</div>

<div class="results" id="org62d16e6">
<p>
type FileSet struct {
	mutex sync.RWMutex         <i>/ protects the file set
	base  int                  /</i> base offset for the next file
	files []*File              <i>/ list of files in the order added to the set
	last  atomic.Pointer[File] /</i> cache of last file looked up
}
</p>

</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>使われ方。なぜファイル名などと一緒にFileSetが必要なのだろうか</label><pre class="src src-git-permalink">https://github.com/kd-collective/tools/blob/1261a24ceb1867ea7439eda244e53e7ace4ad777/internal/imports/imports.go#L182
</pre>
</div>

<div class="results" id="orgac5771d">
<p>
file, err := parser.ParseFile(fset, filename, src, parserMode)
</p>

</div>
</div>
</div>

<div id="outline-container-org43ea61c" class="outline-4">
<h4 id="org43ea61c"><a href="#org43ea61c">メモ</a></h4>
<div class="outline-text-4" id="text-org43ea61c">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>main関数を含むか判定する</label><pre class="src src-git-permalink">https://github.com/kd-collective/tools/blob/1261a24ceb1867ea7439eda244e53e7ace4ad777/internal/imports/imports.go#L254
</pre>
</div>

<div class="results" id="org5801fbe">
<p>
func containsMainFunc(file *ast.File) bool {
</p>

</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>引数がないと標準入力から受け取る。なのでデバッグ時にファイル(ディレクトリ)を指定する</label><pre class="src src-git-permalink">https://github.com/kd-collective/tools/blob/1261a24ceb1867ea7439eda244e53e7ace4ad777/cmd/goimports/goimports.go#L271-L276
</pre>
</div>

<div class="results" id="orgb9b2b3e">
<p>
if len(paths) <code>= 0 {
		if err :</code> processFile(&ldquo;&lt;standard input&gt;&rdquo;, os.Stdin, os.Stdout, fromStdin); err != nil {
		report(err)
	}
	return
}
</p>

</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>parseにブレークする用</label><pre class="src src-git-permalink">https://github.com/kd-collective/tools/blob/1261a24ceb1867ea7439eda244e53e7ace4ad777/internal/imports/imports.go#L176
</pre>
</div>

<div class="results" id="org8120ff0">
<p>
func parse(fset *token.FileSet, filename string, src []byte, parserMode parser.Mode, fragment bool) (*ast.File, func(orig, src []byte) []byte, error) {
</p>

</div>

<div class="org-src-container">
<pre class="src src-git-permalink">https://github.com/kd-collective/tools/blob/1261a24ceb1867ea7439eda244e53e7ace4ad777/internal/imports/fix.go#L152-L186
</pre>
</div>

<div class="results" id="org5824e4d">
<p>
func collectReferences(f *ast.File) References {
	refs := References{}
</p>

<p>
	var visitor visitFn
	visitor = func(node ast.Node) ast.Visitor {
		if node <code>= nil {
			return visitor
		}
		switch v :</code> node.(type) {
		case *ast.SelectorExpr:
			xident, ok := v.X.(*ast.Ident)
			if !ok {
				break
			}
			if xident.Obj != nil {
				<i>/ If the parser can resolve it, it&rsquo;s not a package ref.
				break
			}
			if !ast.IsExported(v.Sel.Name) {
				/</i> Whatever this is, it&rsquo;s not exported from a package.
				break
			}
			pkgName := xident.Name
			r := refs[pkgName]
			if r == nil {
				r = make(map[string]bool)
				refs[pkgName] = r
			}
			r[v.Sel.Name] = true
		}
		return visitor
	}
	ast.Walk(visitor, f)
	return refs
}
</p>

</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 8: </span>標準ライブラリのシグネチャ一覧</label><pre class="src src-git-permalink">https://github.com/kd-collective/tools/blob/1261a24ceb1867ea7439eda244e53e7ace4ad777/internal/stdlib/manifest.go#L9
</pre>
</div>

<div class="results" id="orga56e371">
<p>
var PackageSymbols = map[string][]Symbol{
</p>

</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 9: </span>リゾルバを選択する(ifに入らなければModuleResolver)</label><pre class="src src-git-permalink">https://github.com/kd-collective/tools/blob/1261a24ceb1867ea7439eda244e53e7ace4ad777/internal/imports/fix.go#L1026-L1043
</pre>
</div>

<p>
種類。
</p>

<ul class="org-ul">
<li>標準ライブラリ</li>
<li>同じmodule内で別package呼び出し</li>
<li>外部module(go.modに記載されている)
<ul class="org-ul">
<li><a href="https://github.com/kd-collective/tools/blob/1261a24ceb1867ea7439eda244e53e7ace4ad777/internal/imports/fix.go#L1621">https://github.com/kd-collective/tools/blob/1261a24ceb1867ea7439eda244e53e7ace4ad777/internal/imports/fix.go#L1621</a></li>
</ul></li>
<li>Source interfaceの実装は2つある。Sourceインターフェースはリゾルバをメソッドに持ち、それぞれのロジックでインポートパスとパッケージ名を解決する

<ul class="org-ul">
<li>envSource &#x2013; 環境変数から</li>
<li>IndexSource &#x2013; go.modから</li>
</ul></li>
<li>resolverの実装は2つある。これによって、依存関係をどこから持ってくるかを決める。通常Modulesなので、go.modを外部ライブラリの依存関係解決に利用する
<ul class="org-ul">
<li>GOPATHの場合 &#x2013; 古い</li>
<li>Modulesの場合 &#x2013; 現</li>
</ul></li>
<li>候補の一覧を出してから、消していく</li>
<li><a href="https://github.com/kd-collective/tools/blob/1261a24ceb1867ea7439eda244e53e7ace4ad777/internal/imports/fix.go#L1522">https://github.com/kd-collective/tools/blob/1261a24ceb1867ea7439eda244e53e7ace4ad777/internal/imports/fix.go#L1522</a> パッケージの全シンボルを取り出す。定数・型・変数・関数</li>
</ul>
</div>
</div>

<div id="outline-container-org8a2c6b5" class="outline-4">
<h4 id="org8a2c6b5"><a href="#org8a2c6b5">おもしろポイント</a></h4>
<div class="outline-text-4" id="text-org8a2c6b5">
<ul class="org-ul">
<li>標準ライブラリの全シグネチャを出すスクリプトがある</li>
<li>インポートパスの末尾がパッケージ名である</li>
<li>go.modから使っているパスを取得する</li>
<li>universeで全シグネチャを取得できる。go.modの情報と合わせて外部ライブラリがどのパッケージに属するかを推定する</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgc3ae09f" class="outline-3">
<h3 id="orgc3ae09f"><a href="#orgc3ae09f">gormを読む</a></h3>
<div class="outline-text-3" id="text-orgc3ae09f">
<pre class="example">
2a20e55 Possible to specify table name
</pre>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 11: </span>複数形、こんなもので大丈夫なのか</label><pre class="src src-git-permalink">https://github.com/kd-collective/gorm/blob/f4aa43544632181c095eb31bdae29ab0dd65339c/model.go#L126-L132
</pre>
</div>

<div class="results" id="org36beb9e">
<p>
pluralMap := map[string]string{&ldquo;ch&rdquo;: &ldquo;ches&rdquo;, &ldquo;ss&rdquo;: &ldquo;sses&rdquo;, &ldquo;sh&rdquo;: &ldquo;shes&rdquo;, &ldquo;day&rdquo;: &ldquo;days&rdquo;, &ldquo;y&rdquo;: &ldquo;ies&rdquo;, &ldquo;x&rdquo;: &ldquo;xes&rdquo;, &ldquo;s?&rdquo;: &ldquo;s&rdquo;}
for key, value := range pluralMap {
	reg := regexp.MustCompile(key + &ldquo;$&rdquo;)
	if reg.MatchString(str) {
		return reg.ReplaceAllString(str, value), err
	}
}
</p>

</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 12: </span>フィールド名をスネークケースにしてカラム名にしている</label><pre class="src src-git-permalink">https://github.com/kd-collective/gorm/blob/2a20e551ed0df2956ca6328cd928039c7942d350/do.go#L230-L233
</pre>
</div>

<div class="results" id="org9e1656c">
<p>
field := dest.FieldByName(snakeToUpperCamel(value))
if field.IsValid() {
	values = append(values, dest.FieldByName(snakeToUpperCamel(value)).Addr().Interface())
}
</p>

</div>
</div>

<div id="outline-container-org3a7303d" class="outline-4">
<h4 id="org3a7303d"><a href="#org3a7303d">教訓</a></h4>
<div class="outline-text-4" id="text-org3a7303d">
<ul class="org-ul">
<li>まずAPIを考えて空の関数として列挙する</li>
<li>最初は雑でいい</li>
<li>こまめにコミットする</li>
<li>エラーハンドリングはあとでいい</li>
<li>privateにするのはあとでいい</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org51d06dd" class="outline-3">
<h3 id="org51d06dd"><a href="#org51d06dd">オリジナルのカルタ遊び</a></h3>
<div class="outline-text-3" id="text-org51d06dd">
<p>
クラウド上でオリジナルのカルタを作って遊ぶ。
</p>

<ul class="org-ul">
<li>Gitサブコマンドカルタ</li>
<li>AWSサービスカルタ</li>
</ul>
</div>
</div>
<div id="outline-container-org0a0c193" class="outline-3">
<h3 id="org0a0c193"><a href="#org0a0c193">org idリンクの修正ツール</a></h3>
<div class="outline-text-3" id="text-org0a0c193">
<p>
タイトルをリネームしたときに、ドキュメント全体のリンクもなおしてほしい。idがあるのだから、検索でわかるはずだ。
</p>
</div>
</div>

<div id="outline-container-orge4ed5c7" class="outline-3">
<h3 id="orge4ed5c7"><a href="#orge4ed5c7">ブラウザでシェルの実行結果を見る</a></h3>
<div class="outline-text-3" id="text-orge4ed5c7">
<ul class="org-ul">
<li>GitHub Actionsの実行結果のイメージ</li>
<li>できればリアルタイムで</li>
</ul>
</div>
</div>

<div id="outline-container-orge129d28" class="outline-3">
<h3 id="orge129d28"><a href="#orge129d28"><a href="20210725134208-python.html#ID-a6c9c9ad-d9b1-4e13-8992-75d8590e464c">Python</a>の雛形リポジトリを作る</a></h3>
<div class="outline-text-3" id="text-orge129d28">
<p>
<a href="20211107104950-linter.html#ID-e5663529-8095-4fc8-8fb5-500dd4471a73">Linter</a>設定とかしておく。
</p>
</div>
</div>
<div id="outline-container-orgf8a8a05" class="outline-3">
<h3 id="orgf8a8a05"><a href="#orgf8a8a05">GitHubリポジトリを自動設定するプログラム</a></h3>
<div class="outline-text-3" id="text-orgf8a8a05">
<p>
CLIでURLを打つと、自動でその設定にしてくれるプログラム。というか、リポジトリの作成からやってくれる。リポジトリ設定のファイル化。すでにありそう。
</p>

<ul class="org-ul">
<li>デフォルトトークンの権限を読み書き可能にする</li>
<li>ブランチを自動削除する</li>
</ul>
</div>
</div>
<div id="outline-container-orgb6d970b" class="outline-3">
<h3 id="orgb6d970b"><a href="#orgb6d970b">関連するWikipediaの項目を出すプログラム</a></h3>
<div class="outline-text-3" id="text-orgb6d970b">
<p>
たとえばCPUと打ったら、CPUに関連する記事を列挙するような。
</p>

<p>
勉強するときに、ドバっとまとめて関連する分野の単語をおさえるのに使う。
</p>
</div>
</div>

<div id="outline-container-org70c5c32" class="outline-3">
<h3 id="org70c5c32"><a href="#org70c5c32">Google ChromeのPDFでスクロールしたときにページ数を更新する</a></h3>
<div class="outline-text-3" id="text-org70c5c32">
<p>
ページを自動更新してほしい。いや、ブックマークレットとかできそうな感じもする。
</p>
</div>
</div>
<div id="outline-container-orgf4620b9" class="outline-3">
<h3 id="orgf4620b9"><a href="#orgf4620b9">Google Meetのコメントを流して表示する</a></h3>
<div class="outline-text-3" id="text-orgf4620b9">
<p>
画面共有中に、ほかのタブでコメントを見られるようにしたい。流れるようにできればベスト。Chrome拡張でできそうなのがあったが、動かなかった。
</p>

<ul class="org-ul">
<li>X Window でやればできるだろう。コメントを取れるかはわからないが</li>
</ul>
</div>
</div>
<div id="outline-container-org16a4141" class="outline-3">
<h3 id="org16a4141"><a href="#org16a4141">バイナリの可視化ツール</a></h3>
<div class="outline-text-3" id="text-org16a4141">
<p>
バイナリかるたでやっているように、出現頻度で画像化したい。
</p>

<ul class="org-ul">
<li>文字表示については、別でツールでやるのでいらない</li>
<li>全部やると遅そう。オフセットとサイズを指定して一部だけ可視化できればよい</li>
<li>仕様の参考にする。<a href="https://digitaltravesia.jp/usamimihurricane/webhelp/_RESOURCE/MenuItem/another/anotherAoZoraSiroNeko.html">汎用ファイルアナライザ「青い空を見上げればいつもそこに白い猫」</a></li>
</ul>
</div>
</div>

<div id="outline-container-org94cffe5" class="outline-3">
<h3 id="org94cffe5"><a href="#org94cffe5">create-link修正</a></h3>
<div class="outline-text-3" id="text-org94cffe5">
<p>
org-make-link-stringを使ってリンクを組み立てるようにする。
</p>
</div>
</div>
<div id="outline-container-orgf586098" class="outline-3">
<h3 id="orgf586098"><a href="#orgf586098"><span class="todo TODO">TODO</span> vtermが、負の前置引数を尊重してないように見える</a></h3>
<div class="outline-text-3" id="text-orgf586098">
<p>
vtermだけ実行できないのを調べる。eshellではできた。
</p>
</div>
</div>
<div id="outline-container-org40249b5" class="outline-3">
<h3 id="org40249b5"><a href="#org40249b5"><span class="todo TODO">TODO</span> 郷土本</a></h3>
<div class="outline-text-3" id="text-org40249b5">
<p>
作る。
</p>
</div>
</div>
<div id="outline-container-org4071e13" class="outline-3">
<h3 id="org4071e13"><a href="#org4071e13"><span class="todo TODO">TODO</span> denote renameをディレクトリ内の全ファイルに対して適用する</a></h3>
<div class="outline-text-3" id="text-org4071e13">
<p>
<code>denote-rename-file-using-front-matter</code> を全ファイルに対して実行したい。
</p>
</div>
</div>
<div id="outline-container-orgd750856" class="outline-3">
<h3 id="orgd750856"><a href="#orgd750856"><span class="todo TODO">TODO</span> アセンブラの実行結果を可視化するツール</a></h3>
<div class="outline-text-3" id="text-orgd750856">
<p>
パラパラ漫画にすれば一瞬で理解できるように見える。
</p>

<p>
いい感じのものが見つからない。デバッガとは違うんだよな。
</p>
</div>
</div>
<div id="outline-container-org6c4d81b" class="outline-3">
<h3 id="org6c4d81b"><a href="#org6c4d81b"><span class="todo TODO">TODO</span> 簡易メモ帳</a></h3>
<div class="outline-text-3" id="text-org6c4d81b">
<p>
Emacsからpecoみたいな感じで、あまり覚えてないテキストをインクリメンタル検索しながら呼び出せるようにする。
</p>
</div>
</div>
<div id="outline-container-orgbca9548" class="outline-3">
<h3 id="orgbca9548"><a href="#orgbca9548">リンクのかぶりチェックツール</a></h3>
<div class="outline-text-3" id="text-orgbca9548">
<p>
同じものを追加していることがよくあるので、検知できるようにする。
</p>
</div>
</div>
<div id="outline-container-org3787f09" class="outline-3">
<h3 id="org3787f09"><a href="#org3787f09">エレベーター実装</a></h3>
<div class="outline-text-3" id="text-org3787f09">
<p>
アルゴリズムを実装してみる。
</p>
</div>
</div>
<div id="outline-container-org730c806" class="outline-3">
<h3 id="org730c806"><a href="#org730c806">コードドキュメント生成ツール</a></h3>
<div class="outline-text-3" id="text-org730c806">
<p>
コメントとソースコードでいい感じのWebページに変換する。
</p>
</div>
</div>
<div id="outline-container-org4d661d1" class="outline-3">
<h3 id="org4d661d1"><a href="#org4d661d1"><span class="todo TODO">TODO</span> RFCページのように各段落にアンカーを設定できるツールを作成する</a></h3>
<div class="outline-text-3" id="text-org4d661d1">
<p>
RFCのサイトでは各段落ごとでアンカーを設定できる。示しやすい。
</p>

<ul class="org-ul">
<li>PLATEAUのHTMLドキュメントでやろうとしたが、タグ構造が複雑で難しい。段落という概念がとれない</li>
<li>PDFをHTML化するとタグ構造はめちゃくちゃになっているため難しい</li>
</ul>
</div>
</div>

<div id="outline-container-orgd6eea34" class="outline-3">
<h3 id="orgd6eea34"><a href="#orgd6eea34">Chrome拡張のorg-captureを右クリックに対応させる</a></h3>
<div class="outline-text-3" id="text-orgd6eea34">
<p>
ボタンかショートカットキーからしかできないが、右クリックからできたら便利だろうな。
</p>
</div>
</div>
<div id="outline-container-orgb541768" class="outline-3">
<h3 id="orgb541768"><a href="#orgb541768">org-agendaのブラウザ表示</a></h3>
<div class="outline-text-3" id="text-orgb541768">
<p>
ブラウザでの表示をモダンにできるようにする。orgパーサーが必要か。
</p>
</div>
</div>
<div id="outline-container-orgc529dfc" class="outline-3">
<h3 id="orgc529dfc"><a href="#orgc529dfc"><span class="todo TODO">TODO</span> コンテナダッシュボード</a></h3>
<div class="outline-text-3" id="text-orgc529dfc">
<p>
docker-composeで立てたコンテナを手軽に一覧できるようにする。
</p>

<ul class="org-ul">
<li>envconfig
<ul class="org-ul">
<li>環境変数の読み込み、ないときはデフォルト値を設定する</li>
</ul></li>
<li>signal.NotifyContext
<ul class="org-ul">
<li>シグナルをキャッチしてコンテキストをcancelさせる処理を楽に書ける</li>
</ul></li>
<li>sync.RWMutex</li>
<li>webサーバ - クライアントはWebソケット。webサーバはdockerからのイベントを受け付け、それをクライアントに通知する</li>
<li>websocketConnectionとclientConnectionの違いはなんだ
<ul class="org-ul">
<li>WebSocketは、HTTPとは異なるプロトコルである</li>
<li>HTTPで接続を確立してから、UpgradeしてWebSocketで通信する</li>
<li>つまり両方は別のconnectionで、WebSocketで通信するには両方必要</li>
</ul></li>
<li>ClientConnectionsは購読リスト。websocket接続を確立したクライアントごとにある
<ul class="org-ul">
<li>たとえばブラウザとcurlでリクエストを飛ばしたとしたら、ClientConnectionsの長さは2になる。</li>
</ul></li>
<li>LogStoreやDocker構造体はどのリクエストでも共通</li>
</ul>
</div>

<div id="outline-container-org63ecbd5" class="outline-4">
<h4 id="org63ecbd5"><a href="#org63ecbd5"><span class="todo TODO">TODO</span> バックエンドのコードを把握する</a></h4>
<div class="outline-text-4" id="text-org63ecbd5">
<p>
けっこう複雑で絡み合っていて、よくわかっていない。
</p>

<p>
読むというよりは、実際機能追加したみたほうがいいんだろうな。
</p>
</div>
</div>

<div id="outline-container-org3c1858b" class="outline-4">
<h4 id="org3c1858b"><a href="#org3c1858b"><span class="todo TODO">TODO</span> フロント側のコードを把握する</a></h4>
<div class="outline-text-4" id="text-org3c1858b">
<p>
おそろくフロントのちゃんとした書き方なので参考になる感じがする。
</p>
</div>
</div>
<div id="outline-container-org4283aeb" class="outline-4">
<h4 id="org4283aeb"><a href="#org4283aeb"><span class="todo TODO">TODO</span> 検証しやすいようにする</a></h4>
<div class="outline-text-4" id="text-org4283aeb">
<p>
ウェブソケットの確かめ方がよくわからない。どうやってデバッグすればいいのだろう。
</p>
</div>
</div>
</div>
<div id="outline-container-org028f84a" class="outline-3">
<h3 id="org028f84a"><a href="#org028f84a">各node数をカウントするコマンド</a></h3>
<div class="outline-text-3" id="text-org028f84a">
<p>
ASTテストが網羅しているか調べるツール。プロジェクト全体で見るのもおもしろそう。
</p>
</div>
</div>
<div id="outline-container-org9cfaeec" class="outline-3">
<h3 id="org9cfaeec"><a href="#org9cfaeec">gorunをコンテナ実行する</a></h3>
<div class="outline-text-3" id="text-org9cfaeec">
<p>
より<a href="20220427215330-github_actions.html#ID-2d35ac9e-554a-4142-bba7-3c614cbfe4c4">GitHub Actions</a>に近づける。
</p>
</div>
</div>
<div id="outline-container-orgc47e2eb" class="outline-3">
<h3 id="orgc47e2eb"><a href="#orgc47e2eb">golangci-lintを調べる</a></h3>
<div class="outline-text-3" id="text-orgc47e2eb">
<ul class="org-ul">
<li>エラーが出るが、矢印が正しくないときがあるのを調べる</li>
<li>オフラインのとき解決に失敗するのを調べる</li>
<li>タグの形式をチェック。チェックできなさそうな気もする</li>
</ul>
</div>
</div>

<div id="outline-container-org13fde45" class="outline-3">
<h3 id="org13fde45"><a href="#org13fde45">シェルを実装する</a></h3>
<div class="outline-text-3" id="text-org13fde45">
<p>
理解したいなら実装してみればよい。なので、UNIXプログラミングが理解したければ、シェルを実装すればよい。
</p>

<p>
参考。
</p>

<ul class="org-ul">
<li><a href="https://jun-networks.hatenablog.com/entry/2021/07/02/034002">シェル実装の課題を完走した - JUNのブログ</a></li>
</ul>
</div>
</div>

<div id="outline-container-org4636ec0" class="outline-3">
<h3 id="org4636ec0"><a href="#org4636ec0">静的サイトジェネレータ</a></h3>
<div class="outline-text-3" id="text-org4636ec0">
<p>
<a href="20220427215330-github_actions.html#ID-2d35ac9e-554a-4142-bba7-3c614cbfe4c4">GitHub Actions</a>でリポジトリの一覧をHTMLできれいに表示できるようにする。
</p>
</div>
</div>
<div id="outline-container-orgc85c27f" class="outline-3">
<h3 id="orgc85c27f"><a href="#orgc85c27f">関数一覧からテストを自動生成する</a></h3>
<div class="outline-text-3" id="text-orgc85c27f">
<p>
テンプレートを生成する。あるいは、一覧から選択して作成してくれると良い。
</p>
</div>
</div>
<div id="outline-container-org980d11e" class="outline-3">
<h3 id="org980d11e"><a href="#org980d11e">テストをドキュメントに変換する</a></h3>
<div class="outline-text-3" id="text-org980d11e">
<p>
<a href="20210509122633-emacs_lisp.html#ID-c7e81fac-9f8b-4538-9851-21d4ff3c2b08">Emacs Lisp</a>のテストを書いている。HTMLに変換して、デプロイしてブラウザで見られるようにしたい。
</p>
</div>
</div>
<div id="outline-container-org77b71ee" class="outline-3">
<h3 id="org77b71ee"><a href="#org77b71ee">org projectを1つのPDFにビルドする</a></h3>
<div class="outline-text-3" id="text-org77b71ee">
<p>
メモ・日記が多すぎなので、1つのPDFで閲覧できるようにする。
</p>
</div>
</div>
<div id="outline-container-org57bb983" class="outline-3">
<h3 id="org57bb983"><a href="#org57bb983">探検記</a></h3>
<div class="outline-text-3" id="text-org57bb983">
<p>
いくつかネタがあるので探検記を書く。画像を大量に使う予定だが、いい感じに表示するためにはどうしたらよいだろうか。
</p>
</div>
</div>
<div id="outline-container-org335d626" class="outline-3">
<h3 id="org335d626"><a href="#org335d626">テスト駆動のEmacs Lispチュートリアル</a></h3>
<div class="outline-text-3" id="text-org335d626">
<p>
Goのテスト駆動のやつは非常によかった。Emacs Lisp版もあるとよさそう。自分の勉強がてら。
</p>
</div>
</div>
<div id="outline-container-org1fe2b00" class="outline-3">
<h3 id="org1fe2b00"><a href="#org1fe2b00">楽しい経路探索</a></h3>
<div class="outline-text-3" id="text-org1fe2b00">
<p>
どこかで言われていたこと。地図検索で最短距離でなく、楽しさや静かさを考慮した経路探索する。それらのスコア付けは、ユーザによる2つの画像の比較によって行われる。
</p>
</div>
</div>
<div id="outline-container-org1288f57" class="outline-3">
<h3 id="org1288f57"><a href="#org1288f57">org-modeのパーサ</a></h3>
<div class="outline-text-3" id="text-org1288f57">
<p>
解析してほかの用途へ使えるようにする。すでにありそうだけど練習に。
</p>
</div>
</div>

<div id="outline-container-orgd875445" class="outline-3">
<h3 id="orgd875445"><a href="#orgd875445">意味のない中間変数検知ツール</a></h3>
<div class="outline-text-3" id="text-orgd875445">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 13: </span>例</label><pre class="src src-go">a := "aaa"
return a
</pre>
</div>

<p>
のような明らかに意味のない中間変数をコード中から探すツール。変数名を扱うから構文解析が必要か。
</p>
</div>
</div>

<div id="outline-container-org2c0e775" class="outline-3">
<h3 id="org2c0e775"><a href="#org2c0e775">いい感じの規模感のリポジトリを探すツール</a></h3>
<div class="outline-text-3" id="text-org2c0e775">
<p>
言語ごとに行数、スター数から調べる。
</p>

<p>
行数が少ないものは読みやすい。
</p>

<p>
サーバレスか<a href="20220427215330-github_actions.html#ID-2d35ac9e-554a-4142-bba7-3c614cbfe4c4">GitHub Actions</a>で定期実行して、加工して公開する。
</p>
</div>
</div>
<div id="outline-container-org624716a" class="outline-3">
<h3 id="org624716a"><a href="#org624716a">PRの統計</a></h3>
<div class="outline-text-3" id="text-org624716a">
<p>
<a href="20210926103926-github.html#ID-6b889822-21f1-4a3e-9755-e3ca52fa0bc4">GitHub</a>から生産性について取れる情報はたくさんある。
</p>

<p>
有益な指標のリスト。<a href="https://cloud.google.com/blog/ja/products/gcp/using-the-four-keys-to-measure-your-devops-performance">エリート DevOps チームであることを Four Keys プロジェクトで確認する | Google Cloud Blog</a>
</p>

<ul class="org-ul">
<li>デプロイの頻度 - 組織による正常な本番環境へのリリースの頻度</li>
<li>変更のリードタイム - commit から本番環境稼働までの所要時間</li>
<li>変更障害率 - デプロイが原因で本番環境で障害が発生する割合（%）</li>
<li>サービス復元時間 - 組織が本番環境での障害から回復するのにかかる時間</li>
</ul>
</div>
</div>

<div id="outline-container-orgbc94aae" class="outline-3">
<h3 id="orgbc94aae"><a href="#orgbc94aae"><a href="20210805005543-docker.html#ID-1658782a-d331-464b-9fd7-1f8233b8b7f8">Docker</a>の時間統計</a></h3>
<div class="outline-text-3" id="text-orgbc94aae">
<p>
ビルド時間のステージごとの統計が取れたら便利だろうな。あるいはイメージ。
</p>

<ul class="org-ul">
<li>統計情報の記録/取得</li>
<li>保存</li>
<li>表示</li>
</ul>

<p>
の2つになりそう。保存に関しては、GitHub Actionsが使えないだろうか。
</p>
</div>
</div>

<div id="outline-container-orgaff1236" class="outline-3">
<h3 id="orgaff1236"><a href="#orgaff1236">yml-sorterのWEB版</a></h3>
<div class="outline-text-3" id="text-orgaff1236">
<p>
docker-compose.ymlを並び替えたいが、ちょっと見たらweb版がない。需要ありそうだけどな。でも、docker-composeは単にソートすればいいってわけでもない。たとえばversionは一番上に書くのが普通だが、これは別にソートではない。キーワードごとで例外というか、優先度をつけなければいけなそう。
</p>

<p>
フォーマッタがありそうな。
</p>
</div>
</div>
<div id="outline-container-org275b8a3" class="outline-3">
<h3 id="org275b8a3"><a href="#org275b8a3">simple covの結果を元に、PR毎にコメントを表示する</a></h3>
<div class="outline-text-3" id="text-org275b8a3">
<p>
一般化できる方法で解きたい。
</p>
</div>
</div>
<div id="outline-container-org430e3f2" class="outline-3">
<h3 id="org430e3f2"><a href="#org430e3f2">床屋シミュレータ</a></h3>
<div class="outline-text-3" id="text-org430e3f2">
<p>
Programming <a href="20220108003324-scala.html#ID-b2f63c13-4b30-481c-9c95-8abe388254fd">Scala</a>の218ページ付近で紹介されている床屋シミュレータ。
グラフィカルにして動くのを眺めたい。
</p>
</div>
</div>
<div id="outline-container-orgb53a4c5" class="outline-3">
<h3 id="orgb53a4c5"><a href="#orgb53a4c5">orgの文書lint</a></h3>
<div class="outline-text-3" id="text-orgb53a4c5">
<p>
よい文書のための、特定の形式を満たしていることをチェックするlint。
</p>

<p>
たとえば。
</p>
<ul class="org-ul">
<li>コードブロックにはキャプションがついている</li>
<li>見出しがネストしすぎてない</li>
<li>タイトルタグがついている</li>
<li>見出しだけ(本文がなく)の項目がない</li>
<li>特定の見出しが存在すること</li>
</ul>
</div>
</div>
<div id="outline-container-org93d1f23" class="outline-3">
<h3 id="org93d1f23"><a href="#org93d1f23">simplecovのエディタ表示</a></h3>
<div class="outline-text-3" id="text-org93d1f23">
<p>
すでにいくつかのエディタでは存在する。
</p>
</div>
</div>
<div id="outline-container-orgf32eb1e" class="outline-3">
<h3 id="orgf32eb1e"><a href="#orgf32eb1e">読書ページ記録</a></h3>
<div class="outline-text-3" id="text-orgf32eb1e">
<p>
pdf.jsでページ送りするたびに、その時刻が記録されるのはどうだろう。
ちょっと楽しい感じがする。前の時間との差分も計算する。
</p>
<ul class="org-ul">
<li>1: 2021-11-13T20:21:20+09:00</li>
<li>2: 2021-11-13T20:21:34+09:00 (14)</li>
</ul>
</div>
</div>
<div id="outline-container-org4d51f37" class="outline-3">
<h3 id="org4d51f37"><a href="#org4d51f37">言語記述型のシミュレーション</a></h3>
<div class="outline-text-3" id="text-org4d51f37">
<p>
<a href="20211107110444-simutrans.html#ID-7c01d791-1479-4727-b076-280034ab6a40">Simutrans</a>を、言語記述でできないだろうか。
</p>

<p>
たとえば2つに画面がわかれていて、左側はエディタ、右側は画面が表示されている。左側でA = station(1, 2)とすると右の画面に駅が作られる。train(A, B)とするとA, Bを往復する列車が表示される。
</p>
</div>
</div>
<div id="outline-container-orgd5d09ed" class="outline-3">
<h3 id="orgd5d09ed"><a href="#orgd5d09ed">method quiz</a></h3>
<div class="outline-text-3" id="text-orgd5d09ed">
<p>
たとえばRubyのメソッド一覧から任意のものを取って表示する。
知ってるか、知らないかだけ。
ドキュメント、ソースへのリンクを飛ばす。
</p>

<p>
クラスも指定できるといいな。メソッドの開拓に使える。
</p>

<p>
ジャンルの指定とかもしてな。 <code>!</code> がついてるやつとか述語メソッドとか。
</p>
</div>
</div>
<div id="outline-container-org6d2990b" class="outline-3">
<h3 id="org6d2990b"><a href="#org6d2990b">各言語でのxmpfilter</a></h3>
<div class="outline-text-3" id="text-org6d2990b">
<p>
xmpfilterはrubyのrcodetools gemsに付属しているコード。
実行結果アノテーションをつけて、行ごとの評価結果をファイルに出力してくれるので学習に便利。
</p>
</div>
</div>
<div id="outline-container-org649f2b4" class="outline-3">
<h3 id="org649f2b4"><a href="#org649f2b4">DBゲーム</a></h3>
<div class="outline-text-3" id="text-org649f2b4">
<p>
話がデカすぎてやる気が持続するとは思わないが。
</p>

<p>
自動生成操作をするプログラムをユーザに見立てて、dbアプリを作成する。出来ていくデータを眺める。とにかく重要なのは、生身のユーザを必要としないことだ。
基本的に眺める楽しさ。
</p>

<p>
viewは一切開発せず、直にパブリックメソッドを実行するbotを仮想ユーザとして考える。何かイベントを与えると必要なことを行おうとする。経営のダッシュボードだけ可視化できるようにして、あとはルールとして実装する。あとで変更しやすいように、テキストで全管理できるDBにしたいな。
</p>
<ul class="org-ul">
<li>株</li>
<li>病院</li>
<li>レンタルビデオ</li>
<li>人間関係ネットワーク。お互いに影響を与え合う様子。</li>
</ul>

<p>
パワポケのペナントモードという考え方もできる。チームという入力を入れると、試合データが出てくる。試合やチームによって、所属する選手は変化していく。それってシミュレーションゲーム。値を自由に入れることができないシミュレーション。
うむむ、DBを使う必要はあるんだろうか。
</p>
</div>
</div>
<div id="outline-container-org867f9ca" class="outline-3">
<h3 id="org867f9ca"><a href="#org867f9ca">プログラムゲーム</a></h3>
<div class="outline-text-3" id="text-org867f9ca">
<p>
最低限の世界のルールを定めておいて、それをプログラムで解決するゲーム。
</p>

<p>
世界のルール: 物体は質量を持つ、移動には費用がかかる、その枠の中で自由にプログラムできる、というもの。本質的には、ルールセットを記述して戦うロボット的なゲームに似ている。でもそうやって具体的なひとつのケースを見るのではなくて、全体を見るところが違う。
</p>
</div>
</div>
<div id="outline-container-org67c539b" class="outline-3">
<h3 id="org67c539b"><a href="#org67c539b">サウンドノベル・web</a></h3>
<div class="outline-text-3" id="text-org67c539b">
<ul class="org-ul">
<li>markdownを拡張してサウンドノベル用の文法を作る。</li>
<li>webでmdを読み込んで表示できるようにする。</li>
</ul>
</div>
</div>
<div id="outline-container-orgebcc7cf" class="outline-3">
<h3 id="orgebcc7cf"><a href="#orgebcc7cf">バッジ出力ツール</a></h3>
<div class="outline-text-3" id="text-orgebcc7cf">
<p>
たとえばカバレッジ出力などは乱立している。
</p>
</div>
</div>
</div>
<div id="outline-container-org1dd44d0" class="outline-2">
<h2 id="org1dd44d0"><a href="#org1dd44d0">References</a></h2>
<div class="outline-text-2" id="text-org1dd44d0">
</div>
<div id="outline-container-org12b1859" class="outline-3">
<h3 id="org12b1859"><a href="#org12b1859"><a href="https://github.com/practical-tutorials/project-based-learning">practical-tutorials/project-based-learning: Curated list of project-based tutorials</a></a></h3>
<div class="outline-text-3" id="text-org12b1859">
<p>
プロジェクトベースのチュートリアル集。面白い。
</p>
</div>
</div>
</div>
<div id="outline-container-org63d73d1" class="outline-2">
<h2 id="org63d73d1"><a href="#org63d73d1">Archives</a></h2>
<div class="outline-text-2" id="text-org63d73d1">
</div>
<div id="outline-container-org82094d0" class="outline-3">
<h3 id="org82094d0"><a href="#org82094d0"><span class="done CLOSE">CLOSE</span> Textlint Web</a></h3>
<div class="outline-text-3" id="text-org82094d0">
<ul class="org-ul">
<li>もうすでにある。</li>
</ul>
</div>
</div>
<div id="outline-container-orge696ffe" class="outline-3">
<h3 id="orge696ffe"><a href="#orge696ffe"><span class="done CLOSE">CLOSE</span> テキストベースのゲーム</a></h3>
<div class="outline-text-3" id="text-orge696ffe">
<p>
<a href="20210624232811-digger.html#ID-70f249a8-f8c8-4a7e-978c-8ff04ffd09c0">digger</a>で、<a href="20210509095513-ruby.html#ID-cfd092c4-1bb2-43d3-88b1-9f647809e546">Ruby</a>を使ってやった。
</p>

<ul class="org-ul">
<li>テストしやすいためテキスト主体。</li>
<li>ローグライク</li>
<li>アドベンチャーゲーム</li>
</ul>
</div>
</div>
<div id="outline-container-orgeb45ed2" class="outline-3">
<h3 id="orgeb45ed2"><a href="#orgeb45ed2"><span class="done CLOSE">CLOSE</span> melpaクローン</a></h3>
<div class="outline-text-3" id="text-orgeb45ed2">
<p>
ruby gemsのクローンのmelpa版。すでにあった。
</p>
</div>
</div>
<div id="outline-container-orgc210db5" class="outline-3">
<h3 id="orgc210db5"><a href="#orgc210db5"><span class="done DONE">DONE</span> gemfile exporter</a></h3>
<div class="outline-text-3" id="text-orgc210db5">
<p>
絶対もうあるが、便利コマンドの練習になる。
</p>
</div>
</div>
<div id="outline-container-org14bd80a" class="outline-3">
<h3 id="org14bd80a"><a href="#org14bd80a"><span class="done DONE">DONE</span> stale-files-action</a></h3>
<div class="outline-text-3" id="text-org14bd80a">
<p>
更新のないファイルを検知して、issueを作成し、一覧コメントをつけるアクション。
</p>

<ul class="org-ul">
<li>更新のないファイル検知</li>
<li>issue作成</li>
<li>データを受け取って整形、コメント送信</li>
</ul>

<pre class="example">
- [ ] ./docs/ruby.org 2021-03-04 40days
- [ ] ./docs/python.org 2021-03-04 44days
</pre>
</div>

<div id="outline-container-org04eeef1" class="outline-4">
<h4 id="org04eeef1"><a href="#org04eeef1">変数情報</a></h4>
<div class="outline-text-4" id="text-org04eeef1">
<p>
コメントの最後で、実行した条件を表示する。
</p>
</div>
</div>
<div id="outline-container-orgb53b466" class="outline-4">
<h4 id="orgb53b466"><a href="#orgb53b466">カウント</a></h4>
<div class="outline-text-4" id="text-orgb53b466">
<p>
stale総数 / 検索対象数、 パーセント。
</p>
</div>
</div>
<div id="outline-container-orgc451656" class="outline-4">
<h4 id="orgc451656"><a href="#orgc451656">ファイル名をリンク化</a></h4>
</div>
</div>
<div id="outline-container-org8662108" class="outline-3">
<h3 id="org8662108"><a href="#org8662108"><span class="done DONE">DONE</span> git-linkを展開する拡張</a></h3>
<div class="outline-text-3" id="text-org8662108">
<p>
GitHub上でパーマリンクのコードが展開されるみたいに、リンクを評価するとコードを展開できるようにしたい。org-modeで使えれば便利だろう。
</p>
</div>
<div id="outline-container-orge6d28a5" class="outline-4">
<h4 id="orge6d28a5"><a href="#orge6d28a5">構想</a></h4>
<div class="outline-text-4" id="text-orge6d28a5">
<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">echo</span> <span class="org-string">"a"</span>
</pre>
</div>

<div class="results" id="org52ec4d9">
<p>
a
</p>

</div>

<p>
と同様に、パーマリンクを書いて、評価する。元リンクもついているので、あとで元を辿ることもできる。ただこの場合の問題点は、シンタックスハイライトを効かせるのが難しいことか。いや、resultsにも効くな。とはいえ再評価すると消えてしまうのでビミョーではある。拡張子をそのまま結果に使えばよさそうだな。
</p>

<div class="org-src-container">
<pre class="src src-gh-permalink">https://github.com/kijimaD/roam/blob/5519ac4f79470b6c33d77401bf5202c61951f8bb/20210615222732-project.org#L52
</pre>
</div>

<div class="results" id="org5f1c369">
<p>
echo &ldquo;aaaa&rdquo;
</p>

</div>

<p>
普通の関数としても使えるが、org-babelのひとつとして使うのがしっくりくるな。解決したい課題: コードを貼り付けたいけど、元の場所も示しておきたいとき。あとから参照できなくなるのもあるし、引用的にも元リンクはほしい。
</p>

<ul class="org-ul">
<li>リンク</li>
<li>コード</li>
</ul>

<p>
問題は、org-babelを使うのが正しい方法なのか、ということだ。
</p>

<ul class="org-ul">
<li>リンクと展開を別にできる</li>
<li>再評価可能</li>
</ul>
</div>
</div>
<div id="outline-container-org5f20ea3" class="outline-4">
<h4 id="org5f20ea3"><a href="#org5f20ea3">実装</a></h4>
<div class="outline-text-4" id="text-org5f20ea3">
<ul class="org-ul">
<li>リンクをパースする部分
<ul class="org-ul">
<li>サイトを入れ替えられるようにする</li>
</ul></li>
<li>取得する部分
<ul class="org-ul">
<li>サイトを入れ替えられるようにする</li>
</ul></li>
<li>描画する部分
<ul class="org-ul">
<li>すべてのサイトで共通</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgd32058c" class="outline-3">
<h3 id="orgd32058c"><a href="#orgd32058c"><span class="done DONE">DONE</span> やったことの3D/VR表示(MVP)</a></h3>
<div class="outline-text-3" id="text-orgd32058c">
<p>
何かやったことを3D表示したい。<a href="20210901104129-git.html#ID-90c6b715-9324-46ce-a354-63d09403b066">Git</a>とか組み合わせられないか。何かものの収集は、形があるのでたくさんやるほど結果が目に見えやすい。般若心経、ゴミヘビ。どこか行く系は距離で苦労が理解しやすい。
</p>

<p>
収集やかけた労力によってもっと好きになっていく循環ってある。みうらじゅんはそんな感じのことをよく言っている。
</p>

<ul class="org-ul">
<li>データ構造
<ul class="org-ul">
<li>種別
<ul class="org-ul">
<li>リポジトリ</li>
<li>Web
<ul class="org-ul">
<li>本</li>
<li>Web</li>
</ul></li>
</ul></li>
<li>URL</li>
<li>識別名</li>
</ul></li>
</ul>

<p>
とりあえず文字表示は抜きにして、立方体と色で表示する。タスク数は、roamにhttpリクエストしてgrepする…。org側でjson出力とかできたらそれを取得するようにしたい。なかなか役立つ感じがするな。
</p>

<p>
途中まで完了。タスク表示はできてない。
</p>
</div>

<div id="outline-container-org2120ba6" class="outline-4">
<h4 id="org2120ba6"><a href="#org2120ba6">org-roamのjson出力</a></h4>
<div class="outline-text-4" id="text-org2120ba6">
<p>
タスクの情報を加工しやすくする。roam以外にも対応させたいが、メインは自分使用なので管理が2重になるのは避けたい。
</p>
</div>
</div>
<div id="outline-container-org0008e52" class="outline-4">
<h4 id="org0008e52"><a href="#org0008e52">roamの各ページで表示する</a></h4>
<div class="outline-text-4" id="text-org0008e52">
<p>
各ページでjson表示できるなら、roamの各ページで、タスクモデルを表示できそう。
</p>
</div>
</div>
<div id="outline-container-org7d5792e" class="outline-4">
<h4 id="org7d5792e"><a href="#org7d5792e">マウスオーバーで情報表示</a></h4>
<div class="outline-text-4" id="text-org7d5792e">
<p>
立方体のマウスオーバーでそのタスク名とリンクを出してくれたら最高。難しそうだが、価値はある。
</p>
</div>
</div>
<div id="outline-container-org68daaa2" class="outline-4">
<h4 id="org68daaa2"><a href="#org68daaa2">入力方法の一般化</a></h4>
<div class="outline-text-4" id="text-org68daaa2">
<p>
入力方式の規定、ブラウザでタスクの入力をできるようにすれば、ほかの人も利用できる。
</p>
</div>
</div>
<div id="outline-container-org1918850" class="outline-4">
<h4 id="org1918850"><a href="#org1918850"><a href="20210831232330-typescript.html#ID-ad1527ee-63b3-4a9b-a553-10899f57c234">TypeScript</a>化</a></h4>
<div class="outline-text-4" id="text-org1918850">
<p>
整備しやすいようにする。また入門するか。
</p>
</div>
</div>
<div id="outline-container-orgf97c200" class="outline-4">
<h4 id="orgf97c200"><a href="#orgf97c200">表示方法をわかりやすくする</a></h4>
<div class="outline-text-4" id="text-orgf97c200">
<p>
今の積み重なっていく方式はベストでないように見える。ビジュアル的にもビミョーなので改善する。展示会でズラーっと並べられたゴムヘビのように、見て沸き立つものにしたい。
</p>

<p>
ベストなのはすべてのオブジェクトに画像と文字をつけることで、やったことがすべて違う形、見え方を持たせることだ。そういうのが100、200並んだのは遠くから見ても壮観だし、近くからじっくり見ることもできる。円周上に並べるのが良いのかな。
</p>
</div>
</div>
</div>
<div id="outline-container-org64ebcd2" class="outline-3">
<h3 id="org64ebcd2"><a href="#org64ebcd2"><span class="done DONE">DONE</span> github actionsライクなランナー <code>[15/15]</code></a></h3>
<div class="outline-text-3" id="text-org64ebcd2">
<p>
必要なツールがインストールされてるか、宣言的に書いて診断するツール。なかったら実行できそうな場合は自動実行させる。
</p>

<p>
yamlで書き、ローカルで実行する。別にymlでなくてよくない、という感じはする。うむむ、目的がよくわからなくなってきた。<a href="20220427215330-github_actions.html#ID-2d35ac9e-554a-4142-bba7-3c614cbfe4c4">GitHub Actions</a>のクローンを作ってみるでよくないか。面白そうだし、要件はこの上なく明確だ。
</p>

<div class="org-src-container">
<pre class="src src-yaml">jobs:
  job_a:
    description: test
    steps:
      - name: a
        run: echo hello
</pre>
</div>

<p>
実行結果が確認できる。
</p>

<pre class="example">
- job_a ✓
  - a ✓
    ログ...
  - b ✓
    ログ...
- job_b ✓
  - c skip
    ログ...
  - d ✓
    ログ...
</pre>

<p>
目標としては、<a href="20220427215330-github_actions.html#ID-2d35ac9e-554a-4142-bba7-3c614cbfe4c4">GitHub Actions</a>用のymlをそのまま実行できること。
</p>
</div>

<div id="outline-container-org23c2820" class="outline-4">
<h4 id="org23c2820"><a href="#org23c2820"><span class="done DONE">DONE</span> データ構造を定義する</a></h4>
<div class="outline-text-4" id="text-org23c2820">
<ul class="org-ul">
<li>jobs(workflow)
<ul class="org-ul">
<li>job
<ul class="org-ul">
<li>step
<ul class="org-ul">
<li>task</li>
<li>task</li>
</ul></li>
</ul></li>
<li>job
<ul class="org-ul">
<li>step
<ul class="org-ul">
<li>task</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org3db3412" class="outline-4">
<h4 id="org3db3412"><a href="#org3db3412"><span class="done DONE">DONE</span> yamlをパースする</a></h4>
<div class="outline-text-4" id="text-org3db3412">
<p>
設定ファイルをパースする。
</p>
</div>
</div>
<div id="outline-container-org6e50d04" class="outline-4">
<h4 id="org6e50d04"><a href="#org6e50d04"><span class="done DONE">DONE</span> 複数steps実行</a></h4>
<div class="outline-text-4" id="text-org6e50d04">
<p>
stepsは順次実行。
</p>
</div>
</div>
<div id="outline-container-orgadd4d1c" class="outline-4">
<h4 id="orgadd4d1c"><a href="#orgadd4d1c"><span class="done CLOSE">CLOSE</span> jobの並列処理</a></h4>
<div class="outline-text-4" id="text-orgadd4d1c">
<p>
jobは並列実行。
</p>

<ul class="org-ul">
<li>どうしよう。ranを参考にしようにも、よくわからない
<ul class="org-ul">
<li>何かのプログラミングパターンなんだ</li>
</ul></li>
<li>単にゴルーチンにすればいいような。とりあえずそれでやってみる</li>
</ul>
</div>
</div>

<div id="outline-container-org8ca97d6" class="outline-4">
<h4 id="org8ca97d6"><a href="#org8ca97d6"><span class="done DONE">DONE</span> ログを別フィールドにする</a></h4>
<div class="outline-text-4" id="text-org8ca97d6">
<p>
結果画面でjob, stepごとに一気に表示する。
</p>
</div>
</div>
<div id="outline-container-orgca50605" class="outline-4">
<h4 id="orgca50605"><a href="#orgca50605"><span class="done DONE">DONE</span> 実行結果にインデントをつける</a></h4>
<div class="outline-text-4" id="text-orgca50605">
<p>
cmd.Start()したときに自動で入ってしまうが、これにインデントをつけるにはどうしたらよいのだろう。
</p>

<p>
実行時は別のstdoutではない別のwriterに入れておいて、実行したあとにインデントをつけてstdoutに送信する。
</p>
</div>
</div>
<div id="outline-container-orgf296def" class="outline-4">
<h4 id="orgf296def"><a href="#orgf296def"><span class="done DONE">DONE</span> envキーワード追加</a></h4>
<div class="outline-text-4" id="text-orgf296def">
<p>
環境変数追加。
</p>

<p>
<a href="20220427215330-github_actions.html#ID-2d35ac9e-554a-4142-bba7-3c614cbfe4c4">GitHub Actions</a>にはworkflow, job, stepであるみたいだが、とりあえずstepだけを実装する。
</p>
</div>
</div>
<div id="outline-container-orgfc2ff58" class="outline-4">
<h4 id="orgfc2ff58"><a href="#orgfc2ff58"><span class="done DONE">DONE</span> ifキーワード追加</a></h4>
<div class="outline-text-4" id="text-orgfc2ff58">
<p>
if条件式追加。
</p>
</div>
</div>
<div id="outline-container-org3298e78" class="outline-4">
<h4 id="org3298e78"><a href="#org3298e78"><span class="done DONE">DONE</span> logを楽に保存できるようにする</a></h4>
<div class="outline-text-4" id="text-org3298e78">
<p>
dockerの実装を参考にする。
</p>

<p>
が途中経過。
</p>
</div>
</div>
<div id="outline-container-org99c4915" class="outline-4">
<h4 id="org99c4915"><a href="#org99c4915"><span class="done DONE">DONE</span> steps数表示</a></h4>
<div class="outline-text-4" id="text-org99c4915">
<p>
steps数を表示してないので追加する。
</p>
</div>
</div>
<div id="outline-container-org2f286ef" class="outline-4">
<h4 id="org2f286ef"><a href="#org2f286ef"><span class="done DONE">DONE</span> working_directory追加</a></h4>
<div class="outline-text-4" id="text-org2f286ef">
<p>
cmdは独立してるので、単にフィールドに代入するだけでできた。
</p>

<p>
working_directory追加。
</p>

<ul class="org-ul">
<li>definition追加</li>
<li>最初のディレクトリを記録</li>
<li>実行前に指定ディレクトリに移動</li>
<li>実行後に戻る</li>
</ul>
</div>
</div>

<div id="outline-container-org9189df9" class="outline-4">
<h4 id="org9189df9"><a href="#org9189df9"><span class="done DONE">DONE</span> 実行結果を表示する</a></h4>
<div class="outline-text-4" id="text-org9189df9">
<p>
並列処理するとめちゃくちゃになるので結果表示があると良い。成功、失敗、スキップあたりがあるとよさそう。
</p>
</div>
</div>
<div id="outline-container-orgb7d4157" class="outline-4">
<h4 id="orgb7d4157"><a href="#orgb7d4157"><span class="done DONE">DONE</span> 設定ファイル指定オプション</a></h4>
<div class="outline-text-4" id="text-orgb7d4157">
<p>
設定ファイルをコマンドラインオプションで指定できるようにする。また、デフォルトファイルを設定する。
</p>
</div>
</div>
<div id="outline-container-org5c13d73" class="outline-4">
<h4 id="org5c13d73"><a href="#org5c13d73"><span class="done CLOSE">CLOSE</span> 使い方のサンプルを作る</a></h4>
<div class="outline-text-4" id="text-org5c13d73">
<p>
自分で使うサンプルを示す。
</p>
</div>
</div>
<div id="outline-container-org1641726" class="outline-4">
<h4 id="org1641726"><a href="#org1641726"><span class="done DONE">DONE</span> table driven test にする</a></h4>
<div class="outline-text-4" id="text-org1641726">
<p>
テストの重複が多いので書き換える。
</p>
</div>
</div>
</div>
<div id="outline-container-orgc6d5af8" class="outline-3">
<h3 id="orgc6d5af8"><a href="#orgc6d5af8"><span class="done DONE">DONE</span> 簡単なlintを作る</a></h3>
<div class="outline-text-3" id="text-orgc6d5af8">
<p>
とりあえず識別子を判定するlint、テストをほぼコピペだけど作成した。
</p>
</div>
</div>
<div id="outline-container-org8f0652c" class="outline-3">
<h3 id="org8f0652c"><a href="#org8f0652c"><span class="done DONE">DONE</span> Golangの全カバレッジ率を表示したHTML</a></h3>
<div class="outline-text-3" id="text-org8f0652c">
<p>
すぐできた。
</p>

<p>
あると便利そう。すでにある可能性はある。
</p>
</div>
</div>
<div id="outline-container-orgd53c257" class="outline-3">
<h3 id="orgd53c257"><a href="#orgd53c257"><span class="done DONE">DONE</span> oav機能追加</a></h3>
<div class="outline-text-3" id="text-orgd53c257">
<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> 連続でテストを実行できるようにする
<ul class="org-ul">
<li>テストで再現させる</li>
<li>load doc: error converting YAML to JSON: EOF</li>
<li>一度読み込んだあとはこれが出るから、引数の値が変わっているように見える。ポインタではないけど</li>
<li>一度走らせたあと、schemafileの入るbyteが空になるのを確認</li>
<li>Readerは、一度読み込みが終わると次読み込むときは中身が空になる。状態を保持している</li>
<li>bytes.Bufferを使うようにする</li>
</ul></li>
<li class="on"><input type='checkbox' checked='checked' /> コマンドとして、パスをダンプできるようにする</li>
<li class="on"><input type='checkbox' checked='checked' /> GET以外に対応する</li>
<li class="on"><input type='checkbox' checked='checked' /> パラメータ追加に対応する</li>
<li class="on"><input type='checkbox' checked='checked' /> 出る画面をわかりやすくする</li>
</ul>
</div>
</div>
<div id="outline-container-orge02d0d8" class="outline-3">
<h3 id="orge02d0d8"><a href="#orge02d0d8"><span class="done DONE">DONE</span> プロジェクトで使う静的解析ツールを作る</a></h3>
<div class="outline-text-3" id="text-orge02d0d8">
<p>
<a href="20210911113057-go.html#ID-7cacbaa3-3995-41cf-8b72-58d6e07468b1">Go</a>では簡単にlinterが作れるようだ。
</p>

<ul class="org-ul">
<li>モックを使ったとき、明示的にtimesを呼び出していることを確かめる</li>
<li>無意味な関数コメントを検知</li>
</ul>
</div>
</div>
<div id="outline-container-org680babf" class="outline-3">
<h3 id="org680babf"><a href="#org680babf"><span class="done CLOSE">CLOSE</span> Slackで倉庫番</a></h3>
<div class="outline-text-3" id="text-org680babf">
<ul class="org-ul">
<li><a href="https://kouki.hatenadiary.com/entry/2016/07/19/005006">Slackで将棋を動かしてみる - Lento con forza</a></li>
</ul>

<p>
のように、SlackをゲームのUIとして用いることができる。
</p>
</div>
<div id="outline-container-orged68980" class="outline-4">
<h4 id="orged68980"><a href="#orged68980"><span class="done DONE">DONE</span> プレイヤーが移動できるようにする</a></h4>
<div class="outline-text-4" id="text-orged68980">
<p>
コマンドラインで移動できるようにする。壁やマップ外には移動できない。
</p>
</div>
</div>
<div id="outline-container-org1aadd82" class="outline-4">
<h4 id="org1aadd82"><a href="#org1aadd82"><span class="done DONE">DONE</span> 荷物を追加する</a></h4>
<div class="outline-text-4" id="text-org1aadd82">
<p>
配置できるようにする。
</p>
</div>
</div>
<div id="outline-container-orgdb8b7e6" class="outline-4">
<h4 id="orgdb8b7e6"><a href="#orgdb8b7e6"><span class="done DONE">DONE</span> 荷物を押せるようにする</a></h4>
<div class="outline-text-4" id="text-orgdb8b7e6">
<p>
プレイヤーが移動する方向に荷物があって、空きスペースがあるなら移動できる。
</p>

<ul class="org-ul">
<li>プレイヤーと荷物の衝突判定。</li>
<li>荷物と衝突した場合は、荷物で再度移動を試す。その方向に動けるなら、荷物とプレイヤーを動かす。荷物を動かせない場合は何もしない</li>
<li>いつのまにかプレイヤーが分身していた
<ul class="org-ul">
<li>移動後に消えてない。コピーが作られているようだ</li>
</ul></li>
<li>ポインタにしたらなぜか荷物entityがゴールentityになる</li>
<li>keyの座標と、entityの持ってる座標が一致してない</li>
</ul>
</div>
</div>

<div id="outline-container-orgb7d3fef" class="outline-4">
<h4 id="orgb7d3fef"><a href="#orgb7d3fef"><span class="done DONE">DONE</span> クリア条件を追加する</a></h4>
<div class="outline-text-4" id="text-orgb7d3fef">
<p>
すべて適当な位置に置くとクリア。
</p>
</div>
</div>
<div id="outline-container-orgb1c92d0" class="outline-4">
<h4 id="orgb1c92d0"><a href="#orgb1c92d0"><span class="done DONE">DONE</span> 地図をテキストから読み込む</a></h4>
<div class="outline-text-4" id="text-orgb1c92d0">
<p>
手作りで作って、ファイル化して複数読み込めるようにする。
</p>
</div>
</div>
<div id="outline-container-orgd6b576d" class="outline-4">
<h4 id="orgd6b576d"><a href="#orgd6b576d"><span class="done DONE">DONE</span> goalをtileに移動</a></h4>
<div class="outline-text-4" id="text-orgd6b576d">
<p>
動く可能性がないので。
</p>
</div>
</div>
<div id="outline-container-org4eadee9" class="outline-4">
<h4 id="org4eadee9"><a href="#org4eadee9"><span class="done DONE">DONE</span> 地図生成時のバリデーション</a></h4>
<div class="outline-text-4" id="text-org4eadee9">
<p>
縦横が同じサイズでないとエラーを吐くようにする。
</p>
</div>
</div>
<div id="outline-container-orgaf465fd" class="outline-4">
<h4 id="orgaf465fd"><a href="#orgaf465fd"><span class="done DONE">DONE</span> ファイル・ディレクトリの整理</a></h4>
<div class="outline-text-4" id="text-orgaf465fd">
<p>
どこにあるかわからなくなってきた。
</p>
</div>
</div>
<div id="outline-container-orgdbfac3e" class="outline-4">
<h4 id="orgdbfac3e"><a href="#orgdbfac3e"><span class="done DONE">DONE</span> 地図を自動生成できるようにする<code>[100%]</code></a></h4>
<div class="outline-text-4" id="text-orgdbfac3e">
<p>
レベルを指定して生成してくれるようにする。生成ロジックを入れ替えられるように設計する。
</p>

<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> プレーンなマップ生成</li>
<li class="on"><input type='checkbox' checked='checked' /> ランダムにゴールと荷物配置</li>
<li class="on"><input type='checkbox' checked='checked' /> ✓を定数にする</li>
<li class="on"><input type='checkbox' checked='checked' /> 壁をランダムに生成する</li>
<li class="on"><input type='checkbox' checked='checked' /> 逆に動かす関数作成</li>
<li class="on"><input type='checkbox' checked='checked' /> ランダムに動かす</li>
</ul>
</div>
</div>
<div id="outline-container-org0073336" class="outline-4">
<h4 id="org0073336"><a href="#org0073336"><span class="done DONE">DONE</span> CUIモードに組み込む</a></h4>
<div class="outline-text-4" id="text-org0073336">
<p>
ステージ生成を適用させる。
</p>
</div>
</div>
<div id="outline-container-orgcd9b3e6" class="outline-4">
<h4 id="orgcd9b3e6"><a href="#orgcd9b3e6"><span class="done DONE">DONE</span> 最初からリセット機能</a></h4>
<div class="outline-text-4" id="text-orgcd9b3e6">
<ul class="org-ul">
<li>動けなくなったら最初の位置へリセットできるようにする
<ul class="org-ul">
<li>変わらないな</li>
<li>スライスのメモリアドレスは違う</li>
<li>が、変更内容を明らかに共有しているように見える、ポインタが同じなのだろう</li>
<li>スライスEntitiesの中身はEntity構造体。構造体の中には、ポインタのフィールドもある。たとえばPosはポインタでないと移動を反映できないのでポインタにしている</li>
<li>ポインタをコピーしても、値は戻らない。向いてる先は同じ値なので</li>
<li>イテレートして手動でコピーするしかないのか</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org9035602" class="outline-4">
<h4 id="org9035602"><a href="#org9035602"><span class="done CLOSE">CLOSE</span> サーバモード</a></h4>
<div class="outline-text-4" id="text-org9035602">
<p>
echoで処理できるようにする。現在の地図と、移動方向を送信すると移動結果を返す。
</p>
</div>
</div>

<div id="outline-container-org8bebe0c" class="outline-4">
<h4 id="org8bebe0c"><a href="#org8bebe0c"><span class="done CLOSE">CLOSE</span> 統計保存</a></h4>
<div class="outline-text-4" id="text-org8bebe0c">
<p>
何かしらデータベースの機能を使う。
</p>
</div>
</div>

<div id="outline-container-org1d6ea09" class="outline-4">
<h4 id="org1d6ea09"><a href="#org1d6ea09"><span class="done CLOSE">CLOSE</span> デプロイ</a></h4>
<div class="outline-text-4" id="text-org1d6ea09">
<p>
サーバレスでどこかに上げる。
</p>
</div>
</div>
</div>
<div id="outline-container-org97a8d94" class="outline-3">
<h3 id="org97a8d94"><a href="#org97a8d94"><span class="done DONE">DONE</span> webサーバをスクラッチ実装する</a></h3>
<div class="outline-text-3" id="text-org97a8d94">
<p>
システムコールを使ってやる。
</p>

<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> 標準入出力</li>
<li class="on"><input type='checkbox' checked='checked' /> ソケットを使う</li>
</ul>
</div>
</div>
<div id="outline-container-org45a4ff4" class="outline-3">
<h3 id="org45a4ff4"><a href="#org45a4ff4"><span class="done DONE">DONE</span> 倉庫番</a></h3>
<div class="outline-text-3" id="text-org45a4ff4">
<p>
でかいのに取り組むより、これくらいがよい。
</p>
<ul class="org-ul">
<li>空間の実装方法が理解できる。</li>
</ul>
</div>
</div>
<div id="outline-container-orgbb8b171" class="outline-3">
<h3 id="orgbb8b171"><a href="#orgbb8b171"><span class="done CLOSE">CLOSE</span> 経済ゲーム</a></h3>
<div class="outline-text-3" id="text-orgbb8b171">
<p>
Practical Ruby Projectsに書いてあったやつ。経済シミュレーター。<a href="20210811223913-money.html#ID-b4f27aef-22ec-45c0-be50-810f3a0cf9bc">Money</a>の知識と絡められないか。
</p>
</div>
</div>
<div id="outline-container-org0a34ea4" class="outline-3">
<h3 id="org0a34ea4"><a href="#org0a34ea4"><span class="done DONE">DONE</span> 環境構築ツール</a></h3>
<div class="outline-text-3" id="text-org0a34ea4">
<p>
assertとインストールコマンドをセットで書いてインストールするツール。
</p>

<div class="org-src-container">
<pre class="src src-yml">- cond: "cd ~/aaa"
  run: git clone aaa.git
</pre>
</div>

<ul class="org-ul">
<li>とりあえず今のdotfileの内容をかきあげて、どんな感じにしたら便利かを探る。</li>
<li>バイナリにすれば、何もインストールされてないまっさらな状態から実行しやすい
<ul class="org-ul">
<li>もとのスクリプトはシェルだから、別にどこでも実行できるのは変わらないか</li>
</ul></li>
<li>dotfilesを埋め込めないか</li>
</ul>
</div>
</div>
<div id="outline-container-org85d0333" class="outline-3">
<h3 id="org85d0333"><a href="#org85d0333"><span class="done DONE">DONE</span> gitのタグ番号をもとにファイルを書き換えるツール</a></h3>
<div class="outline-text-3" id="text-org85d0333">
<ul class="org-ul">
<li>対象ファイルを指定できるようにする</li>
<li>.versionファイルを作成すればいいのでは、と考えた。古いバージョンはそれで特定すればよさそう</li>
</ul>
</div>
</div>
<div id="outline-container-org2bec1ae" class="outline-3">
<h3 id="org2bec1ae"><a href="#org2bec1ae"><span class="done DONE">DONE</span> Goアセンブラを出力するorg-babel</a></h3>
<div class="outline-text-3" id="text-org2bec1ae">
<p>
出力アセンブラを試すのが面倒なので簡単なのを作る。一般性はないのでMELPAには送れない。
</p>

<div class="org-src-container">
<pre class="src src-go-asm">package main
func main() {
      for i := 1; i &lt;= 10; i++ {
	      print(i)
      }
}
</pre>
</div>

<div class="results" id="orgd7390c4">
<p>
main.main STEXT size=87 args=0x0 locals=0x18 funcid=0x0 align=0x0
	0x0000 00000 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	TEXT	main.main(SB), ABIInternal, $24-0
	0x0000 00000 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	CMPQ	SP, 16(R14)
	0x0004 00004 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	PCDATA	$0, $-2
	0x0004 00004 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	JLS	80
	0x0006 00006 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	PCDATA	$0, $-1
	0x0006 00006 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	SUBQ	$24, SP
	0x000a 00010 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	MOVQ	BP, 16(SP)
	0x000f 00015 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	LEAQ	16(SP), BP
	0x0014 00020 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	FUNCDATA	$0, gclocals·g2BeySu+wFnoycgXfElmcg==(SB)
	0x0014 00020 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	FUNCDATA	$1, gclocals·g2BeySu+wFnoycgXfElmcg==(SB)
	0x0014 00020 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:3)	MOVQ	$1, main.i+8(SP)
	0x001d 00029 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:3)	JMP	31
	0x001f 00031 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:3)	CMPQ	main.i+8(SP), $10
	0x0025 00037 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:3)	JLE	41
	0x0027 00039 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:3)	JMP	70
	0x0029 00041 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:4)	PCDATA	$1, $0
	0x0029 00041 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:4)	CALL	runtime.printlock(SB)
	0x002e 00046 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:4)	MOVQ	main.i+8(SP), AX
	0x0033 00051 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:4)	CALL	runtime.printint(SB)
	0x0038 00056 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:4)	CALL	runtime.printunlock(SB)
	0x003d 00061 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:4)	JMP	63
	0x003f 00063 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:3)	INCQ	main.i+8(SP)
	0x0044 00068 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:3)	JMP	31
	0x0046 00070 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:6)	PCDATA	$1, $-1
	0x0046 00070 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:6)	MOVQ	16(SP), BP
	0x004b 00075 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:6)	ADDQ	$24, SP
	0x004f 00079 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:6)	RET
	0x0050 00080 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:6)	NOP
	0x0050 00080 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	PCDATA	$1, $-1
	0x0050 00080 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	PCDATA	$0, $-2
	0x0050 00080 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	CALL	runtime.morestack_noctxt(SB)
	0x0055 00085 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	PCDATA	$0, \(-1
	0x0055 00085 (/tmp/babel-ZDNznW/go-src-AsiWm8.go:2)	JMP	0
	0x0000 49 3b 66 10 76 4a 48 83 ec 18 48 89 6c 24 10 48  I;f.vJH...H.l\).H
	0x0010 8d 6c 24 10 48 c7 44 24 08 01 00 00 00 eb 00 48  .l$.H.D$&#x2026;&#x2026;.H
	0x0020 83 7c 24 08 0a 7e 02 eb 1d e8 00 00 00 00 48 8b  .|$..~&#x2026;&#x2026;..H.
	0x0030 44 24 08 e8 00 00 00 00 e8 00 00 00 00 eb 00 48  D$&#x2026;&#x2026;&#x2026;&#x2026;.H
	0x0040 ff 44 24 08 eb d9 48 8b 6c 24 10 48 83 c4 18 c3  .D$&#x2026;H.l$.H&#x2026;.
	0x0050 e8 00 00 00 00 eb a9                             &#x2026;&#x2026;.
	rel 42+4 t=7 runtime.printlock+0
	rel 52+4 t=7 runtime.printint+0
	rel 57+4 t=7 runtime.printunlock+0
	rel 81+4 t=7 runtime.morestack_noctxt+0
go:cuinfo.producer.main SDWARFCUINFO dupok size=0
	0x0000 2d 4e 20 2d 6c 20 72 65 67 61 62 69              -N -l regabi
go:cuinfo.packagename.main SDWARFCUINFO dupok size=0
	0x0000 6d 61 69 6e                                      main
main..inittask SNOPTRDATA size=24
	0x0000 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  &#x2026;&#x2026;&#x2026;&#x2026;&#x2026;.
	0x0010 00 00 00 00 00 00 00 00                          &#x2026;&#x2026;..
gclocals·g2BeySu+wFnoycgXfElmcg== SRODATA dupok size=8
	0x0000 01 00 00 00 00 00 00 00                          &#x2026;&#x2026;..
</p>

</div>
</div>
</div>
<div id="outline-container-orgdd59ab1" class="outline-3">
<h3 id="orgdd59ab1"><a href="#orgdd59ab1"><span class="done DONE">DONE</span> carve で取るタグが時系列順になっていない</a></h3>
<div class="outline-text-3" id="text-orgdd59ab1">
<p>
古いタグが、最新になってしまっている。直す。
</p>

<p>
軽量タグを取れてなかったためだった。
</p>
</div>
</div>
<div id="outline-container-org6c1fdea" class="outline-3">
<h3 id="org6c1fdea"><a href="#org6c1fdea"><span class="done DONE">DONE</span> tiny file managerのアップロードスクリプトを作成する</a></h3>
<div class="outline-text-3" id="text-org6c1fdea">
<p>
特殊な状況用に作る。
</p>

<ul class="org-ul">
<li>ファイル指定できるようにする
<ul class="org-ul">
<li>不要とする</li>
</ul></li>
<li class="on"><input type='checkbox' checked='checked' /> ツールのヘルプ文を作る</li>
<li class="on"><input type='checkbox' checked='checked' /> goreleaserを設定する</li>
<li>転送成功メッセージと転送先パス
<ul class="org-ul">
<li>アップロードしたあとどこに配置されるかはファイルマネージャの設定によるのでスキップ</li>
</ul></li>
<li class="on"><input type='checkbox' checked='checked' /> curlのプログレスバーをリアルタイム表示する</li>
<li class="on"><input type='checkbox' checked='checked' /> サイズがでかくても成功するかを確認する</li>
<li class="off"><input type='checkbox' /> ユーザ・パスを指定できるようにする
<ul class="org-ul">
<li>まだいらない</li>
</ul></li>
<li class="on"><input type='checkbox' checked='checked' /> クロスプラットフォームにする
<ul class="org-ul">
<li>シェルまわりがかなり違う</li>
<li>シェルを使わない形式に書き直した</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org7916527" class="outline-3">
<h3 id="org7916527"><a href="#org7916527"><span class="done DONE">DONE</span> グラフ生成</a></h3>
<div class="outline-text-3" id="text-org7916527">
<p>
さくっとグラフを作る。
</p>
</div>
</div>
<div id="outline-container-orgdfc6c3a" class="outline-3">
<h3 id="orgdfc6c3a"><a href="#orgdfc6c3a"><span class="done DONE">DONE</span> Goで何かしらWebサーバを作る</a></h3>
<div class="outline-text-3" id="text-orgdfc6c3a">
<p>
練習。
</p>
</div>
</div>
<div id="outline-container-orgadaacb1" class="outline-3">
<h3 id="orgadaacb1"><a href="#orgadaacb1"><span class="done DONE">DONE</span> openapi3filterのミドルウェアの使い方を調べる</a></h3>
<div class="outline-text-3" id="text-orgadaacb1">
<p>
openapi3filterは、Go言語のAPIサーバと<a href="20230119001157-openapi.html#ID-a833c386-3cca-49eb-969a-5af58991250d">OpenAPI</a>を連携させるライブラリ。
</p>

<ul class="org-ul">
<li><a href="https://pkg.go.dev/github.com/getkin/kin-openapi@v0.97.0/openapi3filter#example-Validator">httptest.NewServer</a></li>
</ul>

<p>
に例が書いてあるが、なぜこれで動くのかがわからない。
</p>

<ul class="org-ul">
<li>squareHanderとパスの紐付けはどこでやっている
<ul class="org-ul">
<li>紐付けはしてなかった。パスによってハンドラが分岐してなかった</li>
<li>1つのハンドラだけ</li>
</ul></li>
<li>実行テストはできたが、これをどうやってミドルウェアに組み込むか。テストするか</li>
<li>少し不器用だが、Ginに組み込めた</li>
</ul>
</div>
</div>
<div id="outline-container-org1948db2" class="outline-3">
<h3 id="org1948db2"><a href="#org1948db2"><span class="done DONE">DONE</span> 通知ビューワを作る2</a></h3>
<div class="outline-text-3" id="text-org1948db2">
<p>
electronで作る。
</p>

<p>
前回の問題点は何か。
</p>

<ul class="org-ul">
<li>iframeの制約で遷移できなかった</li>
<li>よくわからないエラーで落ちる</li>
</ul>

<p>
メモ。
</p>
<ul class="org-ul">
<li>タブを切り替えたい
<ul class="org-ul">
<li>うまくいかない</li>
<li>できた。preload.jsを読み込んでないだけだった</li>
</ul></li>
</ul>

<p>
設計。
</p>
<ul class="org-ul">
<li>フロントではタブの状態管理をする
<ul class="org-ul">
<li>UIとしては切り替えられればよい</li>
</ul></li>
<li>バックエンド
<ul class="org-ul">
<li>ソースURL(feed URLとか)をもとに、エントリURL+タイトルの取得ジョブ実行</li>
<li>サーバ</li>
<li>SQLiteとのやりとり</li>
<li>エントリテーブルを作って、そこで管理する。既読がついてないものを返す</li>
<li>エンドポイント
<ul class="org-ul">
<li>設定一覧</li>
</ul></li>
</ul></li>
</ul>

<p>
エントリのステート。
</p>
<ul class="org-ul">
<li>未取得</li>
<li>エントリ取得</li>
<li>同期ずみ
<ul class="org-ul">
<li>クライアントを起動しなおすと再度受信する</li>
<li>クライアントが取得時に排除するしかないのかな</li>
<li>クライアントが現在あるものをパラメータで送信するようにして、バックエンドはそれを含むと返さない、でよさそうか。やってることは同じだが、バックエンドから来る値をそのまま使えるほうが直感的だ</li>
</ul></li>
<li>既読</li>
<li>全体の状態管理が必要。タブボタンとウィンドウは一致しなければならない
<ul class="org-ul">
<li>react側で状態管理する</li>
<li>状態管理に対してメソッドを定義して、同時にIPC通信を実行させればよさそう</li>
</ul></li>
<li>タブボタンを削除すると対応するウィンドウが削除される</li>
<li>今はウィンドウのURLで判断して切り替えてるけど、複数ある場合はどうなるか</li>
<li>ウィンドウを開いたときに、IDを保存させる。IDを元にタイトルやURLだのにアクセスさせる
<ul class="org-ul">
<li>タイトルはタブが持ってるのでDBにはいらない可能性がある</li>
</ul></li>
<li>ステートのデータ構造はどうするか
<ul class="org-ul">
<li>ViewのID
<ul class="org-ul">
<li>URL</li>
<li>タイトル</li>
<li>は、viewから取得できるのでいらない</li>
</ul></li>
</ul></li>
<li>ipcRendererの使い方がわからない
<ul class="org-ul">
<li>preload.tsで登録して使う</li>
<li>コピペしたコードにonはすでに登録してあった</li>
</ul></li>
<li>main側のdom-readyは実行できてる
<ul class="org-ul">
<li>なのでsendはできてるように見える</li>
<li>受信が原因か、送信が原因かわからない</li>
<li>送信してるwindowを指定できてなかった。UIがあるwindowに送る必要がある</li>
</ul></li>
<li>タブを消したあとに、新しいタブを開こうとするとエラーになる。前のタブにフォーカスしようとするからか</li>
<li>取得の手順
<ul class="org-ul">
<li>「10件取得」ボタンをつくり、それを押すと最大10個のリンクを取得してくる</li>
<li>入力: 件数とすでにあるリンク一覧</li>
<li>出力: 指定件数で、すでにあるリンクを排除したリンクを返す</li>
</ul></li>
<li>フィードを書くところをファイルにするかデータベースにするか
<ul class="org-ul">
<li>ファイルだとGit管理できる。準備や説明が面倒。実装は楽</li>
<li>データベースだとブラウザでそのまま設定しやすい。UIの準備はやや面倒</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org6b56ec1" class="outline-3">
<h3 id="org6b56ec1"><a href="#org6b56ec1"><span class="done DONE">DONE</span> APIサーバ開発</a></h3>
<div class="outline-text-3" id="text-org6b56ec1">
<p>
作る。
</p>
</div>
</div>
<div id="outline-container-orgf8f366d" class="outline-3">
<h3 id="orgf8f366d"><a href="#orgf8f366d"><span class="done DONE">DONE</span> 監視ツールを試す</a></h3>
<div class="outline-text-3" id="text-orgf8f366d">
<p>
コンテナログを見やすくする。
</p>

<ul class="org-ul">
<li>Management -&gt; Kibana -&gt; DataViewでデータを追加。fluentdからうまく送信されていれば、indexの候補が表示される</li>
<li>Management -&gt; Data -&gt; Index Lifecycle Policies で削除設定を追加する。肥大化するので</li>
<li>kibanaは通知が有料だったので、途中でやめた。監視しても通知できなきゃ意味がない</li>
<li>代わりにprometheusを使うことにした</li>
</ul>
</div>
</div>
<div id="outline-container-org8e80f20" class="outline-3">
<h3 id="org8e80f20"><a href="#org8e80f20"><span class="done CLOSE">CLOSE</span> go playgroundからとってくるorg-babel</a></h3>
<div class="outline-text-3" id="text-org8e80f20">
<p>
org-babelのGoは制約が大きいので。いっそplaygroundから取ってきたほうが便利そう。
</p>

<p>
すでにそういうパッケージがあったのでそれを使う。テストが実行できないな。
</p>
</div>
</div>
<div id="outline-container-org6bbcb41" class="outline-3">
<h3 id="org6bbcb41"><a href="#org6bbcb41"><span class="done DONE">DONE</span> 遮断プロキシを設定する</a></h3>
<div class="outline-text-3" id="text-org6bbcb41">
<p>
集中したいとき遮断できるようにする。
</p>

<ul class="org-ul">
<li>今のプロキシのモード設定(priv, work, disable)
<ul class="org-ul">
<li>あまり起動設定変更しないし、いいか</li>
</ul></li>
<li class="on"><input type='checkbox' checked='checked' /> システムのプロキシ選択状況表示(オフ、オン)</li>
<li class="on"><input type='checkbox' checked='checked' /> CLIでのプロキシモード切り替え</li>
</ul>
</div>
</div>
<div id="outline-container-orgfe24c18" class="outline-3">
<h3 id="orgfe24c18"><a href="#orgfe24c18"><span class="done DONE">DONE</span> PDF管理</a></h3>
<div class="outline-text-3" id="text-orgfe24c18">
<p>
本はPDFで買うことが多い。ストレージに置いているがわけわからない。2個買ってたりする。既存ツールでいいのがないか調べる。ファイル構造じゃなくて、タグで管理したい。バージョン管理したい。
</p>

<p>
ファイルとメタデータを紐付けられればよい。
</p>

<p>
ファイル。
</p>
<pre class="example">
{ID}_{タイトル}.pdf
{ID}.toml

- 20240303T201703_ふつうのLinuxプログラミング.pdf
- 20240303T201703.toml
- 20250101T191703_コーディングを支える技術.pdf
- 20250101T191703.toml
</pre>

<ul class="org-ul">
<li>タイトルはPDF情報から取ってこれるので、コマンドでファイル名は自動生成する。IDがあるのでタイトルはかぶってもよい
<ul class="org-ul">
<li>PDFじゃないこともあるのでこれはまあいいか</li>
<li>ID以降はどうでもいい</li>
</ul></li>
<li>tomlも同時に自動生成する。タイトルなどがある</li>
</ul>

<p>
TOMlファイル。
</p>
<div class="org-src-container">
<pre class="src src-toml">[<span class="org-type">book</span>]
[<span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type">book.basic</span></span></span></span></span></span></span>]
<span class="org-variable-name">title</span> = <span class="org-string">"&#12405;&#12388;&#12358;&#12398;Linux&#12503;&#12525;&#12464;&#12521;&#12511;&#12531;&#12464;"</span>
[<span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type">book.todo</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>]
<span class="org-variable-name">name</span> = <span class="org-string">"TODO"</span>      <span class="org-comment-delimiter"># </span><span class="org-comment">TODO || WIP || DONE</span>
[[<span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type">book.tag</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>]]
<span class="org-variable-name">name</span> = <span class="org-string">"linux"</span>     <span class="org-comment-delimiter"># </span><span class="org-comment">&#29305;&#23450;&#12398;&#12479;&#12464;&#12375;&#12363;&#35377;&#23481;&#12375;&#12394;&#12356;</span>
[[<span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type"><span class="org-type">book.tag</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>]]
<span class="org-variable-name">name</span> = <span class="org-string">"container"</span> <span class="org-comment-delimiter"># </span><span class="org-comment">&#29305;&#23450;&#12398;&#12479;&#12464;&#12375;&#12363;&#35377;&#23481;&#12375;&#12394;&#12356;</span>
</pre>
</div>

<pre class="example">
[タグ選択]

本一覧 # クリックするとpdf.jsで開く
--------
- ふつうのLinuxプログラミング [Linux]
- Docker book [Linux, Container]
</pre>

<ul class="org-ul">
<li>idの変換ロジックは文字列でよいけど、ディレクトリとか絡んでくるとそれ用の型を使ったほうがいい</li>
</ul>
</div>
</div>
<div id="outline-container-org8d72859" class="outline-3">
<h3 id="org8d72859"><a href="#org8d72859"><span class="done DONE">DONE</span> ドラフトを解除するスクリプト</a></h3>
<div class="outline-text-3" id="text-org8d72859">
<p>
エントリのドラフト状態を解除するのが面倒なのでたまりがち。
</p>

<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> コメントをすべて削除する</li>
<li class="on"><input type='checkbox' checked='checked' /> タグのdraftを消す</li>
<li class="on"><input type='checkbox' checked='checked' /> リネームを実行する</li>
</ul>
</div>
</div>
<div id="outline-container-orgbd177b8" class="outline-3">
<h3 id="orgbd177b8"><a href="#orgbd177b8"><span class="done DONE">DONE</span> 本棚のタグを直す</a></h3>
<div class="outline-text-3" id="text-orgbd177b8">
<p>
現在のページ分しかタグが出ないのを直す。
</p>
</div>
</div>
<div id="outline-container-orgd61987a" class="outline-3">
<h3 id="orgd61987a"><a href="#orgd61987a"><span class="done DONE">DONE</span> PDFスライドを表示できるようにする</a></h3>
<div class="outline-text-3" id="text-orgd61987a">
<p>
<a href="https://keens.github.io/blog/2022/09/21/burogunipdfsuraidowotsuikashitahanashi/">ブログにPDFスライドを追加した話 | κeenのHappy Hacκing Blog</a>が面白そうだった。参考にして作成してみる。
</p>

<ul class="org-ul">
<li>準備はPDFへのリンクを配置しておくだけ</li>
<li>サーバを起動させる必要はなく、配置するだけでクライアント上で動作する
<ul class="org-ul">
<li>リンクリストを読み取り、HTMLを生成できればいい</li>
<li>iframeリスト</li>
</ul></li>
<li>リンク一覧ではサムネを表示する</li>
<li>スライド用PDFビューと、フルPDFビューへのボタンがある</li>
<li>スライド作成にいい感じのツールがない
<ul class="org-ul">
<li>drawio.svgのように閲覧と編集が同じファイルでできるのがベスト</li>
<li>図がメイン</li>
<li>markdownでは表現できない</li>
</ul></li>
<li>pdf.jsがぼやける。参考元と同じ設定なのに
<ul class="org-ul">
<li>ズーム率が高い設定になってただけだった&#x2026;</li>
</ul></li>
<li>CIで文字化けする
<ul class="org-ul">
<li>手元で再現できた</li>
<li>ローカルで作ったPDFを見ると、全部TakaoPGothicになっている。何を選択しても全部。</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org094480c" class="outline-3">
<h3 id="org094480c"><a href="#org094480c"><span class="done CLOSE">CLOSE</span> go packageをPlantUMLで出力する</a></h3>
<div class="outline-text-3" id="text-org094480c">
<p>
理解しやすくする。
</p>

<p>
PlantUMLでエラーになる。よくわからない。<a href="https://www.dumels.com/">Dumels</a>ではなぜかできる。まあ見やすいし、サイトで確認するでいいか、ってなった。
</p>
</div>
</div>
<div id="outline-container-orgd21a7d1" class="outline-3">
<h3 id="orgd21a7d1"><a href="#orgd21a7d1"><span class="done DONE">DONE</span> トレーディングカードジェネレータ</a></h3>
<div class="outline-text-3" id="text-orgd21a7d1">
<p>
概念をトレーディングカード化したら面白いのではないか。
</p>

<p>
<a href="https://www.readwritethink.org/classroom-resources/student-interactives/trading-card-creator">Trading Card Creator | Read Write Think</a>的なもの。ユーザが自分で作れたら最高だが、なかなかむずそうなのでとりあえず自分が使う用のものを作る。
</p>
</div>
</div>
<div id="outline-container-orgd860e5a" class="outline-3">
<h3 id="orgd860e5a"><a href="#orgd860e5a"><span class="done DONE">DONE</span> タグを自動追加するツール</a></h3>
<div class="outline-text-3" id="text-orgd860e5a">
<p>
青空文庫にノベルエンジン用のタグを追加するのが大変なので、切るツールを書く。
</p>

<ul class="org-ul">
<li>30文字以上、句点もしくは改行がなければ改ページタグを入れる</li>
<li>どうやってタグを入れるか。その場で入れるとズレてしまってややこしい
<ul class="org-ul">
<li>再構成して新しく書き込み、が綺麗だが、小説なので正規化されてない情報もありそうに見える。それらが消えてしまわないか</li>
</ul></li>
<li>チャプター以外は、すべて区別ない</li>
<li>原文に改行がある場合はタグを入れる</li>
<li>チャプターの形式はバラバラなので、人間がつけなければいけない</li>
<li>文の途中で改ページタグを入れてはならない。必ず句点の後で入れなければならない</li>
<li>字下げの後は必ず改ページタグを入れる</li>
<li>流れ
<ul class="org-ul">
<li>一度、入力をありのままトークンに変換する</li>
<li>ルールに応じてトークンを変換する</li>
</ul></li>
</ul>

<p>
カギカッコの扱い。
</p>

<ul class="org-ul">
<li>カッコはなるべく1まとめにしたい。途中で句点があっても無視したい</li>
</ul>
</div>
</div>
<div id="outline-container-orgbb015a0" class="outline-3">
<h3 id="orgbb015a0"><a href="#orgbb015a0"><span class="done DONE">DONE</span> 表示を強化する</a></h3>
<div class="outline-text-3" id="text-orgbb015a0">
<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> 章のどれくらいの位置にいるのか知りたい</li>
<li class="on"><input type='checkbox' checked='checked' /> 現在章を表示したい</li>
</ul>
</div>
</div>
<div id="outline-container-orgd91658f" class="outline-3">
<h3 id="orgd91658f"><a href="#orgd91658f"><span class="done DONE">DONE</span> ノベルゲームタグ付けで手動修正する箇所を警告するツール</a></h3>
<div class="outline-text-3" id="text-orgd91658f">
<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> 丸括弧のなかの「」は句点付けを無視したい</li>
<li class="on"><input type='checkbox' checked='checked' /> 長過ぎる行を警告する</li>
<li class="on"><input type='checkbox' checked='checked' /> 章らしい箇所を見つけてつける
<ul class="org-ul">
<li>改行、漢数字だけ、改行とあったら章とみなしてよいだろう</li>
<li>本によって異なるので、とりあえず手動で</li>
</ul></li>
<li class="on"><input type='checkbox' checked='checked' /> ナンバーサイン、米印がつくところを表示する。人が見て調整する</li>
</ul>

<pre class="example">
＃「なります」」は底本では「なります。」
</pre>
</div>
</div>
<div id="outline-container-org73c0bf2" class="outline-3">
<h3 id="org73c0bf2"><a href="#org73c0bf2"><span class="done DONE">DONE</span> 改行が保持されない</a></h3>
<div class="outline-text-3" id="text-org73c0bf2">
<p>
意図的に改行していても、そのままそこから開始されてしまう。
</p>

<pre class="example">
底本：「人間失格」新潮文庫、新潮社
　　　1952（昭和27）年10月30日発行
　　　1985（昭和60）年１月30日100刷改版
</pre>

<pre class="example">
底本：「人間失格」新潮文庫、新潮社　　　1952（昭和27）年10月30日発行　　　1985（昭和60）年１月30日100刷改版
</pre>

<ul class="org-ul">
<li>周囲にタグのない改行は無視しない、とすればよいか</li>
<li>現在、lexerに改行はあるが、それをパーサーが無視している</li>
</ul>

<pre class="example">
あああ
[p]
いいい
ううう
*head
かかか
</pre>

<ul class="org-ul">
<li>複数MsgEmitは1つずつしか実行できない</li>
<li>[r]の場合は次に進みたい</li>
<li>クリック待ち以外はイベントを消費していいわけである</li>
<li>ぐちゃぐちゃで、直しにくい</li>
<li>今は、テキストがブロックしている。意図的にページ待ちがないとブロックしないようにする
<ul class="org-ul">
<li>今はクリックしないと次に進まない</li>
<li>どこでブロックしているか</li>
</ul></li>
<li>途中で止まってしまう
<ul class="org-ul">
<li>ワーカーで止めると、Popしてチャンネルに追加したも処理されなくなるので</li>
<li>でも、Popで切るよな</li>
</ul></li>
<li>テストでWaitを呼び出すと WaitGroup is reused になる
<ul class="org-ul">
<li>sleepだと問題ない。実際に起動してみて、時間経過の動作に問題はない</li>
<li>これができないと、テストで非常に不便である。既存のテストを壊す</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<footer class="footer py-3"><div class="container"><div class="row "><div class="col-md-4"></div><div class="col-sm col-md"><nav class="navbar"><a class="nav-link text-secondary small px-0" href="./index.html">Insomnia</a><a class="nav-link text-secondary small px-0" href="./sitemap.html">Sitemap</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD/roam">Repository</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD">@kijimaD</a></nav></div><div class="col-md-4"></div></div></div></footer>
</div>
</body>
</html>
