<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2025-11-05T19:12:30Z -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kubernetes</title>
<meta name="author" content="kijimaD" />
<meta name="generator" content="Org Mode" />
<link rel='shortcut icon' type='image/x-icon' href='https://kijimad.github.io/roam/favicon.ico' /><link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css' media='print' onload='this.media="all"' /><link rel='stylesheet' href='https://kijimad.github.io/roam/css/site.css' /><link rel='stylesheet' href='https://kijimad.github.io/roam/css/code.css' /><link rel='preconnect' href='https://fonts.googleapis.com'><link rel='preconnect' href='https://fonts.gstatic.com' crossorigin><link href='https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+JP&display=swap' rel='stylesheet'>
</head>
<body>
<div id="preamble" class="status">
<div><div class="header"><div class="container"><div class="row"><div class="col-sm-12 col-md-12"><nav class="navbar navbar-light"/></div></div></div></div></div>
</div>
<div id="content" class="content">
<h1 class="title">Kubernetes</h1>
<div id="outline-container-orgff431df" class="outline-2">
<h2 id="orgff431df"><a href="#orgff431df">æ¦‚è¦</a></h2>
<div class="outline-text-2" id="text-orgff431df">
<p>
Kubernetesã¯è¤‡æ•°ã®<a href="20210805005543-docker.html#ID-1658782a-d331-464b-9fd7-1f8233b8b7f8">Docker</a>ã‚³ãƒ³ãƒ†ãƒŠã‚’é€£æºã•ã›ã‚‹ãŸã‚ã®ã‚·ã‚¹ãƒ†ãƒ ã€‚
</p>
</div>
</div>
<div id="outline-container-org5e7697f" class="outline-2">
<h2 id="org5e7697f"><a href="#org5e7697f">Memo</a></h2>
<div class="outline-text-2" id="text-org5e7697f">
</div>
<div id="outline-container-orgc0a1622" class="outline-3">
<h3 id="orgc0a1622"><a href="#orgc0a1622">å‘½ä»¤çš„ãªè¨˜è¿°ã‹ã‚‰å®£è¨€çš„ãªè¨˜è¿°ã«ç§»è¡Œã™ã‚‹</a></h3>
<div class="outline-text-3" id="text-orgc0a1622">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã§ãã‚‹</label><pre class="src src-shell">kubectl run newdemo --image=cloudnatived/demo:hello --port=8888--labels <span class="org-variable-name">app</span>=newdemo <span class="org-comment-delimiter"># </span><span class="org-comment">&#12371;&#12398;&#12424;&#12358;&#12394;&#35373;&#23450;&#12364;&#12354;&#12427;&#12392;&#12377;&#12427;
</span>kubectl get deployments newdemo -o yaml --export &gt;deployment.yaml
</pre>
</div>
<p>
ç¾åœ¨ã®è¨­å®šã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ã€ãã‚Œã‚’<a href="20210901104129-git.html#ID-90c6b715-9324-46ce-a354-63d09403b066">Git</a>ç®¡ç†ã™ã‚‹ã¨ã™ã°ã‚„ãç§»è¡Œã§ãã‚‹ã€‚
</p>
</div>
</div>
<div id="outline-container-orgb2384ec" class="outline-3">
<h3 id="orgb2384ec"><a href="#orgb2384ec">å·®åˆ†ãƒã‚§ãƒƒã‚¯</a></h3>
<div class="outline-text-3" id="text-orgb2384ec">
<div class="org-src-container">
<pre class="src src-shell">kubectl diff -f deployment.yaml
</pre>
</div>

<div class="org-src-container">
<pre class="src src-nil">-  replicas: 10
+  replicas: 5
</pre>
</div>
</div>
</div>
<div id="outline-container-org223b30f" class="outline-3">
<h3 id="org223b30f"><a href="#org223b30f">minikubeã§localhost8080ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã¨ãã®å¯¾å¿œ</a></h3>
<div class="outline-text-3" id="text-org223b30f">
<p>
kubectl runã‚’å®Ÿè¡Œã™ã‚‹ã¨å®Ÿè¡Œã§ããªã„ã¨ããŒã‚ã‚‹ã€‚
</p>
<div class="org-src-container">
<pre class="src src-nil">$ kubectl run ...
The connection to the server localhost:8080 was refused - did you specify the right host or port?
</pre>
</div>

<p>
è½ã¡ç€ã„ã¦statusã‚’ç¢ºèªã™ã‚‹ã€‚
</p>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>statusã§ç¢ºèªã™ã‚‹ã€‚å‹•ã„ã¦ãªã‹ã£ãŸ</label><pre class="src src-nil">$ kubectl status

minikube
type: Control Plane
host: Stopped
kubelet: Stopped
apiserver: Stopped
kubeconfig: Stopped
</pre>
</div>

<p>
å˜ã«å‹•ã„ã¦ãªã„ã“ã¨ãŒã‚ã‹ã£ãŸã®ã§ã€èµ·å‹•ã™ã‚‹ã€‚
</p>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>èµ·å‹•ã™ã‚‹</label><pre class="src src-shell">$ minikube start
</pre>
</div>

<p>
å†åº¦kubectl runã™ã‚‹ã€‚
</p>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>ç„¡äº‹podãŒä½œæˆã•ã‚Œã‚‹</label><pre class="src src-shell">$ kubectl run ...
pod/demo created
</pre>
</div>
</div>
</div>
<div id="outline-container-org83a7c29" class="outline-3">
<h3 id="org83a7c29"><a href="#org83a7c29">kubectlã§contextã‚’ç¢ºèªã™ã‚‹</a></h3>
<div class="outline-text-3" id="text-org83a7c29">
<p>
kubectlãŒã€ã©ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ã„ã‚‹ã‹ç¢ºèªã§ãã‚‹ã€‚
</p>
<div class="org-src-container">
<pre class="src src-shell">kubectl config current-context
</pre>
</div>

<div class="results" id="orgde0bf20">
<p>
minikube
</p>

</div>

<p>
ã“ã‚Œã¯ã€minikubeã€ã¤ã¾ã‚Šãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®contextã«ã„ã¦ã€Kubernetesã¨ã®é€šä¿¡ã®contextã«ã¯ãªã£ã¦ã„ãªã„ã“ã¨ã‚’ç¤ºã™ã€‚
</p>
</div>
</div>
<div id="outline-container-org354a933" class="outline-3">
<h3 id="org354a933"><a href="#org354a933">åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰é¡</a></h3>
<div class="outline-text-3" id="text-org354a933">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>èµ·å‹•ã—ã¦ã„ã‚‹IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’èª¿ã¹ã‚‹</label><pre class="src src-shell">minikube ip
</pre>
</div>

<div class="results" id="orgf736f6f">
<p>
172.17.0.2
</p>

</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>èµ·å‹•çŠ¶æ³ç¢ºèª</label><pre class="src src-shell">minikube dashboard
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>ä½œã£ãŸPod(postgres)ã‚’ç¢ºèª</label><pre class="src src-shell">kubectl describe deployment postgres
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 8: </span>podsã®æƒ…å ±ç¢ºèª</label><pre class="src src-shell">kubectl get Pods
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 9: </span>èµ·å‹•ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹ãã€‚webappã¯ã‚µãƒ¼ãƒ“ã‚¹å</label><pre class="src src-shell">minikube service webapp
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 10: </span>è©³ç´°æƒ…å ±</label><pre class="src src-shell">kubectl describe service webapp
</pre>
</div>

<div class="results" id="orgaf8cd7a">
<p>
Name:                     webapp
Namespace:                default
Labels:                   app=webapp
Annotations:              &lt;none&gt;
Selector:                 app=webapp,tier=frontend
Type:                     NodePort
IP Family Policy:         SingleStack
IP Families:              IPv4
IP:                       10.109.7.196
IPs:                      10.109.7.196
Port:                     &lt;unset&gt;  80/TCP
TargetPort:               80/TCP
NodePort:                 &lt;unset&gt;  30020/TCP
Endpoints:                172.18.0.6:80,172.18.0.7:80,172.18.0.8:80
Session Affinity:         None
External Traffic Policy:  Cluster
Events:                   &lt;none&gt;
</p>

</div>

<p>
ãƒã‚§ãƒƒã‚¯ã—ãŸIPã‚¢ãƒ‰ãƒ¬ã‚¹ã«postã—ã¦ã¿ã¦ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«å€¤ã‚’ä¿å­˜ãƒ»ç™»éŒ²ã§ãã‚‹ã®ã‚’ç¢ºèªã™ã‚‹ã€‚
</p>
</div>
</div>
<div id="outline-container-orgc61493a" class="outline-3">
<h3 id="orgc61493a"><a href="#orgc61493a">minikubeã§è©¦ã™</a></h3>
<div class="outline-text-3" id="text-orgc61493a">
<p>
Kubernetesã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ã‹ã™ã“ã¨ã¯é›£ã—ã„ã®ã§ã€ä»£æ›¿æ‰‹æ®µãŒå¿…è¦ã€‚
minikubeã«ã‚ˆã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§è©¦ã—ãŸã‚Šã€é–‹ç™ºã«ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã€‚
</p>

<p>
<a href="https://github.com/kubernetes/minikube">kubernetes/minikube: Run Kubernetes locally</a>
</p>

<p>
å°å…¥æ‰‹é †ã€‚
<a href="https://minikube.sigs.k8s.io/docs/start/">minikube start | minikube</a>
</p>

<p>
kubectlã‚‚å‹•ã‹ã™ãŸã‚ã«å¿…è¦ã€‚
<a href="https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/#install-kubectl-binary-with-curl-on-linux">Install and Set Up kubectl on Linux | Kubernetes</a>
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 11: </span>å®Ÿè¡Œ</label><pre class="src src-shell">minikube start
</pre>
</div>

<blockquote>
<p>
ğŸ„  Done! kubectl is now configured to use &ldquo;minikube&rdquo; cluster and &ldquo;default&rdquo; namespace by default
</p>
</blockquote>

<p>
AWSä¸Šã§å‹•ã‹ã™ãŸã‚ã«ã¯ã¾ãŸåˆ¥ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã€‚
</p>
<div class="org-src-container">
<pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">KUBERNETES_PROVIDER</span>=aws; curl -sS https://get.k8s.io | bash
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc40ef9d" class="outline-2">
<h2 id="orgc40ef9d"><a href="#orgc40ef9d">Tasks</a></h2>
<div class="outline-text-2" id="text-orgc40ef9d">
</div>
<div id="outline-container-org0a3d8da" class="outline-3">
<h3 id="org0a3d8da"><a href="#org0a3d8da"><span class="todo TODO">TODO</span> <a href="https://www.amazon.co.jp/Kubernetes%E5%AE%8C%E5%85%A8%E3%82%AC%E3%82%A4%E3%83%89-%E7%AC%AC2%E7%89%88-Top-Gear-%E9%9D%92%E5%B1%B1/dp/4295009792">Kuberneteså®Œå…¨ã‚¬ã‚¤ãƒ‰ ç¬¬2ç‰ˆ (Top Gear) | é’å±± çœŸä¹Ÿ |æœ¬ | é€šè²© | Amazon</a></a></h3>
<div class="outline-text-3" id="text-org0a3d8da">
<p>
æœ¬ã€‚
</p>
</div>
</div>
<div id="outline-container-orgc01f3e9" class="outline-3">
<h3 id="orgc01f3e9"><a href="#orgc01f3e9"><span class="todo TODO">TODO</span> <a href="https://tech.drecom.co.jp/migrate-rails-app-to-container/">å¤ãè‰¯ãRailsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã—ã¦Kubernetesä¸Šã§å‹•ã‹ã™ - Tech Inside Drecom</a></a></h3>
</div>
</div>
<div id="outline-container-org0b0f2ab" class="outline-2">
<h2 id="org0b0f2ab"><a href="#org0b0f2ab">Reference</a></h2>
<div class="outline-text-2" id="text-org0b0f2ab">
</div>
<div id="outline-container-org98f02b8" class="outline-3">
<h3 id="org98f02b8"><a href="#org98f02b8"><a href="https://github.com/kelseyhightower/kubernetes-the-hard-way">kelseyhightower/kubernetes-the-hard-way: Bootstrap Kubernetes the hard way on Google Cloud Platform. No scripts.</a></a></h3>
<div class="outline-text-3" id="text-org98f02b8">
<p>
kubernetesã®ä»•çµ„ã¿ã‹ã‚‰å­¦ã¶ã€‚
</p>
</div>
</div>
<div id="outline-container-org5f0b35e" class="outline-3">
<h3 id="org5f0b35e"><a href="#org5f0b35e"><a href="https://kubernetes.io/ja/docs/home/">Kubernetesãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | Kubernetes</a></a></h3>
<div class="outline-text-3" id="text-org5f0b35e">
<p>
å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€‚
</p>
</div>
</div>
<div id="outline-container-org808f566" class="outline-3">
<h3 id="org808f566"><a href="#org808f566"><a href="https://ja.wikipedia.org/wiki/Kubernetes">Kubernetes - Wikipedia</a></a></h3>
</div>
</div>
<div id="outline-container-org6ee4b04" class="outline-2">
<h2 id="org6ee4b04"><a href="#org6ee4b04">Archives</a></h2>
<div class="outline-text-2" id="text-org6ee4b04">
</div>
<div id="outline-container-org66e592c" class="outline-3">
<h3 id="org66e592c"><a href="#org66e592c"><span class="done DONE">DONE</span> <a href="https://www.oreilly.co.jp/books/9784873119014/">O&rsquo;Reilly Japan - Kubernetesã§å®Ÿè·µã™ã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–DevOps</a></a></h3>
<div class="outline-text-3" id="text-org66e592c">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 12: </span>èª¬æ˜ã«ä½¿ã†ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚’cloneã™ã‚‹</label><pre class="src src-shell">git clone git://github.com/cloudnativedevops/demo.git
</pre>
</div>

<p>
ãƒãƒãƒ¼ã‚¸ãƒ‰kubernetesãŒçµ¶å¯¾ã«ã„ã„ã€‚å·®åˆ¥åŒ–ã«ã¤ãªãŒã‚‰ãªã„é¢å€’ãªä½œæ¥­ã¯ã€ã‚¢ã‚¦ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã™ã‚‹ã¹ãã€‚
ãƒªã‚½ãƒ¼ã‚¹ã‚’è§£æ”¾ã—ã¦ã‚³ã‚¢ãƒ“ã‚¸ãƒã‚¹ã¸æŠ•å…¥ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã‹ã‚‰ã€‚
</p>

<p>
ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ã€Œãªãœã‹ã€ã¨ã„ã†ç–‘å•ã®è§£æ±ºã«å½¹ç«‹ã¤ã€‚å‹•ä½œã—ã¦ã„ã‚‹/ã—ã¦ãªã„ã®å˜ç´”ãªåˆ¤æ–­ã‚’è¶…ãˆã¦ã€ç›£è¦–ã®æ–°ã—ã„æ¬¡å…ƒã‚’åˆ‡ã‚Šé–‹ãã€‚ã‚¹ãƒ”ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚¿ã‚„æ¸©åº¦è¨ˆã®ã‚ˆã†ã«ã€ç¾åœ¨ã®çŠ¶æ³ã«é–¢ã™ã‚‹æ•°å€¤æƒ…å ±ã‚’ä¸ãˆã‚‹ã€‚
ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯ã€å†…éƒ¨ã‹ã‚‰ç›£è¦–ã™ã‚‹ã€‚å¾“æ¥ã®ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç›£è¦–ã¨ç•°ãªã‚‹ã€‚
</p>

<p>
ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä¸é€æ˜ã§ã‚ã‚‹ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢è‡ªä½“ã‚’æ¸¬å®šã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã€ä½•ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã‹ã«ã¤ã„ã¦äººé–“ãŒæ¨è«–ã§ãã‚‹ã‚ˆã†æƒ…å ±ã‚’ç”Ÿæˆã•ã›ã‚‹ã“ã¨ãŒå¿…è¦ã€‚
</p>

<p>
4å¤§ã‚·ã‚°ãƒŠãƒ«ã€‚
</p>

<ul class="org-ul">
<li>ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</li>
<li>ã‚¨ãƒ©ãƒ¼</li>
<li>æŒç¶šæœŸé–“</li>
<li>é£½å’Œåº¦</li>
</ul>

<p>
<a href="https://github.com/prometheus/prometheus">prometheus/prometheus: The Prometheus monitoring system and time series database.</a> OSSã®ç›£è¦–ãƒ„ãƒ¼ãƒ«ã€‚
</p>

<p>
ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ã®ä¸–ç•Œã§ã¯ã€é©åˆ‡ãªãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ãƒ‡ãƒ¼ã‚¿ãŒãªã‘ã‚Œã°ã€ç¾åœ¨ã®çŠ¶æ³ã‚’çš„ç¢ºã«æŠŠæ¡ã™ã‚‹ã®ã¯æ¥µã‚ã¦é›£ã—ããªã‚‹ã€‚
</p>

<p>
<a href="https://kubernetespodcast.com/">Kubernetes Podcast from Google</a> kubernetesã®ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã€‚
</p>
</div>
</div>
</div>
<div id="outline-container-orge9730cf" class="outline-2">
<h2 id="orge9730cf"><a href="#orge9730cf">Backlinks</a></h2>
<div class="outline-text-2" id="text-orge9730cf">
<ul class="org-ul">
<li><a href="./20220126105030-deploy.html">deploy</a></li>
<li><a href="./20240427T010358--kdoc-139-ã€googleã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã€__book.html">KDOC 139: ã€Googleã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã€</a></li>
<li><a href="./20240605T103458--kdoc-184-ã€ã‚¤ãƒ©ã‚¹ãƒˆã§ã‚ã‹ã‚‹dockerã¨kubernetesã€__book.html">KDOC 184: ã€ã‚¤ãƒ©ã‚¹ãƒˆã§ã‚ã‹ã‚‹Dockerã¨Kubernetesã€</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<footer class="footer py-3"><div class="container"><div class="row "><div class="col-md-4"></div><div class="col-sm col-md"><nav class="navbar"><a class="nav-link text-secondary small px-0" href="./index.html">Insomnia</a><a class="nav-link text-secondary small px-0" href="./sitemap.html">Sitemap</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD/roam">Repository</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD">@kijimaD</a></nav></div><div class="col-md-4"></div></div></div></footer>
</div>
</body>
</html>
