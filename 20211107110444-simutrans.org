:PROPERTIES:
:ID:       7c01d791-1479-4727-b076-280034ab6a40
:END:
#+title: Simutrans
* 概要
Simutransはフリーの交通シミュレーション[[id:8b79aef9-1073-4788-9e81-68cc63e4f997][game]]である。シミュレーションの中で、現実の輸送の効率性について考えることができる。

上京して鉄道に慣れてからプレイしたところ、より深みを感じられた。現実世界の鉄道に関する一般的な知識を、ゲームで応用できる面白さがある。線路を引くだけでなくて、どう運行させるかについても、現実世界と同じアプローチを用いることができる。

たとえば。

- 行き先(折返し運転)
- 快速、特急などの運転種別
- 区間ごとの混雑率
- 乗り換え

について、体感として知っているだけでも、効率的な路線運用について知っていることになる。

* Memo
** 空きがあるのに運んでくれないとき
増発して乗せられる旅客に空きがあるのに、乗せてくれないときがある。旅客にも、受け入れの制限がある。貨物ではすぐ気づくのだが、旅客では気づきにくい。無駄に増発して大赤字、大混雑になっていることがある。駅があふれていると、その駅を目的地とする旅客は運べない。乗り換えが多いと管理する手間が増えるので、なるべく少ない乗り換えで行けるようにするのがよい。

また、マップで常に全体の混雑率を見ると便利。1つ溢れだすと、連鎖してほかの駅も溢れて直すのが大変になるので、1つが警告カラーになったら、すぐ対応する。

直すときは、どこがボトルネックになっているのか調べる。溢れた駅でもっとも多い旅客の目的地を見て、どうしてそうなったかを考える。多くの場合は密度の高い区間に折返し運転を追加するとかする。増発だけしても、あまりうまくいかない。状況によってはデッドロックになっていて、増発しても解決しないことがある。2つの駅が、お互いを目的地とする旅客で満杯になっているときなど。そのときはホームや駅施設を追加して、駅の最大容量を増やして、運べる容量を確保するとよい。
** ネットワーク効果
順当にプレイしていると、路線が増えるにつれて旅客が増え、都市の成長速度は早まっていく。早送りせずともみるみる成長するようになる(そして混雑が激しくなる...)。これは行ける地点が増えていくためだ。新たにできた駅は、その路線だけをいけるのではない。これまで作った路線を乗り継いで目的地に行ける。

もし、早送りしないとゲームが進まなくて退屈だとしたら、おそらく路線数が足りない。作りまくらないといけない。実際の政府や鉄道会社の動きを参考にしよう。まず〜本線で、日本全国をくまなくつなげた。利益というより、東京駅から日本全国に行けることを優先にした。その本線を元に枝分かれさせたり、バイパスした。あるいは目をつけた商売人が私鉄を作って中距離〜短距離を担うようになった。すでにできているネットワークを使って、さらに利便性を追加することで利益を上げられまでになった。便利さが便利さ、利益が利益を生んでいった。そうやって東京はできた。

地方が車中心社会なのは、単純に鉄道がないからで、ネットワーク効果が薄いから当然だ。
** 折返し運転
路線の中で混み具合は、均一ではない。人口が多かったり繁華街がある区間では増えるが、過ぎると減っていく。路線の混雑率を改善したいという場合、正確には特定の区間の最大の込み具合を改善したいということだ。一律に増便しても、もともと空いてる区間もよりガラガラになるので、無駄になる。

そこで、折返し運転を設定して最後まで行かないことで、特定の区間だけの運行を増やすということをする。

** マイ設定ファイル
[[https://japanese.simutrans.com/index.php?%C0%DF%C4%EA%A5%D5%A5%A1%A5%A4%A5%EB%2F%B9%E2%C5%D9%A4%CA%C0%DF%C4%EA][設定ファイル/高度な設定 - Simutrans日本語化･解説]]

- starting_money
  - スタート時の所持金。すぐに足りなくなるので100倍ほど増やす
- crossconnect_factories = 1
  - すべての産業施設を関連づける
- factory_maximum_intransit_percentage = 0
  - 輸送中の貨物量による制限をしない
- industry_increase_every = 5000
  - 産業チェーンを追加する都市の人口、倍々で8回まで有効。2000だと早く増えすぎなので5000に上げる
- tourist_percentage = 50
  - 旅客が観光地を目的とする割合。面白いので上げる
- passenger_multiplier=80
- goods_multiplier=80
- growthfactor_villages=200
- growthfactor_cities=100
- growthfactor_capitals=50
- station_coverage = 2
  - 駅の範囲を増やして楽にする
- maintenance_building = 20
- cost_multiply_station = 60
- max_rail_convoi_length = 250
- max_road_convoi_length = 250
- max_ship_convoi_length = 250
- max_air_convoi_length = 250
** 現実の都市から学ぶ
毎回奥ゆきのない単純な、いかにも人工的なマップになってしまう、という悩み。どうしたら、すごい人が作るような、見るだけでワクワクするようなマップを再現できるのだろう。似たようなことはシムシティにもある。

ヒントは現実世界にある。現実世界では物理的制約を抱えているために、すべてに理由がある。線路にカーブがあるのは、歴史的、地形上の理由があるためだ。そういうものが積み重なって、風景に奥行きがあるように見える[fn:1]。

[fn:1]現実だから奥行きがあるのは当然でない。地方都市、郊外の住宅街、ショッピングセンターのように現実でも薄っぺらい印象を与える風景は多い。

たとえば、東京の御茶ノ水駅あたりはわかりやすい。

- 渓谷のようになった神田川ぎりぎりにある
- 道路やほかの建物より低い位置にある
- 美しい聖橋のほぼ真下にある
- 3線が交差する

わかりやすく謎要素が多いので気づきやすい。調べると歴史的理由があって、興味深い。都市の持つ歴史、複雑性、奥行きとはこういうことなのだと教えてくれる。ゲームでも同様で、時系列を元にした蓋然性のある設定(妄想ともいう)ができれば、奥行きが生まれるだろう。
** シミュレーションゲームを楽しむコツ
現実の事象について深く知っていてロールプレイ(妄想)できると、シミュレーションを100％味わうことができる。
実際の鉄道や路線、交通、都市について知らないと、ゲームのやり方やルールを学んでもあまりピンとこない。
ゲーム的にはたくさん旅客を集めてお金を稼げばいいわけだが、しばらくすると毎回ピンとこない感じになる。

同じ例。
シムシティの退屈な街並み。碁盤の目で整然とした道路に、同じ形をした高層ビルが何本も立っている。実際にこういう都市は存在しない。魅力がなく、何回プレイしても同じような都市になるので、次第に飽きる。
Minecraftでの、豆腐建築。建物が単に同じ素材で作られた立方体になっている。こういった建築物は存在しない。やはり魅力や印象はなく、建築は単なる作業になる。

自由度の高いゲームでは、何が現実らしく見せているかを知っているとより楽しめる。鉄道においては…。

- どのような事業会社があるか
- どのように路線が形成されているか(産業、人口分布、地形)
- どのような運行形態があるか(普通、急行、特急、折返し、乗り入れ)

とか。例をあげる。

路線は最初に国鉄を考える。国鉄は利益というより要地を結ぶことを目的にする公共事業である。路線は長大で、区間によって乗車率は大きく異なる。都市近郊では乗車率が高いが都市の中間では過疎地域もある。そこで限られた駅にしか停車しない急行や特急運行の概念が生まれる。都市圏内では各駅停車、定員の多い通勤用車両を使用し、都市間では高速な急行車両を使用する。

国鉄のカバーした路線を元に、各社私鉄が国鉄の路線から派生したり、より高速に結ぶ路線を作る。会社は沿線の不動産開発をしていたり、元は貨物輸送だったり、多様なバックグラウンドがある。旅客需要が多くなるにつれ、貨物線を旅客に転用したりもする。より大きな旅客を誘引するため、会社間で直通運転をするようになる。さらに発展すると、距離のある都市内交通の需要が高まり、かつ地上への建設困難なため地下鉄を建設する。建設費用は莫大で公的性格が強いので、都市が主体となって路線計画を立てる。

会社や組織のバックグラウンドを考えることで鉄道だけでなくて、別の交通についても考えることができる。効率的に捌くことだけを考えていると、出来上がるものは現実とは似つかないものになる。複雑度のない、表面的なものはうすっぺらくて魅力がない。

Minecraftも同様に考えてみる。多くの美しい建築物を知っていればよさそうだが、それだけでない。↓といった背景を考えることで、街や建物の形が決まってくる。

- 住んでいる人
- 文化
- 気候。距離は近くても高度や海との距離によって異なる
- 産業。産業が有利だった点
- 歴史。なぜ人が集まったか、発展したか
- 交通
- 資源。どういう資源が比較的安く手に入るか
- 食文化。何を食べているか、飲水はどこで入手しているか
- 境界。類似な文化圏はどこまでか、何によって阻まれているか
- プレイヤー。政府、商人、軍事、農民。

背景を無視した、形だけ真似たようなものは、現実にもよくある。日本中どこにでもある幹線道路沿いのロードサイド店が醜く見えるのは、背景がなく、だだっ広い場所にただ存在するからだ。
* Tasks
* クローン実装
** 特徴

- キーボード指向の操作
- シンプルなルールから生み出される複雑な結果、多様性のあるプレイスタイル
- 再現性のあるシミュレート

** 仕様

- ゲーム空間には住居、会社、観光地がある
  - 住居から旅客が発生する
- 旅客は目的地を持つ
  - 会社、観光地は目的地となる
  - 旅客は目的地へたどり着くための旅程を1つ持っている
  - 旅客はパラメータとして資金を持っている
    - 資金があると特急に乗り、そうでないと鈍行に乗る
  - 旅程を決める要素には料金・時間がある
    - 遠近分離を成立させるためのルール
- プレイヤーは特徴の異なる複数の会社を選択できる。1つの会社だけを使うこともできるし、複数社で開発することもできる
  - 国鉄は資金力が豊富だが、運賃ボーナスが安く利益が出にくい。遠距離路線を開通させないと補助金を受け取ることができない
    - 遠距離向け
  - 大手私鉄は国鉄ほどの資金力がない。運賃ボーナスがやや高め。都市開発によって街自体の成長を促せる
    - 中・近距離向け
    - 拠点地に近いとボーナスがかかる
  - 公営地下鉄は資金力が豊富だが、地下鉄しか建設できない
    - 近距離向け
  - 第3セクターは資金力がもっとももない

* Reference
** [[https://arx.neorail.jp/][A列車で理数探究：DATT-A9D【PS4・Windows両対応】]]
なんだかすごいサイト。
研究的視点から、シミュレーターとしてA列車を用いる。
* Archives
