:properties:
:ID: 20241102T084716
:mtime:    20241104115309
:ctime:    20241102104613
:end:
#+title:      KDOC 258: 『ピアリング戦記』
#+date:       [2024-11-02 Sat 08:47]
#+filetags:   :draft:book:
#+identifier: 20241102T084716

# (denote-rename-file-using-front-matter (buffer-file-name) 0)
# (save-excursion (while (re-search-backward ":draft" nil t) (replace-match "")))
# (flush-lines "^\\#\s.+?")

# ====ポリシー。
# 1ファイル1アイデア。
# 1ファイルで内容を完結させる。
# 常にほかのエントリとリンクする。
# 自分の言葉を使う。
# 参考文献を残しておく。
# 文献メモの場合は、感想と混ぜないこと。1つのアイデアに反する
# ツェッテルカステンの議論に寄与するか
# 頭のなかやツェッテルカステンにある問いとどのようにかかわっているか
# エントリ間の接続を発見したら、接続エントリを追加する。カード間にあるリンクの関係を説明するカード。
# アイデアがまとまったらアウトラインエントリを作成する。リンクをまとめたエントリ。
# エントリを削除しない。古いカードのどこが悪いかを説明する新しいカードへのリンクを追加する。
# 恐れずにカードを追加する。無意味の可能性があっても追加しておくことが重要。

# ====永久保存メモのルール。
# 自分の言葉で書く。
# 後から読み返して理解できる。
# 他のメモと関連付ける。
# ひとつのメモにひとつのことだけを書く。
# メモの内容は1枚で完結させる。
# 論文の中に組み込み、公表できるレベルである。

# ====価値があるか。
# その情報がどういった文脈で使えるか。
# どの程度重要な情報か。
# そのページのどこが本当に必要な部分なのか。

* この文書のステータス
:LOGBOOK:
CLOCK: [2024-11-04 Mon 11:27]--[2024-11-04 Mon 11:53] =>  0:26
CLOCK: [2024-11-04 Mon 11:02]--[2024-11-04 Mon 11:27] =>  0:25
CLOCK: [2024-11-04 Mon 10:27]--[2024-11-04 Mon 10:52] =>  0:25
CLOCK: [2024-11-04 Mon 00:05]--[2024-11-04 Mon 00:30] =>  0:25
CLOCK: [2024-11-03 Sun 23:28]--[2024-11-03 Sun 23:53] =>  0:25
CLOCK: [2024-11-03 Sun 22:23]--[2024-11-03 Sun 22:48] =>  0:25
CLOCK: [2024-11-03 Sun 21:56]--[2024-11-03 Sun 22:21] =>  0:25
CLOCK: [2024-11-03 Sun 21:28]--[2024-11-03 Sun 21:53] =>  0:25
CLOCK: [2024-11-03 Sun 20:42]--[2024-11-03 Sun 21:07] =>  0:25
CLOCK: [2024-11-02 Sat 10:20]--[2024-11-02 Sat 10:45] =>  0:25
CLOCK: [2024-11-02 Sat 09:50]--[2024-11-02 Sat 10:15] =>  0:25
:END:
- 作成
  - [X] 2024-11-04 貴島
- レビュー
  - [ ] <署名>
# (progn (kill-line -1) (insert (format "  - [X] %s 貴島" (format-time-string "%Y-%m-%d"))))

# 関連をつけた。
# タイトルがフォーマット通りにつけられている。
# 内容をブラウザに表示して読んだ(作成とレビューのチェックは同時にしない)。
# 文脈なく読めるのを確認した。
# おばあちゃんに説明できる。
# いらない見出しを削除した。
# タグを適切にした。
# すべてのコメントを削除した。
* 概要
# 本文(タイトルをつける)。
[[https://www.lambdanote.com/products/peering][『ピアリング戦記 ― 日本のインターネットを繋ぐ技術者たち』]]はインターネットを実現するネットワーク技術を解説した本。

* メモ

- BGPで接続するということは、お互いのBGPルータがピアになるということであり、ASとして互いに「隣のネットワーク」になるということ。お互いにピアとなったBGPルータは経路情報を交換する。経路情報をAS同士で教え合うためのプロトコルがBGPである(p8)
- ASの接続方式、トランジットとピアリングの説明。BGPという同じプロトコルを使った接続方式の違い。どの方式を使うかは力関係で決まる
- BGPルータ同士をピアにするときは、基本的に両方のBGPルータを同一のL2セグメントに配備する必要がある(p26)
  - 「L2セグメント」は、宛先IPアドレスへルータを越えずにパケットを送れる範囲
  - 一般に同じL2セグメントに属する機器は物理的に同じ場所に置く
- データセンターの価値は「サーバを置くための設備」という面だけでなく、そこで誰と繋がれるか、つまり入居している他の事業者によっても決まる(p27)
  - IX、ISP、電気通信事業者、大手のコンテンツ企業
  - 地価が高いのに東京リージョンがある理由
- 東日本大震災で、東京に繋がる多くの海底ケーブルが切れた。それを契機に大阪にも分散させるようになった(p32)
- 堂島問題。大阪の堂島にはNTTの4つのビルに通信の拠点が集まっている。4つのビルは同じ敷地内にも関わらず、別々のビルに入っている事業者間で相互に接続が難しかった。そのために煩雑な迂回路が要求されていた(p37)
- BGPメッセージをやり取りするためのTCPセッションは、それぞれのBGPルータ間で個別に張る必要がある。BGPのピアを結ぶかどうかはIXに接続している他の組織との合意が必要になる。IXは単に場を提供しているだけ(p42)
- DNSのルートサーバは13個しかない。DNSにおけるUDPのパケット長の上限が512バイトであることからくる制約(p57)
- ピアリング情報を[[https://www.peeringdb.com/][PeeringDB]]で得られる
- イベントのメリットは「会って話をしたことがある」という人を増やすことにある。一度でも会ったことがある人とない人とでは、メールの返信率が圧倒的に違ったりする(p103)
- ユーザを最寄りのキャッシュサーバに誘導する手段としては、DNSの名前解決の結果をユーザごとに変えるのが一般的である(p111)
- グループ間取引で特別に安くすると税金逃れの可能性として税務署に目をつけられる。そのため安くなったりはしない(p120)

* 章まとめ

1. 基本的な用語とピアリングの力関係の説明
2. データセンターで重視されること。立地や分散の傾向の変遷e
3. 各IXにインタビュー
4. ピアリングコミュニティ
5. インタビューからコンテンツ事業者の台頭を見る

* 用語集

- AS :: BGPによるルーティングで繋がり合っている個々独立したネットワーク。Autonomous System
- BGP :: インターネット上でのデータ転送に最適なネットワークルートを決定する一連のルールです
  - [[https://aws.amazon.com/jp/what-is/border-gateway-protocol/][BGP とは? - ネットワークにおけるボーダーゲートウェイプロトコルの説明 - AWS]]

* 関連
# 関連するエントリ。なぜ関連させたか理由を書く。意味のあるつながりを意識的につくる。
# この事実は自分のこのアイデアとどう整合するか。
# この現象はあの理論でどう説明できるか。
# ふたつのアイデアは互いに矛盾するか、互いを補っているか。
# いま聞いた内容は以前に聞いたことがなかったか。
# メモ y についてメモ x はどういう意味か。
なし。
