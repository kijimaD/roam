#+title:      hyperline
#+date:       [2023-09-09 Sat 20:48]
#+filetags:   :hack:
#+identifier: 20230909T204817

* hyperline
** この文書のステータス
- [ ] 作成中
** 概要
都市シミュレーションを作成する。
** 導入
都市と交通に着目したゲームを作る。
* Tasks
** TODO バス停を作る
:LOGBOOK:
CLOCK: [2023-09-10 Sun 20:36]--[2023-09-10 Sun 21:01] =>  0:25
CLOCK: [2023-09-10 Sun 17:59]--[2023-09-10 Sun 18:24] =>  0:25
CLOCK: [2023-09-10 Sun 17:23]--[2023-09-10 Sun 17:48] =>  0:25
:END:

とりあえず画像は後回しにして、追加してみる。

- バス停は道路の上にしか作れない
- 名前を持っている
- 下の道路を透過する

** TODO ebitenUIを使う
オレオレUIだからあまり綺麗じゃない。
** TODO セルの大きさを統一する
:LOGBOOK:
CLOCK: [2023-09-10 Sun 19:29]--[2023-09-10 Sun 19:54] =>  0:25
:END:
今はスナップの精度が違うのでずれる。同じように建設してもずれる。

- 道路を4マスから1マスにした。自分で建てる建物は1マスでいいだろう。
** TODO つながっているを表現する(平面)
- 毎回道路に走るたびに乗り物に計算させてつながっているかは判定させればよさそう。つながっているかはベースの座標によって変わるので。
- 経路探索ライブラリがあるので、そんなに難しくない可能性がある
** TODO オブジェクトを道路上に走らせる

つながっている道路だけ走れる。
** TODO 高さについて考える
どうすればいいのか見当もつかない。
** TODO つながっているを表現する(立体)
異なる高さの道路は接続できない。スロープでしかつながらない。
** TODO 道路の方向を自動決定する
設置したときに周囲8マスの状態に応じて画像を変化させる。横にあれば曲がるアイコンになるだろう。
* 参考
参考になりそうなリンクを書いておく。

タイルマップパーサ。
[[https://github.com/lafriks/go-tiled][lafriks/go-tiled: Go library to parse Tiled map editor file format (TMX) and render map to image]]

都市ゲーム。
[[https://code.rocket9labs.com/tslocum/citylimits][tslocum/citylimits: City-building simulation video game - citylimits - Rocket Nine Labs]]

経路探索ライブラリ。
[[https://github.com/beefsack/go-astar][beefsack/go-astar: Go implementation of the A* search algorithm]]
* Archives
** DONE ベースを作る
CLOSED: [2023-09-10 Sun 17:58]
:LOGBOOK:
CLOCK: [2023-09-10 Sun 13:57]--[2023-09-10 Sun 14:22] =>  0:25
CLOCK: [2023-09-10 Sun 13:29]--[2023-09-10 Sun 13:54] =>  0:25
CLOCK: [2023-09-10 Sun 12:57]--[2023-09-10 Sun 13:22] =>  0:25
CLOCK: [2023-09-10 Sun 12:20]--[2023-09-10 Sun 12:45] =>  0:25
CLOCK: [2023-09-10 Sun 11:55]--[2023-09-10 Sun 12:20] =>  0:25
CLOCK: [2023-09-09 Sat 22:28]--[2023-09-09 Sat 22:53] =>  0:25
CLOCK: [2023-09-09 Sat 21:08]--[2023-09-09 Sat 21:33] =>  0:25
:END:
参考コードを元にする。不要そうなところを削除していく。

- [X] タイルセットを変えた
** DONE 道路画像を登録する
CLOSED: [2023-09-10 Sun 19:10]
:LOGBOOK:
CLOCK: [2023-09-10 Sun 18:29]--[2023-09-10 Sun 18:54] =>  0:25
:END:

- 後から追加する方法がわからない
- 描いたほうがはやそう
  - gimpで追加した
** DONE ブルドーザーアイコンが消えた
CLOSED: [2023-09-10 Sun 23:06]
:LOGBOOK:
CLOCK: [2023-09-10 Sun 20:11]--[2023-09-10 Sun 20:36] =>  0:25
:END:

タイルセットの更新を忘れていたっぽい。Tilesで保存し直したら差分が出て直った。
