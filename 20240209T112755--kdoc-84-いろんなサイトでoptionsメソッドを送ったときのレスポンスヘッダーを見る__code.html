<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2024-07-12 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>KDOC 84: いろんなサイトでOPTIONSメソッドを送ったときのレスポンスヘッダーを見る</title>
<meta name="generator" content="Org mode">
<meta name="author" content="root">
<link rel='shortcut icon' type='image/x-icon' href='/roam/favicon.ico' /><link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css' /><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css' /><link rel='stylesheet' href='../css/site.css' /><link rel='stylesheet' href='../roam/css/code.css' /><link rel='stylesheet' href='css/site.css' /><link rel='stylesheet' href='css/code.css' />
</head>
<body>
<div id="preamble" class="status">
<div><div class="header"><div class="container"><div class="row"><div class="col-sm-12 col-md-12"><nav class="navbar navbar-light"/></div></div></div></div></div>
</div>
<div id="content">
<h1 class="title">KDOC 84: いろんなサイトでOPTIONSメソッドを送ったときのレスポンスヘッダーを見る</h1>

<div id="outline-container-org24ca7c7" class="outline-2">
<h2 id="org24ca7c7"><a href="#org24ca7c7">この文書のステータス</a></h2>
<div class="outline-text-2" id="text-org24ca7c7">
<ul class="org-ul">
<li>作成
<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> 2024-02-10 貴島</li>
</ul></li>
<li>レビュー
<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> 2024-02-12 貴島</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org54cc850" class="outline-2">
<h2 id="org54cc850"><a href="#org54cc850">概要</a></h2>
<div class="outline-text-2" id="text-org54cc850">
<p>
さまざまなWebサイトのレスポンスを<a href="20240210130812-curl.html#ID-b11fb9a4-0a26-4354-bc60-6c755c256b21">curl</a>で見ているうち、微妙な違いがあること、知らないヘッダーが多いのに気づいた。適当に見たものをメモしておく。
</p>

<p>
より差異を見るために、CORSのプリフライト風のリクエストで確認した。CORSで制御しているサーバであれば、OPTIONSメソッドとAccess-Control-Request-Methodで指定したアクションを渡すと、許可状況を返す。リソースへのアクセスをCORS以外の方法で制御しているとOPTIONSメソッドを使うことはおそらくないので、OPTIONSアクション自体を許可してない場合もある。
</p>
</div>
</div>

<div id="outline-container-orgf9ef5ca" class="outline-2">
<h2 id="orgf9ef5ca"><a href="#orgf9ef5ca">見る</a></h2>
<div class="outline-text-2" id="text-orgf9ef5ca">
</div>
<div id="outline-container-org2cb54dd" class="outline-3">
<h3 id="org2cb54dd"><a href="#org2cb54dd">Google</a></h3>
<div class="outline-text-3" id="text-org2cb54dd">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Google</label><pre class="src src-shell">curl -I -H <span class="org-string">"Access-Control-Request-Method: GET"</span> -X OPTIONS https://www.google.com
</pre>
</div>

<pre class="example">
HTTP/2 405
allow: GET, HEAD
date: Sat, 10 Feb 2024 04:19:05 GMT
content-type: text/html; charset=UTF-8
server: gws
content-length: 1592
x-xss-protection: 0
x-frame-options: SAMEORIGIN
alt-svc: h3=":443"; ma=2592000,h3-29=":443"; ma=2592000

</pre>

<p>
コメント。
</p>

<ul class="org-ul">
<li>項目が少なくすっきりしている</li>
<li>HTTP/2 だ</li>
<li><a href="https://developer.mozilla.org/ja/docs/Web/HTTP/Status/405">405 Method Not Allowed - HTTP | MDN</a>。OPTIONSには対応してない</li>
<li>serverはgwsというよう。<a href="https://ja.wikipedia.org/wiki/%E3%82%B0%E3%83%BC%E3%82%B0%E3%83%AB%E3%83%BB%E3%82%A6%E3%82%A7%E3%83%96%E3%82%B5%E3%83%BC%E3%83%90">グーグル・ウェブサーバ - Wikipedia</a>。Wikipediaでもレスポンスヘッダに言及しているな。</li>
<li>charsetの値は大文字</li>
</ul>
</div>
</div>

<div id="outline-container-org899b30b" class="outline-3">
<h3 id="org899b30b"><a href="#org899b30b">YouTube</a></h3>
<div class="outline-text-3" id="text-org899b30b">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>YouTube</label><pre class="src src-shell">curl -I -H <span class="org-string">"Access-Control-Request-Method: GET"</span> -X OPTIONS https://youtube.com
</pre>
</div>

<pre class="example">
HTTP/2 405
content-type: text/html; charset=UTF-8
referrer-policy: no-referrer
content-length: 1592
date: Sat, 10 Feb 2024 04:19:01 GMT
alt-svc: h3=":443"; ma=2592000,h3-29=":443"; ma=2592000

</pre>

<p>
コメント。
</p>

<ul class="org-ul">
<li><a href="https://google.com">https://google.com</a> と共通なところがある</li>
<li>serverは設定されてない</li>
</ul>
</div>
</div>

<div id="outline-container-org9a78300" class="outline-3">
<h3 id="org9a78300"><a href="#org9a78300">Yahoo.co.jp</a></h3>
<div class="outline-text-3" id="text-org9a78300">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>Yahoo.co.jp</label><pre class="src src-shell">curl -I -H <span class="org-string">"Access-Control-Request-Method: GET"</span> -X OPTIONS https://www.yahoo.co.jp/
</pre>
</div>

<pre class="example">
HTTP/2 200
server: nginx
date: Sat, 10 Feb 2024 04:18:59 GMT
content-type: text/html; charset=utf-8
content-length: 8
allow: GET,HEAD
etag: W/"8-ZRAf8oNBS3Bjb/SU2GYZCmbtmXg"
set-cookie: B=au4d8p5isdu9j&amp;b=3&amp;s=uk; expires=Tue, 10-Feb-2026 04:18:59 GMT; path=/; domain=.yahoo.co.jp; Secure
traceresponse: 00-37df146f1bdfb51a998b43311d35e2c3-28c16e2113872761-01
vary: Accept-Encoding
x-dt-tracestate: 945f54dd-87dd099b@dt
x-vcap-request-id: 86f2560f-5ad6-4208-5edf-6bd9f55d2ed8
x-xss-protection: 1; mode=block
age: 0
accept-ch: Sec-CH-UA-Full-Version-List, Sec-CH-UA-Model, Sec-CH-UA-Platform-Version, Sec-CH-UA-Arch
permissions-policy: ch-ua-full-version-list=*, ch-ua-model=*, ch-ua-platform-version=*, ch-ua-arch=*
permissions-policy: unload=()

</pre>

<ul class="org-ul">
<li>項目が多い</li>
<li>nginx</li>
<li>charsetの値は小文字</li>
<li>HEADに対応している</li>
</ul>
</div>
</div>

<div id="outline-container-org06fde66" class="outline-3">
<h3 id="org06fde66"><a href="#org06fde66">X</a></h3>
<div class="outline-text-3" id="text-org06fde66">
<p>
<a href="https://x.com">https://x.com</a> にリクエストするとtwitter.comへリダイレクトがかかる。
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>X</label><pre class="src src-shell">curl -I -H <span class="org-string">"Access-Control-Request-Method: GET"</span> -X OPTIONS https://twitter.com
</pre>
</div>

<pre class="example">
HTTP/2 200
date: Sat, 10 Feb 2024 04:18:41 GMT
perf: 7469935968
expiry: Tue, 31 Mar 1981 05:00:00 GMT
pragma: no-cache
server: tsa_m
set-cookie: guest_id_marketing=v1%3A170753872176677350; Max-Age=63072000; Expires=Mon, 09 Feb 2026 04:18:41 GMT; Path=/; Domain=.twitter.com; Secure; SameSite=None
set-cookie: guest_id_ads=v1%3A170753872176677350; Max-Age=63072000; Expires=Mon, 09 Feb 2026 04:18:41 GMT; Path=/; Domain=.twitter.com; Secure; SameSite=None
set-cookie: personalization_id="v1_+xD3v4ygrkSbj4kwmOVewg=="; Max-Age=63072000; Expires=Mon, 09 Feb 2026 04:18:41 GMT; Path=/; Domain=.twitter.com; Secure; SameSite=None
set-cookie: guest_id=v1%3A170753872176677350; Max-Age=63072000; Expires=Mon, 09 Feb 2026 04:18:41 GMT; Path=/; Domain=.twitter.com; Secure; SameSite=None
set-cookie: ct0=; Max-Age=-1707538720; Expires=Thu, 01 Jan 1970 00:00:01 GMT; Path=/; Domain=.twitter.com; Secure; SameSite=Lax
content-type: text/html; charset=utf-8
x-powered-by: Express
cache-control: no-cache, no-store, must-revalidate, pre-check=0, post-check=0
last-modified: Sat, 10 Feb 2024 04:18:41 GMT
x-frame-options: DENY
x-transaction-id: 6411e2e240eddb17
x-xss-protection: 0
x-content-type-options: nosniff
content-security-policy: connect-src 'self' blob: https://api.x.ai https://api.x.com https://*.pscp.tv https://*.video.pscp.tv https://*.twimg.com https://api.twitter.com https://api.x.com https://api-stream.twitter.com https://api-stream.x.com https://ads-api.twitter.com https://ads-api.x.com https://aa.twitter.com https://aa.x.com https://caps.twitter.com https://caps.x.com https://pay.twitter.com https://pay.x.com https://sentry.io https://ton.twitter.com https://ton.x.com https://ton-staging.atla.twitter.com https://ton-staging.atla.x.com https://ton-staging.pdxa.twitter.com https://ton-staging.pdxa.x.com https://twitter.com https://x.com https://upload.twitter.com https://upload.x.com https://www.google-analytics.com https://accounts.google.com/gsi/status https://accounts.google.com/gsi/log https://checkoutshopper-live.adyen.com wss://*.pscp.tv https://vmap.snappytv.com https://vmapstage.snappytv.com https://vmaprel.snappytv.com https://vmap.grabyo.com https://dhdsnappytv-vh.akamaihd.net https://pdhdsnappytv-vh.akamaihd.net https://mdhdsnappytv-vh.akamaihd.net https://mdhdsnappytv-vh.akamaihd.net https://mpdhdsnappytv-vh.akamaihd.net https://mmdhdsnappytv-vh.akamaihd.net https://mdhdsnappytv-vh.akamaihd.net https://mpdhdsnappytv-vh.akamaihd.net https://mmdhdsnappytv-vh.akamaihd.net https://dwo3ckksxlb0v.cloudfront.net https://media.riffsy.com https://*.giphy.com https://media.tenor.com https://c.tenor.com https://ads-twitter.com https://analytics.twitter.com https://analytics.x.com  ; default-src 'self'; form-action 'self' https://twitter.com https://*.twitter.com https://x.com https://*.x.com; font-src 'self' https://*.twimg.com; frame-src 'self' https://twitter.com https://x.com https://mobile.twitter.com https://mobile.x.com https://pay.twitter.com https://pay.x.com https://cards-frame.twitter.com https://accounts.google.com/ https://client-api.arkoselabs.com/ https://iframe.arkoselabs.com/ https://vaultjs.apideck.com/  https://recaptcha.net/recaptcha/ https://www.google.com/recaptcha/ https://www.gstatic.com/recaptcha/; img-src 'self' blob: data: https://*.cdn.twitter.com https://*.cdn.x.com https://ton.twitter.com https://ton.x.com https://*.twimg.com https://analytics.twitter.com https://analytics.x.com https://cm.g.doubleclick.net https://www.google-analytics.com https://maps.googleapis.com https://www.periscope.tv https://www.pscp.tv https://ads-twitter.com https://ads-api.twitter.com https://ads-api.x.com https://media.riffsy.com https://*.giphy.com https://media.tenor.com https://c.tenor.com https://*.pscp.tv https://*.periscope.tv https://prod-periscope-profile.s3-us-west-2.amazonaws.com https://platform-lookaside.fbsbx.com https://scontent.xx.fbcdn.net https://scontent-sea1-1.xx.fbcdn.net https://*.googleusercontent.com https://t.co/1/i/adsct; manifest-src 'self'; media-src 'self' blob: https://twitter.com https://x.com https://*.twimg.com https://*.vine.co https://*.pscp.tv https://*.video.pscp.tv https://dhdsnappytv-vh.akamaihd.net https://pdhdsnappytv-vh.akamaihd.net https://mdhdsnappytv-vh.akamaihd.net https://mdhdsnappytv-vh.akamaihd.net https://mpdhdsnappytv-vh.akamaihd.net https://mmdhdsnappytv-vh.akamaihd.net https://mdhdsnappytv-vh.akamaihd.net https://mpdhdsnappytv-vh.akamaihd.net https://mmdhdsnappytv-vh.akamaihd.net https://dwo3ckksxlb0v.cloudfront.net; object-src 'none'; script-src 'self' 'unsafe-inline' https://*.twimg.com https://recaptcha.net/recaptcha/ https://www.google.com/recaptcha/ https://www.gstatic.com/recaptcha/ https://client-api.arkoselabs.com/ https://www.google-analytics.com https://twitter.com https://x.com https://accounts.google.com/gsi/client https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js https://static.ads-twitter.com  'nonce-Yzg1ZTA0YmEtN2ZlNi00Mzc4LWI0N2MtZWJlYTViMDgwNWMx'; style-src 'self' 'unsafe-inline' https://accounts.google.com/gsi/style https://*.twimg.com; worker-src 'self' blob:; report-uri https://twitter.com/i/csp_report?a=O5RXE%3D%3D%3D&amp;ro=false
strict-transport-security: max-age=631138519
cross-origin-opener-policy: same-origin-allow-popups
cross-origin-embedder-policy: unsafe-none
x-response-time: 119
x-connection-hash: 806661cfc51ee7c7cda80afc197b466cbbe72ae93be498085289fb353e4e7b73

</pre>

<p>
メモ。
</p>

<ul class="org-ul">
<li>インラインでいろいろなサイトのコンテンツを表示するためか、許可URLが多い</li>
<li>serverはtsa_m。不明</li>
<li>レスポンス時間を独自ヘッダーにのせている</li>
<li>x-powered-byがExpress</li>
</ul>
</div>
</div>

<div id="outline-container-org8c14828" class="outline-3">
<h3 id="org8c14828"><a href="#org8c14828">GitHub</a></h3>
<div class="outline-text-3" id="text-org8c14828">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>GitHub</label><pre class="src src-shell">curl -I -H <span class="org-string">"Access-Control-Request-Method: GET"</span> -X OPTIONS https://github.com/
</pre>
</div>

<pre class="example">
HTTP/2 404
server: GitHub.com
date: Sat, 10 Feb 2024 04:18:32 GMT
content-type: text/html; charset=utf-8
content-length: 128674
strict-transport-security: max-age=31536000; includeSubdomains; preload
x-frame-options: deny
x-content-type-options: nosniff
x-xss-protection: 0
referrer-policy: origin-when-cross-origin, strict-origin-when-cross-origin
content-security-policy: default-src 'none'; base-uri 'self'; child-src github.com/assets-cdn/worker/ gist.github.com/assets-cdn/worker/; connect-src 'self' uploads.github.com www.githubstatus.com collector.github.com raw.githubusercontent.com api.github.com github-cloud.s3.amazonaws.com github-production-repository-file-5c1aeb.s3.amazonaws.com github-production-upload-manifest-file-7fdce7.s3.amazonaws.com github-production-user-asset-6210df.s3.amazonaws.com api.githubcopilot.com objects-origin.githubusercontent.com; font-src github.githubassets.com; form-action 'self' github.com gist.github.com objects-origin.githubusercontent.com; frame-ancestors 'none'; frame-src viewscreen.githubusercontent.com notebooks.githubusercontent.com; img-src 'self' data: github.githubassets.com media.githubusercontent.com camo.githubusercontent.com identicons.github.com avatars.githubusercontent.com github-cloud.s3.amazonaws.com objects.githubusercontent.com secured-user-images.githubusercontent.com/ user-images.githubusercontent.com/ private-user-images.githubusercontent.com opengraph.githubassets.com github-production-user-asset-6210df.s3.amazonaws.com customer-stories-feed.github.com spotlights-feed.github.com objects-origin.githubusercontent.com; manifest-src 'self'; media-src github.com user-images.githubusercontent.com/ secured-user-images.githubusercontent.com/ private-user-images.githubusercontent.com github-production-user-asset-6210df.s3.amazonaws.com gist.github.com; script-src github.githubassets.com; style-src 'unsafe-inline' github.githubassets.com; upgrade-insecure-requests; worker-src github.com/assets-cdn/worker/ gist.github.com/assets-cdn/worker/
vary: Accept-Encoding, Accept, X-Requested-With
x-github-request-id: B0EE:255506:53D993:5DD90B:65C6F918

</pre>

<ul class="org-ul">
<li>404エラー</li>
<li>WebサーバはOPTIONSを受け入れている。が、少なくともルートパスでは実装はない</li>
<li>content-security-policyがたくさんある
<ul class="org-ul">
<li>gist.github.com</li>
<li>upload.github.com</li>
<li>api.githubcopilot.com</li>
<li>s3</li>
<li>&#x2026;</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgc368be9" class="outline-3">
<h3 id="orgc368be9"><a href="#orgc368be9">Amazon.com</a></h3>
<div class="outline-text-3" id="text-orgc368be9">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>Amazon.com</label><pre class="src src-shell">curl -I -H <span class="org-string">"Access-Control-Request-Method: GET"</span> -X GET https://www.amazon.com/
</pre>
</div>

<pre class="example">
HTTP/2 503
content-type: text/html
server: Server
date: Sat, 10 Feb 2024 04:18:27 GMT
x-amz-rid: GZYGAQ9G8CWDXZ7H47FW
vary: Content-Type,Accept-Encoding,User-Agent
last-modified: Tue, 30 Jan 2024 23:36:50 GMT
etag: "a6f-610323c84a880"
accept-ranges: bytes
strict-transport-security: max-age=47474747; includeSubDomains; preload
x-cache: Error from cloudfront
via: 1.1 2ae17d68ad090fea921cea9935f8b4e4.cloudfront.net (CloudFront)
x-amz-cf-pop: NRT20-C3
alt-svc: h3=":443"; ma=86400
x-amz-cf-id: wA8l7JDrCSL14_9OWmg6U1k-_8nwnSuZkItvkWVaOkCI_lKvyWJ_mQ==

</pre>

<ul class="org-ul">
<li><a href="https://developer.mozilla.org/ja/docs/Web/HTTP/Status/503">503 Service Unavailable - HTTP | MDN</a>。User-Agentがcurlだと503になるよう</li>
<li>serverはServer。適当な値っぽい。個人的には、動いているWebサーバが知れたところで運用や利用側にメリットはなく、セキュリティリスクしかないように見えるので、これがよいと考えている。が、多数派ではなさそう</li>
<li>x-amz-cf-系はCDN CloudFrontが返すヘッダー。NRT(成田)はエッジの場所を表すコード。たまたま空港コードだが、別に空港とは関係がなさそう</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>User-Agentをcurl以外にすると成功する</label><pre class="src src-shell">curl -I -A <span class="org-string">"xxxx"</span> -H <span class="org-string">"Access-Control-Request-Method: GET"</span> -X GET https://www.amazon.com/
</pre>
</div>

<pre class="example">
HTTP/2 200
content-type: text/html;charset=UTF-8
server: Server
date: Sat, 10 Feb 2024 04:18:22 GMT
x-amz-rid: YACTCQE1QM03TY6MGBWY
set-cookie: session-id=142-6963675-6615257; Domain=.amazon.com; Expires=Sun, 09-Feb-2025 04:18:22 GMT; Path=/; Secure
set-cookie: session-id-time=2082787201l; Domain=.amazon.com; Expires=Sun, 09-Feb-2025 04:18:22 GMT; Path=/; Secure
set-cookie: i18n-prefs=USD; Domain=.amazon.com; Expires=Sun, 09-Feb-2025 04:18:22 GMT; Path=/
set-cookie: sp-cdn="L5Z9:JP"; Version=1; Domain=.amazon.com; Max-Age=31536000; Expires=Sun, 09-Feb-2025 04:18:22 GMT; Path=/; Secure; HttpOnly
set-cookie: skin=noskin; path=/; domain=.amazon.com
accept-ch: ect,rtt,downlink,device-memory,sec-ch-device-memory,viewport-width,sec-ch-viewport-width,dpr,sec-ch-dpr,sec-ch-ua-platform,sec-ch-ua-platform-version
pragma: no-cache
x-xss-protection: 1;
content-security-policy: upgrade-insecure-requests;report-uri https://metrics.media-amazon.com/
content-security-policy-report-only: default-src 'self' blob: https: data: mediastream: 'unsafe-eval' 'unsafe-inline';report-uri https://metrics.media-amazon.com/
x-content-type-options: nosniff
content-language: en-US
content-encoding: gzip
expires: -1
x-ua-compatible: IE=edge
cache-control: no-cache
accept-ch-lifetime: 86400
strict-transport-security: max-age=47474747; includeSubDomains; preload
vary: Content-Type,Accept-Encoding,User-Agent
x-frame-options: SAMEORIGIN
x-cache: Miss from cloudfront
via: 1.1 33adaf636d9a8b17ab166777508ba07a.cloudfront.net (CloudFront)
x-amz-cf-pop: NRT20-C3
alt-svc: h3=":443"; ma=86400
x-amz-cf-id: 9MHMYlGivQUaXwugJ-xT0BenC2Sett1G6AxEZ8Bw0ETlZnyrv7fqtA==

</pre>

<ul class="org-ul">
<li>User-Agentがcurl以外だと成功する</li>
<li>strict-transport-securityヘッダのmax-ageは秒数。
<ul class="org-ul">
<li><a href="https://developer.mozilla.org/ja/docs/Web/HTTP/Headers/Strict-Transport-Security">Strict-Transport-Security - HTTP | MDN</a>。ウェブサイトがブラウザーに<a href="20230514223733-http.html#ID-bccb3f96-0713-4347-b293-f49d860ce145">HTTP</a>の代わりにHTTPSを用いて通信を行うよう指示するためのもの</li>
<li>max-age: 秒単位で、そのサイトに HTTPS だけで接続することをブラウザーが記憶する時間です。</li>
<li>47474747秒 = 549日11時間25分47秒</li>
<li>長い。なぜこの数値なのだろう</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgfbcb645" class="outline-3">
<h3 id="orgfbcb645"><a href="#orgfbcb645">はてな</a></h3>
<div class="outline-text-3" id="text-orgfbcb645">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 8: </span>はてな</label><pre class="src src-shell">curl -I -H <span class="org-string">"Access-Control-Request-Method: GET"</span> -X OPTIONS https://b.hatena.ne.jp/
</pre>
</div>

<pre class="example">
HTTP/2 405
content-type: text/plain
content-length: 22
date: Sat, 10 Feb 2024 04:18:18 GMT
server: nginx
x-dispatch: Boston::Web::Public#process
x-cache: Error from cloudfront
via: 1.1 f1f4afba4268f1486380be4c4394d85c.cloudfront.net (CloudFront)
x-amz-cf-pop: NRT57-P4
x-amz-cf-id: ZcohLpRTN2vylUxFhH36I5aCoud-PAM7d4N6GeNkws7vp_b9fL1dag==

</pre>

<ul class="org-ul">
<li>content-typeの値はtext/plain。あまり多くないパターン</li>
<li><a href="https://developer.mozilla.org/ja/docs/Web/HTTP/Status/405">405 Method Not Allowed - HTTP | MDN</a></li>
<li>独自リクエストヘッダーx-dispatchはボストンとなっているが、何がボストンなのだろう</li>
</ul>
</div>
</div>

<div id="outline-container-orgce28cee" class="outline-3">
<h3 id="orgce28cee"><a href="#orgce28cee">楽天</a></h3>
<div class="outline-text-3" id="text-orgce28cee">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 9: </span>楽天</label><pre class="src src-shell">curl -I -H <span class="org-string">"Access-Control-Request-Method: GET"</span> -X OPTIONS https://www.rakuten.co.jp/
</pre>
</div>

<pre class="example">
HTTP/2 200
server: Apache
pragma: no-cache
cache-control: private
x-content-type-options: nosniff
x-xss-protection: 1; mode=block
x-frame-options: DENY
content-type: text/html
date: Sat, 10 Feb 2024 04:18:11 GMT
set-cookie: Apache=ddf909d5.610ff551dbbdf; path=/; expires=Sun, 09-Feb-25 04:18:10 GMT
set-cookie: wPzd=lng%3DNA%3Acnt%3DJP; expires=Sun, 09-Feb-2025 04:18:10 GMT; path=/; domain=www.rakuten.co.jp
vary: User-Agent

</pre>

<ul class="org-ul">
<li>serverは<a href="20230410214343-apache.html#ID-280d1f99-2c9f-47f9-aa05-9e394c5a07d4">Apache</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgb4e2b48" class="outline-2">
<h2 id="orgb4e2b48"><a href="#orgb4e2b48">まとめ</a></h2>
<div class="outline-text-2" id="text-orgb4e2b48">
<ul class="org-ul">
<li>serverヘッダーはけっこう違う。Webサーバはいろいろ使われている。あるいは適当なのを入れてるパターンもある</li>
<li>微妙な表記のゆれがある。大文字小文字とか、MIMEの違いとか
<ul class="org-ul">
<li>Content-Typeはtext/htmlが多数派だった</li>
</ul></li>
<li>CloudFrontを使っているケースが多い</li>
<li>HTTP/2に対応している(AWSのロードバランサか)</li>
<li>curlを弾くケースがある</li>
</ul>
</div>
</div>

<div id="outline-container-org40b3575" class="outline-2">
<h2 id="org40b3575"><a href="#org40b3575">関連</a></h2>
<div class="outline-text-2" id="text-org40b3575">
<ul class="org-ul">
<li><a href="20240209T111023--kdoc-83-corsを確認する__code.html#ID-20240209T111023">KDOC 83: CORSを確認する方法</a>。調べている途中で色々見てみるのを思いついた</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<footer class="footer py-3"><div class="container"><div class="row "><div class="col-md-4"></div><div class="col-sm col-md"><nav class="navbar"><a class="nav-link text-secondary small px-0" href="./index.html">Insomnia</a><a class="nav-link text-secondary small px-0" href="./sitemap.html">Sitemap</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD/roam">Repository</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD">@kijimaD</a></nav></div><div class="col-md-4"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"/>
</div>
</body>
</html>
