<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2025-07-03T07:18:00Z -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KDOC 258: 『ピアリング戦記』</title>
<meta name="author" content="kijimaD" />
<meta name="generator" content="Org Mode" />
<link rel='shortcut icon' type='image/x-icon' href='https://kijimad.github.io/roam/favicon.ico' /><link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css' media='print' onload='this.media="all"' /><link rel='stylesheet' href='https://kijimad.github.io/roam/css/site.css' /><link rel='stylesheet' href='https://kijimad.github.io/roam/css/code.css' /><link rel='preconnect' href='https://fonts.googleapis.com'><link rel='preconnect' href='https://fonts.gstatic.com' crossorigin><link href='https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+JP&display=swap' rel='stylesheet'>
</head>
<body>
<div id="preamble" class="status">
<div><div class="header"><div class="container"><div class="row"><div class="col-sm-12 col-md-12"><nav class="navbar navbar-light"/></div></div></div></div></div>
</div>
<div id="content" class="content">
<h1 class="title">KDOC 258: 『ピアリング戦記』</h1>
<div id="outline-container-org7703583" class="outline-2">
<h2 id="org7703583"><a href="#org7703583">この文書のステータス</a></h2>
<div class="outline-text-2" id="text-org7703583">
<ul class="org-ul">
<li>作成
<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> 2024-11-04 貴島</li>
</ul></li>
<li>レビュー
<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> 2024-11-07 貴島</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgd1d0e61" class="outline-2">
<h2 id="orgd1d0e61"><a href="#orgd1d0e61">概要</a></h2>
<div class="outline-text-2" id="text-orgd1d0e61">
<p>
<a href="https://www.lambdanote.com/products/peering">『ピアリング戦記 ― 日本のインターネットを繋ぐ技術者たち』</a>はインターネットを実現するネットワーク技術を解説した本。
</p>
</div>
</div>
<div id="outline-container-org30fe5a1" class="outline-2">
<h2 id="org30fe5a1"><a href="#org30fe5a1">メモ</a></h2>
<div class="outline-text-2" id="text-org30fe5a1">
<ul class="org-ul">
<li>BGPで接続するということは、お互いのBGPルータがピアになるということであり、ASとして互いに「隣のネットワーク」になるということ。お互いにピアとなったBGPルータは経路情報を交換する。経路情報をAS同士で教え合うためのプロトコルがBGPである(p8)</li>
<li>ASの接続方式、トランジットとピアリングの説明。BGPという同じプロトコルを使った接続方式の違い。どの方式を使うかは力関係で決まる</li>
<li>BGPルータ同士をピアにするときは、基本的に両方のBGPルータを同一のL2セグメントに配備する必要がある(p26)
<ul class="org-ul">
<li>「L2セグメント」は、宛先IPアドレスへルータを越えずにパケットを送れる範囲</li>
<li>一般に同じL2セグメントに属する機器は物理的に同じ場所に置く</li>
</ul></li>
<li>データセンターの価値は「サーバを置くための設備」という面だけでなく、そこで誰と繋がれるか、つまり入居している他の事業者によっても決まる(p27)
<ul class="org-ul">
<li>IX、ISP、電気通信事業者、大手のコンテンツ企業</li>
<li>地価が高いのに東京リージョンがある理由</li>
</ul></li>
<li>東日本大震災で、東京に繋がる多くの海底ケーブルが切れた。それを契機に大阪にも分散させるようになった(p32)</li>
<li>堂島問題。大阪の堂島にはNTTの4つのビルに通信の拠点が集まっている。4つのビルは同じ敷地内にも関わらず、別々のビルに入っている事業者間で相互に接続が難しかった。そのために煩雑な迂回路が要求されていた(p37)</li>
<li>BGPメッセージをやり取りするためのTCPセッションは、それぞれのBGPルータ間で個別に張る必要がある。BGPのピアを結ぶかどうかはIXに接続している他の組織との合意が必要になる。IXは単に場を提供しているだけ(p42)</li>
<li>DNSのルートサーバは13個しかない。DNSにおけるUDPのパケット長の上限が512バイトであることからくる制約(p57)</li>
<li>ピアリング情報を<a href="https://www.peeringdb.com/">PeeringDB</a>で得られる</li>
<li>イベントのメリットは「会って話をしたことがある」という人を増やすことにある。一度でも会ったことがある人とない人とでは、メールの返信率が圧倒的に違ったりする(p103)</li>
<li>ユーザを最寄りのキャッシュサーバに誘導する手段としては、DNSの名前解決の結果をユーザごとに変えるのが一般的である(p111)</li>
<li>グループ間取引で特別に安くすると税金逃れの可能性として税務署に目をつけられる。そのため安くなったりはしない(p120)</li>
</ul>
</div>
</div>
<div id="outline-container-org9124f24" class="outline-2">
<h2 id="org9124f24"><a href="#org9124f24">章まとめ</a></h2>
<div class="outline-text-2" id="text-org9124f24">
<ol class="org-ol">
<li>基本的な用語とピアリングの力関係の説明</li>
<li>データセンターで重視されること。立地や分散の傾向の変遷e</li>
<li>各IXにインタビュー</li>
<li>ピアリングコミュニティ</li>
<li>インタビューからコンテンツ事業者の台頭を見る</li>
</ol>
</div>
</div>
<div id="outline-container-org66e4024" class="outline-2">
<h2 id="org66e4024"><a href="#org66e4024">用語集</a></h2>
<div class="outline-text-2" id="text-org66e4024">
<dl class="org-dl">
<dt>AS</dt><dd>BGPによるルーティングで繋がり合っている個々独立したネットワーク。Autonomous System</dd>
<dt>BGP</dt><dd>インターネット上でのデータ転送に最適なネットワークルートを決定する一連のルールです
<ul class="org-ul">
<li><a href="https://aws.amazon.com/jp/what-is/border-gateway-protocol/">BGP とは? - ネットワークにおけるボーダーゲートウェイプロトコルの説明 - AWS</a></li>
</ul></dd>
</dl>
</div>
</div>
<div id="outline-container-org30aca3d" class="outline-2">
<h2 id="org30aca3d"><a href="#org30aca3d">関連</a></h2>
<div class="outline-text-2" id="text-org30aca3d">
<p>
なし。
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<footer class="footer py-3"><div class="container"><div class="row "><div class="col-md-4"></div><div class="col-sm col-md"><nav class="navbar"><a class="nav-link text-secondary small px-0" href="./index.html">Insomnia</a><a class="nav-link text-secondary small px-0" href="./sitemap.html">Sitemap</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD/roam">Repository</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD">@kijimaD</a></nav></div><div class="col-md-4"></div></div></div></footer>
</div>
</body>
</html>
