<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2022-09-25 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Archive</title>
<meta name="generator" content="Org mode">
<meta name="author" content="root">
<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css' /><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Ultra&display=swap" rel="stylesheet"><link rel='stylesheet' href='css/site.css' /><link rel='stylesheet' href='css/code.css' />
</head>
<body>
<div id="preamble" class="status">
<div><div class="header"><div class="container"><div class="row"><div class="col-sm-12 col-md-12"><nav class="navbar navbar-light"/></div></div></div></div></div>
</div>
<div id="content">
<h1 class="title">Archive</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org8789e30">概要</a></li>
<li><a href="#org33e6899">Memo</a>
<ul>
<li><a href="#org3cf278c">Tech Nightスライド <span class="timestamp-wrapper"><span class="timestamp">&lt;2021-10-08 Fri&gt;</span></span></a>
<ul>
<li><a href="#org85dd0fd">★伝えたいこと★</a></li>
<li><a href="#orgeb1dc5d">自己紹介</a></li>
<li><a href="#org205da9f">2つの方法</a></li>
<li><a href="#orgec749bc">gem編 <code>xmpfilter</code> で実行結果を出力する方法</a></li>
<li><a href="#org60a4719">外部ツール編</a></li>
<li><a href="#orgc2bd2a7">SQLもわかりやすくなる</a></li>
<li><a href="#org0304e58">まとめ</a></li>
<li><a href="#org99888df">࿐おわり࿐</a></li>
</ul>
</li>
<li><a href="#orgacbf6b6">textlint-plugin-orgプラグイン発表用スライド <span class="timestamp-wrapper"><span class="timestamp">&lt;2021-07-02 Fri&gt;</span></span></a>
<ul>
<li><a href="#org5a33404">TextLintの説明</a></li>
<li><a href="#org3e124b5">Lintについて学ぶ</a></li>
<li><a href="#orgf8aca43">AST変換器を調べる</a></li>
<li><a href="#orga9d7e0d">テストを書く</a></li>
<li><a href="#org16381cd">まとめ</a></li>
</ul>
</li>
<li><a href="#orgf87502b">digger発表用スライド <span class="timestamp-wrapper"><span class="timestamp">&lt;2021-07-02 Fri&gt;</span></span></a>
<ul>
<li><a href="#org8a70aac">やっていること(途中)</a></li>
<li><a href="#orgc60af82">前回の反省を踏まえた要件</a></li>
<li><a href="#org883eefe">利点</a></li>
<li><a href="#org0ed1be2">まとめ</a></li>
<li><a href="#org3d0b4cf">ボツ</a></li>
<li><a href="#org9a420f7">前回の反省</a></li>
</ul>
</li>
<li><a href="#org1e8a3c9">発表</a>
<ul>
<li><a href="#orgd53d7be">Emacsパッケージ(#2)を作りました。</a></li>
<li><a href="#org9602258">作ったもの</a></li>
<li><a href="#orga380b7e">コード</a></li>
<li><a href="#org31edd51">知見</a></li>
<li><a href="#orgb66b894">ロードマップ</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org8789e30" class="outline-2">
<h2 id="org8789e30"><a href="#org8789e30">概要</a></h2>
<div class="outline-text-2" id="text-org8789e30">
<p>
単発の発表用原稿などを置く。
</p>

<p>
発表用フォントサイズセット。
</p>
</div>
</div>
<div id="outline-container-org33e6899" class="outline-2">
<h2 id="org33e6899"><a href="#org33e6899">Memo</a></h2>
<div class="outline-text-2" id="text-org33e6899">
</div>
<div id="outline-container-org3cf278c" class="outline-3">
<h3 id="org3cf278c"><a href="#org3cf278c">Tech Nightスライド <span class="timestamp-wrapper"><span class="timestamp">&lt;2021-10-08 Fri&gt;</span></span></a></h3>
<div class="outline-text-3" id="text-org3cf278c">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-timer-set-timer 5)
</pre>
</div>

<p>
発表用フォントサイズ。
</p>
</div>
<div id="outline-container-org85dd0fd" class="outline-4">
<h4 id="org85dd0fd"><a href="#org85dd0fd">★伝えたいこと★</a></h4>
<div class="outline-text-4" id="text-org85dd0fd">
<p>
コードのメモをするとき、 <b>コメント/コード/実行結果を1つにまとめる</b> とわかりやすい。
</p>

<p>
→ うまくやるための道具があります。
</p>
</div>
</div>
<div id="outline-container-orgeb1dc5d" class="outline-4">
<h4 id="orgeb1dc5d"><a href="#orgeb1dc5d">自己紹介</a></h4>
<div class="outline-text-4" id="text-orgeb1dc5d">
<blockquote>
<p>
貴島 大悟
資格スクエア プログラマー
</p>
</blockquote>

<p>
外観は <code>もう中学生</code> (吉本興業のお笑い芸人)に似ているようです。
</p>
</div>
</div>
<div id="outline-container-org205da9f" class="outline-4">
<h4 id="org205da9f"><a href="#org205da9f">2つの方法</a></h4>
<div class="outline-text-4" id="text-org205da9f">
<p>
2つの方法があります。
</p>

<ul class="org-ul">
<li>gem(ライブラリ)</li>
<li>外部ツール</li>
</ul>
</div>
</div>
<div id="outline-container-orgec749bc" class="outline-4">
<h4 id="orgec749bc"><a href="#orgec749bc">gem編 <code>xmpfilter</code> で実行結果を出力する方法</a></h4>
<div class="outline-text-4" id="text-orgec749bc">
<ul class="org-ul">
<li><a href="20210509095513-ruby.html#ID-cfd092c4-1bb2-43d3-88b1-9f647809e546">Ruby</a>には実行結果をコードに出力するgemがある</li>
<li>Ruby gem <a href="https://github.com/rcodetools/rcodetools">rcodetools/rcodetools</a> に同梱されている</li>
</ul>

<div class="org-src-container">
<pre class="src src-ruby">names = <span class="org-string">%w[aaa bbb]</span>             <span class="org-comment-delimiter"># </span><span class="org-comment">=&gt; ["aaa", "bbb"]</span>
e = names.to_enum               <span class="org-comment-delimiter"># </span><span class="org-comment">=&gt; #&lt;Enumerator: ["aaa", "bbb"]:each&gt;</span>
e.class                         <span class="org-comment-delimiter"># </span><span class="org-comment">=&gt; Enumerator</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org60a4719" class="outline-4">
<h4 id="org60a4719"><a href="#org60a4719">外部ツール編</a></h4>
<div class="outline-text-4" id="text-org60a4719">
<p>
(Markdownに読み替えても同じことができるはずです)
</p>

<ul class="org-ul">
<li>クラスが定義するインスタンスメソッドを調べる方法</li>
</ul>
<div class="org-src-container">
<pre class="src src-ruby"><span class="org-builtin">p</span> <span class="org-type">Enumerable</span>.instance_methods.sort
</pre>
</div>

<div class="results" id="org117f401">
<p>
[:all?, :any?, :chain, :chunk, :chunk_while, :collect, :collect_concat, :count, :cycle, :detect, :drop, :drop_while, :each_cons, :each_entry, :each_slice, :each_with_index, :each_with_object, :entries, :filter, :filter_map, :find, :find_all, :find_index, :first, :flat_map, :grep, :grep_v, :group_by, :include?, :inject, :lazy, :map, :max, :max_by, :member?, :min, :min_by, :minmax, :minmax_by, :none?, :one?, :partition, :reduce, :reject, :reverse_each, :select, :slice_after, :slice_before, :slice_when, :sort, :sort_by, :sum, :take, :take_while, :tally, :to_a, :to_h, :uniq, :zip]
</p>

</div>
</div>
</div>
<div id="outline-container-orgc2bd2a7" class="outline-4">
<h4 id="orgc2bd2a7"><a href="#orgc2bd2a7">SQLもわかりやすくなる</a></h4>
<div class="outline-text-4" id="text-orgc2bd2a7">
<ul class="org-ul">
<li>(とくにSQLは実行結果が出ないとコードを把握しにくい感じがします)</li>

<li><code>TO_CHAR</code> を使って日付→文字列へ変換する</li>
</ul>

<div class="org-src-container">
<pre class="src src-sql"><span class="org-keyword">SELECT</span> customer_name, customer_id, TO_CHAR(birth_day, <span class="org-string">'YYYY&#24180;MM&#26376;DD&#26085;'</span>)
<span class="org-keyword">FROM</span> customer
<span class="org-keyword">LIMIT</span> 10
</pre>
</div>

<div class="results" id="orgf739cac">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">customer_name</th>
<th scope="col" class="org-left">customer_id</th>
<th scope="col" class="org-left">to_char</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">大野 あや子</td>
<td class="org-left">CS021313000114</td>
<td class="org-left">1981年04月29日</td>
</tr>

<tr>
<td class="org-left">六角 雅彦</td>
<td class="org-left">CS037613000071</td>
<td class="org-left">1952年04月01日</td>
</tr>

<tr>
<td class="org-left">宇多田 貴美子</td>
<td class="org-left">CS031415000172</td>
<td class="org-left">1976年10月04日</td>
</tr>

<tr>
<td class="org-left">堀井 かおり</td>
<td class="org-left">CS028811000001</td>
<td class="org-left">1933年03月27日</td>
</tr>

<tr>
<td class="org-left">田崎 美紀</td>
<td class="org-left">CS001215000145</td>
<td class="org-left">1995年03月29日</td>
</tr>

<tr>
<td class="org-left">宮下 達士</td>
<td class="org-left">CS020401000016</td>
<td class="org-left">1974年09月15日</td>
</tr>

<tr>
<td class="org-left">奥野 陽子</td>
<td class="org-left">CS015414000103</td>
<td class="org-left">1977年08月09日</td>
</tr>

<tr>
<td class="org-left">釈 人志</td>
<td class="org-left">CS029403000008</td>
<td class="org-left">1973年08月17日</td>
</tr>

<tr>
<td class="org-left">松谷 米蔵</td>
<td class="org-left">CS015804000004</td>
<td class="org-left">1931年05月02日</td>
</tr>

<tr>
<td class="org-left">安斎 遥</td>
<td class="org-left">CS033513000180</td>
<td class="org-left">1962年07月11日</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="outline-container-org0304e58" class="outline-4">
<h4 id="org0304e58"><a href="#org0304e58">まとめ</a></h4>
<div class="outline-text-4" id="text-org0304e58">
<ul class="org-ul">
<li>コードのメモは文脈がなく、後から見て意味不明、ということがよくある</li>
<li><code>メモ</code> 、 <code>実行コード</code> 、 <code>実行結果</code> を同じ場所に書くとわかりやすい</li>
<li>だが普通にやるとめんどくさい</li>
<li>ツールでかんたんにできる</li>
</ul>
</div>
</div>
<div id="outline-container-org99888df" class="outline-4">
<h4 id="org99888df"><a href="#org99888df">࿐おわり࿐</a></h4>
<div class="outline-text-4" id="text-org99888df">
<p>
ご清聴ありがとうございました。
</p>
</div>
</div>
</div>
<div id="outline-container-orgacbf6b6" class="outline-3">
<h3 id="orgacbf6b6"><a href="#orgacbf6b6">textlint-plugin-orgプラグイン発表用スライド <span class="timestamp-wrapper"><span class="timestamp">&lt;2021-07-02 Fri&gt;</span></span></a></h3>
<div class="outline-text-3" id="text-orgacbf6b6">
<p>
<a href="20210511013549-textlint.html#ID-d3394774-aba5-4167-bd18-f194eb2bd9ed">TextLint</a>
<a href="https://github.com/kijimaD/textlint-plugin-org">GitHub - kijimaD/textlint-plugin-org</a>
<a href="https://github.com/textlint/textlint#supported-file-formats">GitHub - textlint/textlint</a>
</p>

<p>
textlintのプラグインを作成しました。
npmに登録＋公式のREADMEにリンクしました。
<code>npm install textlint-plugin-org</code>
</p>

<p>
orgファイル(Emacs独自のアウトライン形式)で使えるようにしました。
(orgデモ)
</p>
</div>
<div id="outline-container-org5a33404" class="outline-4">
<h4 id="org5a33404"><a href="#org5a33404">TextLintの説明</a></h4>
<div class="outline-text-4" id="text-org5a33404">
<p>
TextLintはその名の通り自然言語用のLintです。
単純な間違いや、わかりづらい言い回し、語数制限などを検知してくれます。たくさんルールがあって面白いです。
</p>

<p>
Markdownは標準、ほかにもHTMLなどは対応してます。
</p>

<p>
対応してないフォーマットの場合、たとえば見出しで <code>。</code> がないとか、コードブロックに対して検知をしてまともに使用できません。
</p>

<p>
<b>どうしても</b> orgで使いたかったので作成することにしました。
</p>
</div>
</div>
<div id="outline-container-org3e124b5" class="outline-4">
<h4 id="org3e124b5"><a href="#org3e124b5">Lintについて学ぶ</a></h4>
<div class="outline-text-4" id="text-org3e124b5">
<p>
<a href="https://azu.github.io/JavaScript-Plugin-Architecture/">https://azu.github.io/JavaScript-Plugin-Architecture/</a>
</p>

<p>
中段の動作イメージがとてもわかりやすい。
</p>

<p>
AST変換というのが重要だということがわかります。
</p>

<blockquote>
<p>
ESLintはコードをパースしてASTにして、そのASTをJavaScriptで書いたルールを使いチェックするという大まかな仕組みは分かりました。
</p>
</blockquote>

<p>
textlint-plugin-org/test/OrgProcessor-test.ts
テストから実際にASTオブジェクトの中身を見てみます。
</p>
<div class="org-src-container">
<pre class="src src-javascript">    it(<span class="org-string">'heading should Header'</span>, () =&gt; {
      <span class="org-keyword">const</span> <span class="org-variable-name">result</span> = parse(<span class="org-string">`</span>
<span class="org-string">** Heading</span>
<span class="org-string">      `</span>);
      <span class="org-keyword">const</span> <span class="org-variable-name">section</span> = result.children[0];
      <span class="org-keyword">const</span> <span class="org-variable-name">header</span> = section.children[0];
      assert.equal(header.type, Syntax.headline);
    });
</pre>
</div>

<p>
<code>console.log(section)</code> ↓
</p>
<div class="org-src-container">
<pre class="src src-javascript">{
    type: <span class="org-string">'UNKNOWN'</span>,
    level: 2,
    properties: {},
    children: [
        {
            type: <span class="org-string">'Header'</span>,
            actionable: <span class="org-constant">false</span>,
            content: <span class="org-string">'Heading'</span>,
            children: [Array],
            level: 2,
            loc: [Object],
            range: [Array],
            raw: <span class="org-string">'** Heading\n'</span>
        },
        type: <span class="org-string">'UNKNOWN'</span>
    ],
    loc: { start: { line: 2, column: 0 }, end: { line: 3, column: 0 } },
    range: [ 1, 12 ],
    raw: <span class="org-string">'** Heading\n'</span>
}
</pre>
</div>

<p>
<code>console.log(header)</code> ↓
</p>
<div class="org-src-container">
<pre class="src src-javascript">{
    type: <span class="org-string">'Header'</span>,
    actionable: <span class="org-constant">false</span>,
    content: <span class="org-string">'Heading'</span>,
    children: [
        {
            type: <span class="org-string">'UNKNOWN'</span>,
            level: 2,
            loc: [Object],
            range: [Array],
            raw: <span class="org-string">'**'</span>
        },
        {
            type: <span class="org-string">'Str'</span>,
            value: <span class="org-string">'Heading'</span>,
            loc: [Object],
            range: [Array],
            raw: <span class="org-string">'Heading'</span>
        },
        { type: <span class="org-string">'UNKNOWN'</span>, loc: [Object], range: [Array], raw: <span class="org-string">'\n'</span> },
        type: <span class="org-string">'UNKNOWN'</span>
    ],
    level: 2,
    loc: { start: { line: 2, column: 0 }, end: { line: 3, column: 0 } },
    range: [ 1, 12 ],
    raw: <span class="org-string">'** Heading\n'</span>
}
</pre>
</div>

<p>
Lintは、このASTオブジェクトのTypeに基づいてそれぞれのルールを適用してます。
なので見出しの星は対象外にできます。
</p>
</div>
</div>
<div id="outline-container-orgf8aca43" class="outline-4">
<h4 id="orgf8aca43"><a href="#orgf8aca43">AST変換器を調べる</a></h4>
<div class="outline-text-4" id="text-orgf8aca43">
<ul class="org-ul">
<li>ファイル形式の文字列 → (ここが必要) → AST → Lint</li>
</ul>

<p>
やる必要があるのは、オブジェクトの形式を揃えることです。
typeの名前がtextlintに対応したシンボルへマッピングします。
</p>

<p>
変換器はすでにあります。
</p>
<dl class="org-dl">
<dt>orgajs</dt><dd><a href="https://github.com/orgapp/orgajs">https://github.com/orgapp/orgajs</a></dd>
</dl>

<p>
なので、本質的に必要なことはこのマッピングです(ほかにも位置や範囲を付加する必要がありますが、HTMLとかとほぼ同じ)。
</p>
<div class="org-src-container">
<pre class="src src-javascript"><span class="org-keyword">export</span> <span class="org-keyword">const</span> <span class="org-variable-name">nodeTypes</span> = {
  document: ASTNodeTypes.Document,
  paragraph: ASTNodeTypes.Paragraph,
  list: ASTNodeTypes.List,
  <span class="org-string">'list.item'</span>: ASTNodeTypes.ListItem,
  headline: ASTNodeTypes.Header,
  block: ASTNodeTypes.CodeBlock,
  hr: ASTNodeTypes.HorizontalRule,
  <span class="org-comment-delimiter">// </span><span class="org-comment">inline block</span>
  <span class="org-string">'text.plain'</span>: ASTNodeTypes.Str,
  <span class="org-string">'text.code'</span>: ASTNodeTypes.Code,
  <span class="org-string">'text.bold'</span>: ASTNodeTypes.Emphasis,
  link: ASTNodeTypes.Link,
  footnote: <span class="org-string">'FootnoteReference'</span>,
};
</pre>
</div>
</div>
</div>
<div id="outline-container-orga9d7e0d" class="outline-4">
<h4 id="orga9d7e0d"><a href="#orga9d7e0d">テストを書く</a></h4>
<div class="outline-text-4" id="text-orga9d7e0d">
<p>
orgajsがどんな名前で出力するかは実行しないとわからなかったので、ちゃんとすべてテストを書いて調べました。上流の不慮の変更も検知できます。
</p>

<p>
ということで使えるようになりました🎉。
</p>

<p>
便利です。
</p>
</div>
</div>
<div id="outline-container-org16381cd" class="outline-4">
<h4 id="org16381cd"><a href="#org16381cd">まとめ</a></h4>
<div class="outline-text-4" id="text-org16381cd">
<p>
Emacsエコシステムを少し広げることができました。
</p>
</div>
</div>
</div>
<div id="outline-container-orgf87502b" class="outline-3">
<h3 id="orgf87502b"><a href="#orgf87502b">digger発表用スライド <span class="timestamp-wrapper"><span class="timestamp">&lt;2021-07-02 Fri&gt;</span></span></a></h3>
<div class="outline-text-3" id="text-orgf87502b">
<p>
<a href="20210624232811-digger.html#ID-70f249a8-f8c8-4a7e-978c-8ff04ffd09c0">digger</a>
</p>
</div>
<div id="outline-container-org8a70aac" class="outline-4">
<h4 id="org8a70aac"><a href="#org8a70aac">やっていること(途中)</a></h4>
<div class="outline-text-4" id="text-org8a70aac">
<p>
<a href="https://github.com/kijimaD/digger">GitHub - kijimaD/digger</a>
CLIのゲームを作っています(WIP)。
</p>

<p>
(デモ)
</p>

<p>
まだ移動しかできない。
</p>
</div>
</div>
<div id="outline-container-orgc60af82" class="outline-4">
<h4 id="orgc60af82"><a href="#orgc60af82">前回の反省を踏まえた要件</a></h4>
<div class="outline-text-4" id="text-orgc60af82">
<ul class="org-ul">
<li><b>画像表示はあきらめる or 見下ろし</b></li>
<li>ターン制にする。リアルタイムではなく。</li>
<li>テストを書く(<b>テストが書ける構造にする</b>)</li>
</ul>
</div>
</div>
<div id="outline-container-org883eefe" class="outline-4">
<h4 id="org883eefe"><a href="#org883eefe">利点</a></h4>
<div class="outline-text-4" id="text-org883eefe">
<p>
時代に逆行した開発ですが、よいところもあります。
</p>

<ul class="org-ul">
<li>真のRubyだけに集中できる(ライブラリすら必要ではない。CLI用のCursesくらい)</li>
<li>オブジェクト指向をやらなければならない状況。ゲームそのものがゲームオブジェクトの相互作用なので、オブジェクト指向でないと条件ありすぎて死ぬ。フツーに命令的に書けるプログラムが二者間だとしたら、ゲームは三者間。</li>

<li id="例">壁に当たるのは自キャラだけでない。敵キャラや銃弾も当たる。各オブジェクトに判断してもらわないといけない。</li>
<li id="例">弾がヒットしたら、誰のスコアになるのか =&gt; その銃弾オブジェクトを生成したキャラクターオブジェクト。みたいな。</li>
<li id="例">毎ターンフィールドにあるすべてのオブジェクトを更新＋新描画したい =&gt; すべて入れ物オブジェクトに入れておいて、mapですべてを一括処理しよう、とか。</li>
</ul>
</div>
</div>
<div id="outline-container-org0ed1be2" class="outline-4">
<h4 id="org0ed1be2"><a href="#org0ed1be2">まとめ</a></h4>
<div class="outline-text-4" id="text-org0ed1be2">
<p>
1ヶ月くらい頑張ってみます(宣言)。
</p>
</div>
</div>
<div id="outline-container-org3d0b4cf" class="outline-4">
<h4 id="org3d0b4cf"><a href="#org3d0b4cf">ボツ</a></h4>
<div class="outline-text-4" id="text-org3d0b4cf">
<p>
ローグライクになる予定です。↓みたいなゲーム。超好きなジャンルです。
</p>

<dl class="org-dl">
<dt><a href="https://github.com/CleverRaven/Cataclysm-DDA">Cataclysm-DDA</a></dt><dd>ゾンビサバイバル
<a href="https://www.google.com/search?q=cataclysm+dark+days+ahead+&amp;tbm=isch&amp;ved=2ahUKEwir1caPhcLxAhVBxosBHUPJCfwQ2-cCegQIABAA&amp;oq=cataclysm+dark+days+ahead+&amp;gs_lcp=CgNpbWcQAzICCAAyAggAMgIIADICCAAyAggAMgIIADICCAAyAggAMgIIADICCAA6BAgAEBhQtsMFWPDFBWCxxwVoAHAAeACAAbUBiAHHApIBAzIuMZgBAKABAaoBC2d3cy13aXotaW1nwAEB&amp;sclient=img&amp;ei=eMvdYKu5B8GMr7wPw5Kn4A8&amp;bih=733&amp;biw=1451#imgrc=NRZZLClw8123FM">参考</a></dd>

<dt><a href="http://www.bay12games.com/dwarves/">Dwarf Fortress</a></dt><dd>サバイバル/シミュレーション
<a href="https://www.google.com/search?q=dwarf+fortress+gif&amp;tbm=isch&amp;ved=2ahUKEwi3lIiphMLxAhVvzYsBHQ5zAiUQ2-cCegQIABAA&amp;oq=dwarf+fortress+gif&amp;gs_lcp=CgNpbWcQAzICCAA6BAgAEEM6BAgAEBhQ_ZkDWLqcA2CgngNoAHAAeACAAXeIAY4DkgEDMi4ymAEAoAEBqgELZ3dzLXdpei1pbWfAAQE&amp;sclient=img&amp;ei=ocrdYPe_C--ar7wPjuaJqAI&amp;bih=733&amp;biw=1451#imgrc=pWyEfsGw-tobeM&amp;imgdii=LjqvyOp9B09twM">参考</a></dd>

<dt>Elona</dt><dd>RPG風
<a href="https://www.google.com/search?q=elona&amp;tbm=isch&amp;ved=2ahUKEwjR1oDUhcLxAhXNDN4KHVI7CTEQ2-cCegQIABAA&amp;oq=elona&amp;gs_lcp=CgNpbWcQAzICCAAyBAgAEEMyBAgAEEMyAggAMgIIADIECAAQQzICCAAyAggAMgQIABBDMgIIAFCP9gFYk_0BYJH-AWgAcAB4AIABXogB1gKSAQE0mAEAoAEBqgELZ3dzLXdpei1pbWfAAQE&amp;sclient=img&amp;ei=B8zdYJG3Kc2Z-AbS9qSIAw&amp;bih=733&amp;biw=1451#imgrc=pLVXzgxlaxCVDM">参考</a></dd>
</dl>

<p>
これらは商業的な作品ではなく、貧弱なグラフィックですが、超濃密なゲーム世界を作り上げています。
個人がめざす(めざせる)のはこういう方向性だと考えてます。
</p>
</div>
</div>
<div id="outline-container-org9a420f7" class="outline-4">
<h4 id="org9a420f7"><a href="#org9a420f7">前回の反省</a></h4>
<div class="outline-text-4" id="text-org9a420f7">
<p>
仕事につく前、何度か作りはじめては挫折してきました。
</p>

<p>
直近だと去年開発してましたが、開発が進まなくなってやめました↓。
</p>
<dl class="org-dl">
<dt><a href="https://github.com/kijimaD/ban-ban-don">GitHub - kijimaD/ban-ban-don</a></dt><dd>rubyのゲームライブラリGosuを使った、シューティングゲーム。
<ul class="org-ul">
<li>(本に載ってたコードをベースに開発しました。根本部分のコード構造はほとんどオリジナル性ないです)</li>
</ul></dd>
</dl>


<p>
これの問題点、挫折した理由&#x2026;。
</p>

<ul class="org-ul">
<li>要件を高望みしすぎた。
<ul class="org-ul">
<li>疑似3Dにした。座標に、ひし形の画像を敷き詰めると疑似3Dができます…画面確認が大変だった。特に重なりとか、接触判定が…。</li>
<li>アニメーションする画像の用意が大変すぎた。方向分の画像を作る必要がある。</li>
<li>リアルタイムなので再現しにくい。</li>
<li>パフォーマンスを考えないとまともに動かなくなる。黒魔術がある(四分木とか)。</li>
</ul></li>

<li>つらい目視確認開発。
<ul class="org-ul">
<li>新機能を作るときも、いちいち起動して該当箇所までいって開発していた。</li>
<li>テストがない、lintがない(まだ知らなかった)</li>
<li>いつのまにかどこかが壊れて動かなくなること多数</li>
</ul></li>
</ul>

<p>
=&gt; ムリ <code>＼(^o^)／</code>
</p>
</div>
</div>
</div>

<div id="outline-container-org1e8a3c9" class="outline-3">
<h3 id="org1e8a3c9"><a href="#org1e8a3c9">発表</a></h3>
<div class="outline-text-3" id="text-org1e8a3c9">
</div>
<div id="outline-container-orgd53d7be" class="outline-4">
<h4 id="orgd53d7be"><a href="#orgd53d7be"><a href="20210508234743-emacs.html#ID-1ad8c3d5-97ba-4905-be11-e6f2626127ad">Emacs</a>パッケージ(#2)を作りました。</a></h4>
<div class="outline-text-4" id="text-orgd53d7be">
<p>
<a href="https://github.com/kijimaD/create-link">https://github.com/kijimaD/create-link</a>
</p>
</div>
</div>
<div id="outline-container-org9602258" class="outline-4">
<h4 id="org9602258"><a href="#org9602258">作ったもの</a></h4>
<div class="outline-text-4" id="text-org9602258">
</div>
<ul class="org-ul">
<li><a id="orgb51a343"></a><a href="#orgb51a343">Chrome拡張CreateLinkをEmacsに移植した</a><br>
<div class="outline-text-5" id="text-orgb51a343">
<p>
<code>CreateLink</code> というChrome拡張があります。
</p>

<p>
それのEmacs版を作成しました。
公式パッケージ集での審査中(まだ返信来ない)。
</p>
</div>
</li>
<li><a id="orgfc9edb8"></a><a href="#orgfc9edb8">元になったCreateLinkの説明🔗</a><br>
<div class="outline-text-5" id="text-orgfc9edb8">
<p>
現在のページの名前のついたリンクを取得する拡張です。GitHubとかSlackに貼り付けるとき、便利なやつです。
</p>

<ul class="org-ul">
<li>CreateLinkのリンク(Chromeウェブストア)</li>
</ul>
<p>
<code>https://chrome.google.com/webstore/detail/create-link/gcmghdmnkfdbncmnmlkkglmnnhagajbm?hl=ja</code>
</p>

<ul class="org-ul">
<li>例: Markdownリンクだと、</li>
</ul>
<p>
<a href="https://www.google.com">https://www.google.com</a> -&gt;[Google](<a href="https://www.google.com/">https://www.google.com/</a>) みたいな。
</p>

<p>
(ブラウザのデモ)
</p>
</div>
</li>
<li><a id="org1351e3e"></a><a href="#org1351e3e">作成したcreate-linkの紹介</a><br>
<div class="outline-text-5" id="text-org1351e3e">
<ul class="org-ul">
<li>Emacs上の各種ブラウザeww, w3m</li>
<li>各種フォーマットHTML(default), LaTeX, Markdown, MediaWiki, Org-mode</li>
<li>ブラウザ以外のときはローカルファイルのパスを取得する</li>
</ul>

<p>
に対応してます。
</p>

<p>
(実行・オプション操作のデモ)
</p>
</div>
</li>
</ul>
</div>
<div id="outline-container-orga380b7e" class="outline-4">
<h4 id="orga380b7e"><a href="#orga380b7e">コード</a></h4>
<div class="outline-text-4" id="text-orga380b7e">
<p>
ライセンスの部分を除くと、90行くらいしかありません。
</p>

<p>
半分くらいはユーザ設定のための決まりきった記述のため、実際は40行ほど。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span class="org-comment-delimiter">;;; </span><span class="org-comment">Code:</span>

(<span class="org-keyword">require</span> '<span class="org-constant">eww</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">w3m</span>)

(<span class="org-keyword">defgroup</span> <span class="org-type">create-link</span> nil
  <span class="org-doc">"Generate a formatted current page link."</span>
  <span class="org-builtin">:group</span> 'convenience
  <span class="org-builtin">:prefix</span> <span class="org-string">"create-link-"</span>)

(<span class="org-keyword">defcustom</span> <span class="org-variable-name">create-link-default-format</span> 'html
  <span class="org-doc">"Default link format."</span>
  <span class="org-builtin">:group</span> 'create-link
  <span class="org-builtin">:type</span> '(choice (const <span class="org-builtin">:tag</span> <span class="org-string">"html"</span> html)
                 (const <span class="org-builtin">:tag</span> <span class="org-string">"markdown"</span> markdown)
                 (other <span class="org-builtin">:tag</span> <span class="org-string">"org"</span> org)
                 (other <span class="org-builtin">:tag</span> <span class="org-string">"media-wiki"</span> media-wiki)
                 (other <span class="org-builtin">:tag</span> <span class="org-string">"latex"</span> latex)))

<span class="org-comment-delimiter">;; </span><span class="org-comment">&#127775;&#12458;&#12503;&#12471;&#12519;&#12531;&#35373;&#23450;</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Format keywords:</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">%url% - http://www.google.com/</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">%title% - Google</span>
(<span class="org-keyword">defcustom</span> <span class="org-variable-name">create-link-format-html</span> <span class="org-string">"&lt;a href='%url%'&gt;%title%&lt;/a&gt;"</span>
  <span class="org-doc">"HTML link format."</span>
  <span class="org-builtin">:group</span> 'create-link
  <span class="org-builtin">:type</span> 'string)

(<span class="org-keyword">defcustom</span> <span class="org-variable-name">create-link-format-markdown</span> <span class="org-string">"[%title%](%url%)"</span>
  <span class="org-doc">"Markdown link format."</span>
  <span class="org-builtin">:group</span> 'create-link
  <span class="org-builtin">:type</span> 'string)

(<span class="org-keyword">defcustom</span> <span class="org-variable-name">create-link-format-org</span> <span class="org-string">"[[%url%][%title%]]"</span>
  <span class="org-doc">"Org-mode link format."</span>
  <span class="org-builtin">:group</span> 'create-link
  <span class="org-builtin">:type</span> 'string)

(<span class="org-keyword">defcustom</span> <span class="org-variable-name">create-link-format-media-wiki</span> <span class="org-string">"[%url% %title%]"</span>
  <span class="org-doc">"Media Wiki link format."</span>
  <span class="org-builtin">:group</span> 'create-link
  <span class="org-builtin">:type</span> 'string)

(<span class="org-keyword">defcustom</span> <span class="org-variable-name">create-link-format-latex</span> <span class="org-string">"\\href{%url%}{%title%}"</span>
  <span class="org-doc">"Latex link format."</span>
  <span class="org-builtin">:group</span> 'create-link
  <span class="org-builtin">:type</span> 'string)

(<span class="org-keyword">defun</span> <span class="org-function-name">create-link-raw-format</span> ()
  <span class="org-doc">"Choose a format type by the custom variable."</span>
  (<span class="org-keyword">pcase</span> create-link-default-format
    (`html
     create-link-format-html)
    (`markdown
     create-link-format-markdown)
    (`org
     create-link-format-org)
    (`media-wiki
     create-link-format-media-wiki)
    (`latex
     create-link-format-latex)))

(<span class="org-keyword">defun</span> <span class="org-function-name">create-link-replace-dictionary</span> ()
  <span class="org-doc">"Convert format keyword to corresponding one."</span>
  `((<span class="org-string">"%url%"</span> . ,(cdr (assoc 'url (create-link-get-information))))
    (<span class="org-string">"%title%"</span> . ,(cdr (assoc 'title (create-link-get-information))))))

(<span class="org-keyword">defun</span> <span class="org-function-name">create-link-make-format</span> ()
  <span class="org-doc">"Fill format keywords."</span>
  (seq-reduce
   (<span class="org-keyword">lambda</span> (string regexp-replacement-pair)
     (replace-regexp-in-string
      (car regexp-replacement-pair)
      (cdr regexp-replacement-pair)
      string))
   (create-link-replace-dictionary)
   (create-link-raw-format))) <span class="org-comment-delimiter">;; </span><span class="org-comment">&lt;a href='%url%'&gt;%title%&lt;/a&gt; &#12392;&#12363;&#12290;&#12523;&#12540;&#12503;&#12398;initial value&#12290;</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">&lt;a href='%url%'&gt;%title%&lt;/a&gt;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">&lt;a href='https://...'&gt;%title%&lt;/a&gt; &#21069;&#12398;&#20516;&#12434;&#20445;&#25345;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">&lt;a href='https://...'&gt;Google&lt;/a&gt; &#12373;&#12425;&#12395;&#32622;&#25563;</span>

#+begin_comment
<span class="org-comment-delimiter">;; </span><span class="org-comment">&#12371;&#12371;&#12434;&#32186;&#40599;&#12395;&#26360;&#12367;&#12398;&#12364;&#19968;&#30058;&#12416;&#12378;&#12363;&#12375;&#12363;&#12387;&#12383;&#12290;...&#35079;&#25968;&#12398;&#25991;&#23383;&#21015;&#32622;&#25563;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">&#19968;&#12388;&#12398;&#32622;&#25563;(replace-regexp-in-string)&#12399;&#38306;&#25968;&#12364;&#12354;&#12427;&#12364;&#12289;&#35079;&#25968;&#25351;&#23450;&#12399;&#12391;&#12365;&#12394;&#12356;&#12290;</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">(seq-reduce)&#12398;&#31532;&#19968;&#24341;&#25968;&#12399;&#12467;&#12540;&#12489;&#12502;&#12525;&#12483;&#12463;&#12395;&#30456;&#24403;&#12377;&#12427;&#12392;&#12371;&#12429;&#12290;&#12523;&#12540;&#12503;&#19968;&#22238;&#12391;&#20309;&#12434;&#12377;&#12427;&#12363;&#12290;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">string&#12399;raw-format(&lt;a href='%url%'&gt;%title%&lt;/a&gt;&#12394;&#12393;)&#12434;&#21463;&#12369;&#21462;&#12427;&#12290;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">regexp-replacement-pair&#12399;replace-dictionary&#12398;&#12452;&#12486;&#12524;&#12540;&#12471;&#12519;&#12531;&#20998;&#12364;&#20837;&#12427;&#12290;&#12502;&#12525;&#12483;&#12463;&#24341;&#25968;&#12290;</span>
#+end_comment

<span class="org-comment-delimiter">;; </span><span class="org-comment">&#127775;&#12502;&#12521;&#12454;&#12470;&#12420;&#12381;&#12398;&#20182;&#12434;&#12521;&#12483;&#12503;&#12375;&#12390;title, url&#12434;&#36820;&#12377;&#65281;</span>
(<span class="org-keyword">defun</span> <span class="org-function-name">create-link-get-information</span> ()
  <span class="org-doc">"Get keyword information on your browser."</span>
  (<span class="org-keyword">cond</span> ((string-match-p <span class="org-string">"eww"</span> (buffer-name))
         `((title . ,(plist-get eww-data <span class="org-builtin">:title</span>))
           (url . ,(plist-get eww-data <span class="org-builtin">:url</span>))))
        ((string-match-p <span class="org-string">"w3m"</span> (buffer-name))
         `((title . ,w3m-current-title)
           (url . ,w3m-current-url)))
        <span class="org-comment-delimiter">;; </span><span class="org-comment">otherwise, create-link to the file-buffer</span>
        (t
         `((title . ,(buffer-name))
           (url . ,(buffer-file-name))))))

<span class="org-comment-delimiter">;; </span><span class="org-comment">&#127775;&#12456;&#12531;&#12488;&#12522;&#12540;&#12509;&#12452;&#12531;&#12488;</span>
<span class="org-comment-delimiter">;;;</span><span class="org-comment">###</span><span class="org-comment"><span class="org-warning">autoload</span></span>
(<span class="org-keyword">defun</span> <span class="org-function-name">create-link</span> ()
  <span class="org-doc">"Create formatted link."</span>
  (<span class="org-keyword">interactive</span>)
  (message <span class="org-string">"Copied! %s"</span> (create-link-make-format))
  (kill-new (create-link-make-format)))

(<span class="org-keyword">provide</span> '<span class="org-constant">create-link</span>)

<span class="org-comment-delimiter">;;; </span><span class="org-comment">create-link.el ends here</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org31edd51" class="outline-4">
<h4 id="org31edd51"><a href="#org31edd51">知見</a></h4>
<div class="outline-text-4" id="text-org31edd51">
</div>
<ul class="org-ul">
<li><a id="org6786d6e"></a><a href="#org6786d6e">短くても問題なし</a><br>
<div class="outline-text-5" id="text-org6786d6e">
<p>
大きなパッケージに比べてこれはゴミみたいなもんだな、と思ってました。
</p>

<p>
でもコードやアイデアの参考にするため使っているパッケージのコードを眺めていて、こういう短いものでも自分が日々使ってたり、多くの人に使われているパッケージはけっこうあることに気づきました。
</p>

<p>
たとえば。
</p>

<p>
add-node-modules-path.el
</p>
<ul class="org-ul">
<li>node環境の読み込み 86行</li>
</ul>
<p>
<a href="file:///home/kijima/.emacs.d/.cask/27.1/elpa/org-bullets-20200317.1740/org-bullets.el">org-bullets.el</a>
</p>
<ul class="org-ul">
<li>リストをいい感じに表示する 109行</li>
</ul>
<p>
<a href="file:///home/kijima/.emacs.d/.cask/27.1/elpa/define-word-20210103.1812/define-word.el">define-word.el</a>
</p>
<ul class="org-ul">
<li>オンライン辞書 132行</li>
</ul>
<p>
<a href="file:///home/kijima/.emacs.d/.cask/27.1/elpa/rubocop-20210309.1241/rubocop.el">rubocop.el</a>
</p>
<ul class="org-ul">
<li>rubocopをいい感じに 267行</li>

<li>重要なのは1つのことをうまくやること。</li>
</ul>
</div>
</li>
<li><a id="orgdef5d52"></a><a href="#orgdef5d52">他の人に使ってもらえるとうれしい</a><br>
<div class="outline-text-5" id="text-orgdef5d52">
<p>
使ってくれた＋PRが来ました。
褒めてくれてテンション上がる。
<a href="https://github.com/kijimaD/create-link/pull/7">https://github.com/kijimaD/create-link/pull/7</a>
</p>

<blockquote>
<p>
I like this package, is simple and useful.
</p>
</blockquote>

<p>
審査にむけてやったこと。
</p>

<ul class="org-ul">
<li>わかりやすいコンセプト。</li>
<li>空気を読んだ動作をする、限られたインタフェース(create-link)という関数1つで、複数フォーマット・ブラウザに対応できる。</li>
<li>ちゃんとドキュメントを用意した <a href="https://github.com/kijimaD/create-link">kijimaD/create-link</a></li>
<li>オプションを用意した。フォーマットの種類やブラウザを増やすのは、とても簡単です。</li>
</ul>
</div>
</li>
</ul>
</div>
<div id="outline-container-orgb66b894" class="outline-4">
<h4 id="orgb66b894"><a href="#orgb66b894">ロードマップ</a></h4>
<div class="outline-text-4" id="text-orgb66b894">
<p>
フォーマットリンクを取得するだけのシンプルなコードではありますが、拡張はいろいろ考えられます。
</p>
</div>
<ul class="org-ul">
<li><a id="orgb20936f"></a><a href="#orgb20936f">入出力のバリエーションを増やす</a><br>
<ul class="org-ul">
<li><a id="org0e4e497"></a><a href="#org0e4e497"><span class="done DONE">DONE</span> エクスポート形式増加 HTML,LaTeX,Markdown,MediaWiki,Org-mode</a><br>
<div class="outline-text-6" id="text-org0e4e497">
</div>
</li>
<li><a id="org4073d03"></a><a href="#org4073d03"><span class="done DONE">DONE</span> ユーザ定義のフィルター … chromeの拡張の方にはある</a><br>
<div class="outline-text-6" id="text-org4073d03">
</div>
</li>
<li><a id="org32807b8"></a><a href="#org32807b8"><span class="done DONE">DONE</span> PDF(ページを取ることはできそう。リンクでページ番号を表現できるか)</a><br>
<div class="outline-text-6" id="text-org32807b8">
<p>
やらない。
</p>
</div>
</li>
</ul>
</li>
<li><a id="org3b2b490"></a><a href="#org3b2b490">コンテクストによる動作のバリエーションを増やす</a><br>
<ul class="org-ul">
<li><a id="org045d669"></a><a href="#org045d669"><span class="done DONE">DONE</span> テキスト選択中だと、タイトルに選択したところを入れる</a><br>
<div class="outline-text-6" id="text-org045d669">
</div>
</li>
<li><a id="org5b79aaf"></a><a href="#org5b79aaf"><span class="done DONE">DONE</span> 選択URLにアクセスして、Titleをスクレイピング。リンクを完成させる</a><br>
<div class="outline-text-6" id="text-org5b79aaf">
</div>
</li>
<li><a id="orgaa88997"></a><a href="#orgaa88997"><span class="done DONE">DONE</span> 手動で形式選択できるように</a><br>
<div class="outline-text-6" id="text-orgaa88997">
<p>
helmから選べたらベスト。選択をどうやってやればいいのかよくわからない
org-roamのファイル選択で出てくるhelmなど参考になりそう。
</p>
</div>
</li>
<li><a id="org039ac31"></a><a href="#org039ac31"><span class="done DONE">DONE</span> とりあえず標準のcompletionだけ追加</a><br>
<div class="outline-text-6" id="text-org039ac31">
</div>
</li>
<li><a id="org5f77a81"></a><a href="#org5f77a81"><span class="done DONE">DONE</span> checkdocをCIで走らせるようにする</a><br>
<div class="outline-text-6" id="text-org5f77a81">
<p>
elisp-checkはcask環境のためうまくできない。
なので、elisp-check.elを直に読み込んで実行するようにすればよさそう。
</p>

<p>
elisp-lintというパッケージに同梱されてたのでそれで一気にできるようになった。
</p>
</div>
</li>
<li><a id="org38b3240"></a><a href="#org38b3240"><span class="done DONE">DONE</span> テスト追加 + CI</a><br>
<div class="outline-text-6" id="text-org38b3240">
</div>
</li>
</ul>
</li>
<li><a id="org11a6568"></a><a href="#org11a6568">ユーザの拡張性を増やす</a><br>
<ul class="org-ul">
<li><a id="org697d714"></a><a href="#org697d714"><span class="done DONE">DONE</span> フックを追加…たとえばリンク生成 → {フック} → コピー前としておく。</a><br>
<div class="outline-text-6" id="text-org697d714">
<p>
フックでは式が使えるのでなんでもできる。動的にタイムスタンプを加えたり、連番を振ったりとか。単なる文字列フィルターよりはるかに強力。誰かがもっと便利な使い方を編み出してくれる。
</p>

<p>
make-formatと、message+killの前にフックを差し込むか。
でも、文字列を受け取れないからあまり意味ない気がしてきた。
フックはその処理に追加するというより、別の処理を差し込むためのものだ(ある関数を実行すると、別の全く関係ない)モードをオンにするとか。その意味でいうと、フックする処理はまったく思いつかない。
</p>
</div>
</li>
<li><a id="orge5c567b"></a><a href="#orge5c567b"><span class="done DONE">DONE</span> リンク変換</a><br>
<div class="outline-text-6" id="text-orge5c567b">
<p>
別のフォーマットに変換するのもあっていいな。
すでに書式があるから、そこからURL, Titleを取り出せればいい。
</p>
<ul class="org-ul">
<li>判定関数</li>
</ul>
<p>
thing-at-pointの拡張だな。フォーマットリンク上にカーソルがある場合、タイトルとURLを取得して変換…。
どのフォーマットか判定できれば、タイトルとURLを取れる。
markdown-mode.elの(markdown-kill-thing-at-point)が参考になりそう。
</p>

<p>
別に独自実装しなくても、各modeのregexpを使えばいいかな。いや、フル装備でめちゃくちゃ複雑だし、いろんな依存(5つも増えるのはさすがに…)があるので独自でやろう。
<a href="https://ayatakesi.github.io/emacs/25.1/Regexps.html">https://ayatakesi.github.io/emacs/25.1/Regexps.html</a>
</p>
</div>
</li>
<li><a id="org847fa00"></a><a href="#org847fa00"><span class="done DONE">DONE</span> フォーマットごとの特殊ルールを追加する</a><br>
<div class="outline-text-6" id="text-org847fa00">
<p>
たとえばlatexの場合、ファイルリンクにはプレフィクスrun:がつくらしい。
今のコードだとファイルリンクだという検知はget-informationでしかできないのでそこに書くしかない。
一般的関数に特定のファイルフォーマットの処理が挟まれると非常に醜い。
なので、最終的な個別変換を分離する。そうするとhtmlがついてないときはrunをつけるとか、好きに追加できるだろう。
</p>
</div>
</li>
<li><a id="orgade0d7e"></a><a href="#orgade0d7e">Magit(Gitクライアント)の場合。(すでにGitHubリンクの生成はある)</a><br>
<div class="outline-text-6" id="text-orgade0d7e">
<p>
<code>git-link</code> の整形バージョン。
そこまではちょっとやりすぎ感。依存が増えすぎるのも微妙な感じか。でも欲しいよな…。
各PRまではいいけど、少なくともリポジトリのホームページくらいならいいかな。
</p>
</div>
</li>
<li><a id="org39ac214"></a><a href="#org39ac214">シェルだったらカレントディレクトリを取る</a><br>
<div class="outline-text-6" id="text-org39ac214">
<p>
ブラウザみたく、変数が用意されてはない模様。まあこれについてはあまりいらないか。
パスを取得したいときはあるけど、それをhtmlリンクにしたいってあまりないしな。
</p>

<p>
パスはdefault-directoryで取れる。
</p>
</div>
</li>
<li><a id="org2a48efa"></a><a href="#org2a48efa">タイトルはないときバージョンを作るか</a><br>
<div class="outline-text-6" id="text-org2a48efa">
<p>
つまりパスだけ。
主題とはずれる気がする。シェルとかだとタイトルの取りようがないのでこれを追加するのが必要。
</p>
</div>
</li>
<li><a id="org2112a0e"></a><a href="#org2112a0e">Gitリポジトリのときは、相対ディレクトリを取得するオプション</a><br>
<div class="outline-text-6" id="text-org2112a0e">
<p>
リポジトリからリンクを辿れるようになる。でもEmacs上でどうなんだろう。
辿れないけど、人にディレクトリを示すときには使える。今は絶対パスで取って前のを削除している。めんど
い。
うむむ。リモートリポジトリのURLがわかるなら意味はありそう。git-linkとあまり変わらないけどな。
git-linkのコードを見てるけど、まだあまりよくわからない。
</p>
</div>
</li>
<li><a id="orgac773ff"></a><a href="#orgac773ff">ホームディレクトリを~で出すようにする</a><br>
<div class="outline-text-6" id="text-orgac773ff">
<p>
今は <code>/home/kijima...</code> で出てるからな。汎用性があまりよくない。あとで絶対変わるし、ほかで使えない。
</p>
</div>
</li>
<li><a id="org18c3463"></a><a href="#org18c3463">実行関数を出力</a><br>
<div class="outline-text-6" id="text-org18c3463">
<p>
たとえばivyのinfoページにいたとする。(info &ldquo;ivy&rdquo;) を出力する。
これを実行するとivyに飛べるので、リンクといえそう。環境も関係ない。
</p>

<p>
infoバッファからの検索キーワードの割り出し方…
実行ディレクトリをdefault-directoryか何かで取る。(.*).infoというファイルがあるはずなのでそのファイル名をinfoの引数に渡す。
</p>
</div>
</li>
</ul>
</li>
<li><a id="orgd70034e"></a><a href="#orgd70034e">まとめ</a><br>
<div class="outline-text-5" id="text-orgd70034e">
<ol class="org-ol">
<li>移植技を覚えました。要件が明確＋元ソースを読むことができると楽。プログラムに集中できて美味しい。</li>
<li>ちょっとした不便さは少ないコードで解決できる。</li>
<li>ごく単純なコンセプトでも、拡張の方向性は意外と多いです。</li>
</ol>

<p>
おわり。
</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<footer class="footer py-3"><div class="container"><div class="row "><div class="col-md-4"></div><div class="col-sm col-md"><nav class="navbar"><a class="nav-link text-secondary small px-0" href="./index.html">Insomnia</a><a class="nav-link text-secondary small px-0" href="./sitemap.html">Sitemap</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD/roam">Repository</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD">@kijimaD</a></nav></div><div class="col-md-4"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"/>
</div>
</body>
</html>
