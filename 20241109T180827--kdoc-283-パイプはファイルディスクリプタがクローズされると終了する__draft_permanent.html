<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2024-11-13 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>KDOC 283: パイプはファイルディスクリプタがクローズされると終了する</title>
<meta name="author" content="root" />
<meta name="generator" content="Org Mode" />
<link rel='shortcut icon' type='image/x-icon' href='/roam/favicon.ico' /><link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css' /><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css' /><link rel='stylesheet' href='../roam/css/site.css' /><link rel='stylesheet' href='../roam/css/code.css' /><link rel='stylesheet' href='css/site.css' /><link rel='stylesheet' href='css/code.css' />
</head>
<body>
<div id="preamble" class="status">
<div><div class="header"><div class="container"><div class="row"><div class="col-sm-12 col-md-12"><nav class="navbar navbar-light"/></div></div></div></div></div>
</div>
<div id="content" class="content">
<h1 class="title">KDOC 283: パイプはファイルディスクリプタがクローズされると終了する</h1>

<div id="outline-container-orgd275d73" class="outline-2">
<h2 id="orgd275d73"><a href="#orgd275d73">この文書のステータス</a></h2>
<div class="outline-text-2" id="text-orgd275d73">
<ul class="org-ul">
<li>作成
<ul class="org-ul">
<li class="on"><input type='checkbox' checked='checked' /> 2024-11-09 貴島</li>
</ul></li>
<li>レビュー
<ul class="org-ul">
<li class="off"><input type='checkbox' /> &lt;署名&gt;</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb0d7fcf" class="outline-2">
<h2 id="orgb0d7fcf"><a href="#orgb0d7fcf">概要</a></h2>
<div class="outline-text-2" id="text-orgb0d7fcf">
<p>
パイプの読み込み側を参照しているファイルディスクリプタがクローズされている場合、 パイプバッファへのwrite(2) は SIGPIPEシグナルを生成する。
</p>


<div id="orgf8a9e8d" class="figure">
<p><img src="images/20241109-rw.drawio.svg" alt="20241109-rw.drawio.svg" class="org-svg">
</p>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>マニュアルの該当の箇所</label><pre class="src src-shell">man <span class="org-string">"pipe(7)"</span> | grep -A 6 <span class="org-string">"If all file"</span>
</pre>
</div>

<pre class="example">
(read(2) will return 0).  If all file descriptors referring to the read
end of a pipe have been closed, then a write(2) will  cause  a  SIGPIPE
signal to be generated for the calling process.  If the calling process
is ignoring this signal, then write(2) fails with the error EPIPE.   An
application  that uses pipe(2) and fork(2) should use suitable close(2)
calls to close unnecessary duplicate  file  descriptors;  this  ensures
that end-of-file and SIGPIPE/EPIPE are delivered when appropriate.
</pre>
</div>
</div>

<div id="outline-container-org86760aa" class="outline-2">
<h2 id="org86760aa"><a href="#org86760aa">関連</a></h2>
<div class="outline-text-2" id="text-org86760aa">
<p>
なし。
</p>
<ul class="org-ul">
<li><a href="20241109T174614--kdoc-282-単体だと終了しないプロセスでパイプを使うと終了するのはなぜか__draft_permanent.html#ID-20241109T174614">KDOC 282: パイプで結合すると実行終了するのはなぜか?</a>。このメモを書くきっかけとなった疑問</li>
</ul>
</div>
</div>


<div id="outline-container-orge78ad6c" class="outline-2">
<h2 id="orge78ad6c"><a href="#orge78ad6c">Backlinks</a></h2>
<div class="outline-text-2" id="text-orge78ad6c">
<ul class="org-ul">
<li><a href="./20241109T182138--kdoc-284-パイプで結合したプロセスが終了する流れ__draft_permanent.html">KDOC 284: パイプで結合したプロセスが終了する流れ</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<footer class="footer py-3"><div class="container"><div class="row "><div class="col-md-4"></div><div class="col-sm col-md"><nav class="navbar"><a class="nav-link text-secondary small px-0" href="./index.html">Insomnia</a><a class="nav-link text-secondary small px-0" href="./sitemap.html">Sitemap</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD/roam">Repository</a><a class="nav-link text-secondary small px-0" href="https://github.com/kijimaD">@kijimaD</a></nav></div><div class="col-md-4"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"/>
</div>
</body>
</html>
