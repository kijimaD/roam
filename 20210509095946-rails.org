#+title: Rails
* 単発メモ
** factorybot
create_list - factorybot
** ネストしたvalidate
 特定の条件だけで発動するvalidation + 条件。`with_options: if`内で`if`を使うと、中のif条件が優先して実行されるため、こう書く必要があります。
 ```ruby
 validates :term_date, date: { after: proc { Time.zone.now } }, if: proc { |p| p.term_date? && p.sellable?  }
 ```
** `includes`
 N+1問題を回避するために用います。
